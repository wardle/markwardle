<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="http://jekyllrb.com" version="3.4.1">Jekyll</generator><link href="https://www.wardle.org/feed.xml" rel="self" type="application/atom+xml" /><link href="https://www.wardle.org/" rel="alternate" type="text/html" /><updated>2017-05-02T21:59:09+01:00</updated><id>https://www.wardle.org/</id><title type="html">Dr. Mark Wardle</title><subtitle>Consultant Neurologist, clinical informatics, entrepreneur and software developer.
</subtitle><entry><title type="html">Clinical information system design: 3. Data standards and terminology</title><link href="https://www.wardle.org/cis-design/2017/05/02/data-standards.html" rel="alternate" type="text/html" title="Clinical information system design: 3. Data standards and terminology" /><published>2017-05-02T15:20:00+01:00</published><updated>2017-05-02T15:20:00+01:00</updated><id>https://www.wardle.org/cis-design/2017/05/02/data-standards</id><content type="html" xml:base="https://www.wardle.org/cis-design/2017/05/02/data-standards.html">&lt;p&gt;A terminology is a body of terms used within a particular subject of study or profession. A classification is a systematic organisation of things into classes. A classification system such as ICD-10 cannot be used as a terminology and many terminologies cannot be easily used as a classification system. This is an important distinction and relates to the how those data are primarily used.&lt;/p&gt;

&lt;h1 id=&quot;snomed-ct&quot;&gt;SNOMED CT&lt;/h1&gt;

&lt;p&gt;SNOMED CT is a very large and comprehensive terminology.  Importantly terms can be linked by multiple relationships to other terms. 
This makes it possible for software to determine that “multiple sclerosis” is a disease defined by “demyelination” of the “central nervous system”. 
When implemented properly, SNOMED CT enables software to make intelligent decisions about what to show, what data to request and what forms to present, based on the diagnoses entered. For example, the database would know that a patient had epilepsy if they were given a diagnosis of juvenile myoclonic epilepsy or frontal lobe epilepsy or any of the hundreds of other terms that are equivalent to a diagnosis of epilepsy.&lt;br /&gt;
Thus a command to `send an alert when a patient, belonging to a particular consultant, with motor neurone disease loses 5% of their body mass compared to their baseline at diagnosis’, can be implemented easily. SNOMED CT allows the underlying logic to simply ask whether the patient has a type of “motor neurone disease” and this would automatically include all patients with related diagnoses such as “primary lateral sclerosis” and “pseudobulbar palsy”.&lt;/p&gt;

&lt;p&gt;SNOMED CT is not confined to diagnostic and procedural information.  There are hierarchies covering a wide range of medical terminology including anatomical structures, pathology, occupations and ethnic origins. With local extensions such as the NHS’ DM\&amp;amp;D (dictionary of medicines and devices) these codes can be used in any field that needs structured coded information.&lt;/p&gt;

&lt;p&gt;Another advantage is support for synonyms. A distinct clinical concept can and usually has multiple synonyms - for example “Granulomatosis with polyangiitis” was previously known as “Wegener granulomatosis”. With synonym support, a user entering an outdated or synonymous term would find the synonym and see it mapped into the new modern preferred description of the term.&lt;/p&gt;

&lt;p&gt;Within SNOMED CT, clinical terms are “concepts”, “synonyms” are “descriptions” and the relationships between concepts are recorded as “relationships”. While seemingly simple, as relationships themselves are defined by concepts (such as `IS-A’ as in “‘Motor neurone disease—IS-A—Disorder of nervous system”) it means that the relationship tree is infinitely extendable over time.&lt;/p&gt;

&lt;p&gt;SNOMED CT is owned by Snomed International - and is an international terminology, with the UK version managed by the UK Terminology Centre (UKTC) of the Health and Social Care Information Centre (HSCIC) - now called NHS Digital.  There are online &lt;a href=&quot;http://systems.hscic.gov.uk/data/uktc/training&quot;&gt;training resources&lt;/a&gt; as well as a simple online &lt;a href=&quot;http://browser.ihtsdotools.org&quot;&gt;SNOMED CT browser&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I have developed an open-source terminology server that provides fast free-text search and navigation around the SNOMED CT hierarchy as well as providing semantic understanding for any concept, allowing client software to answer questions like “does this patient have a type of granulomatous disease?”, “was this patient born in Europe?” or even “is this drug a type of beta-blocker?” . It would answer yes to the first question simply by understanding the diseases that the patient has been listed as having, answering “yes” if a patient had sarcoidosis and “no” if they had multiple sclerosis. Similarly, it would respond with “yes” if a patient was recorded as being born in France but “no” if they were born in Afghanistan.  SNOMED CT provides the logical relationships in order to drive such computerised decision-making.&lt;/p&gt;

&lt;h1 id=&quot;information-models&quot;&gt;Information models&lt;/h1&gt;

&lt;p&gt;Each SNOMED CT concept, description and relationship has a unique and persistent identifier that can be stored in a data store. 
Most clinical applications persist information in a relational database and so a simple implementation may simply store the identifier as a foreign key to the row that represents that entity. However, whilst these terms have meaning when used in isolation (e.g. storing the identifier representing”myocardial infarction”), it is only when these terms are combined together in a logical way as part of a larger data model, that true meaning can be understood. It is analogous to definitions for individual words in a dictionary but true expression results only when these words are combined into sentences and paragraphs. As such, most concepts are only useful when considered within the information model in which it is recorded.&lt;/p&gt;

&lt;p&gt;The information model used in which SNOMED CT concepts are stored is therefore critical to derive understanding from what can be inferred from the recording of a concept. This is particularly important for a terminology such as SNOMED CT in which terms may be recorded together to form a compositional (post-coordinated) term such as “Family history of…” (281666001) and “Obesity” (414916001) or out of convenience represented as a single SNOMED CT term “Family history: Obesity” (160311006).&lt;/p&gt;

&lt;p&gt;If SNOMED CT had not only defined a terminology but also a wider information model then such compound pre-coordinated terms would be unnecessary and the recording of “obesity” within a model defining a family history would be sufficient. However, while compound pre-coordinated terms risk an explosion of terms to cater for multiple combinations, they do make it easier for end-users to find concepts that represent what they are trying to record and support workflows in which clinical terms are recorded in a relatively unstructured information model, such as that used in primary care historically using Read codes. Of course, SNOMED CT was developed as an amalgamation of SNOMED from the College of American Pathologists and Read (Clinical Terms Version 3) codes with the latter recorded prospectively and longitudinally in UK primary care systems in a relatively unstructured format. There are advantages in SNOMED CT being independent from the surrounding data model within which it is transmitted or stored particularly as SNOMED CT terms generally reflect core concepts relating to health, disease and the processes of care. As a result a range of models can be used with SNOMED CT and similarly, different terminologies can be bound to a model such as LOINC\footnote{LOINC is an alternative terminology focused on tests, measurements and observations — see &lt;a href=&quot;https://loinc.org&quot;&gt;LOINC&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I generally recommend a highly structured approach to the storage of SNOMED CT codes in which the information model in which they are stored ensures no uncertainty in interpretation and that to simplify subsequent analysis and retrieval, compound pre-coordinated terms are decomposed into their components are stored appropriately. As such, users may enter information via a highly structured workflow in which the context is evident as part of the user interface such as recording family history or allergies or a less structured workflow in which terms can be entered and decomposed and entered into a more structured information model. Alternatively, an implementation may instead store the codes as entered and deal with ensuring that a diagnostic term recorded in a family history model is equivalent to the compound term.&lt;/p&gt;

&lt;p&gt;To provide evidence to support a highly structured approach, I suggest considering how one might use SNOMED CT to record examination findings. While there is a code for “supranuclear gaze palsy” (420675003) there is no compound code to record that there is an absence of this examination finding. While one could request an addition to SNOMED CT, it is much more appropriate to consider examination findings in two categories, those found and those not found. The recording of a lack of clinical sign is important in clinical practice as well as for medico-legal reasons. As such, the information model in which this clinical finding is recorded is critical in providing understanding. SNOMED CT does allow post-coordinated terms in which multiple terms are combined together to give meaning. One possible way of representing the `lack of’ a clinical finding is to post-coordinate with a negation concept to form a compositional term but I advocate using a robust information model as a simpler method of expressing clinical knowledge particularly when one considers \emph{how} users are expected to record such findings.&lt;/p&gt;

&lt;p&gt;Example information models which can record SNOMED CT terms in context are HL7 and openEHR. OpenEHR uses the term &lt;code class=&quot;highlighter-rouge&quot;&gt;archetype' as a synonym for &lt;/code&gt;information model’. The use of validated and published data structures support subsequent interoperability between disparate systems which can process that model. However, the use of a specific information model does not necessarily force the use of that model as a format in which to store data, but may be used only as a representation of data to be used for interoperability with other systems. Indeed, a focus on a model of any form improves the potential for interoperability because that model is likely to be an abstraction of real-life concepts and thus it becomes possible to map from one information model to another.&lt;/p&gt;

&lt;p&gt;However, even if two information models represent the same real-life concept and they look superficially similar, the process of mapping can introduce ambiguity and potentially even errors, particularly if a data element is present in one model but not in another. In addition, different terminologies may be used with an information model in a process called `terminology binding’ and so simply mandating a particular kind of information model does not guarantee interoperability.&lt;/p&gt;

&lt;h1 id=&quot;hl7&quot;&gt;HL7&lt;/h1&gt;
&lt;p&gt;Health Level Seven (HL7) is an international standards development organisation that publishes standards for healthcare interoperability. For more information, see the &lt;a href=&quot;http://www.hl7.org.uk&quot;&gt;HL7 website&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;HL7 publish a range of interoperability standards including HL7 V2, HL7 V3 and CDA, and the HL7 FHIR.&lt;/p&gt;

&lt;h2 id=&quot;hl7-v2&quot;&gt;HL7 V2&lt;/h2&gt;
&lt;p&gt;HL7 V2 refers to HL7’s currently most used health standard from HL7 first released in 1989 and deployed internationally. See more information &lt;a href=&quot;http://www.hl7.org/implement/standards/product_brief.cfm?product_id=185&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;http://www.hl7.org/about/FAQs/index.cfm?ref=nav&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It is fundamentally a messaging standard and early versions focused on &lt;code class=&quot;highlighter-rouge&quot;&gt;ADT' messages, messaging relating to the admission, discharge and transfer of patients. Such messages are sent as &lt;/code&gt;triggers’ and therefore adopt a `push’ model of health interoperability. HL7 has grown organically and iteratively over many years with an increasing number of message types including those to record clinical observations and laboratory results for example. The latest version is HL7 v2.6 which was approved as an ANSI standard in 2007.&lt;/p&gt;

&lt;h2 id=&quot;hl7-v3-and-the-rim&quot;&gt;HL7 V3 and the RIM&lt;/h2&gt;
&lt;p&gt;HL7 V3 was developed from 1992 to define a Reference Information Model (RIM) describing healthcare-related messages and trigger events relating to those messages. 
The RIM defines an object-orientated model in which types are sub-specialisms of a more generic type. For example, in the same way as bicycles and cars are &lt;em&gt;types&lt;/em&gt; of vehicles, a &lt;code class=&quot;highlighter-rouge&quot;&gt;Person' is a type of a &lt;/code&gt;Living Subject’ but veterinary patients such as dogs and cats are represented as a `Non-person living subject’. As in object-orientated programming languages, specialist models inherit attributes and behaviours from their more generic parent types.&lt;/p&gt;

&lt;p&gt;The three core classes in HL7 RIM are &lt;code class=&quot;highlighter-rouge&quot;&gt;Act', &lt;/code&gt;Entity’ and `Role’:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;An act is a record of something that has or will happen. This will usually include what has been done, to whom, by whom, when, where and how and possibly documenting why.&lt;/li&gt;
  &lt;li&gt;An entity is a living or non-living thing such as a person, animal or organisation.&lt;/li&gt;
  &lt;li&gt;A role represents a skill or competency of an Entity, such as patient, employee, place or organisation.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The HL7 V3 standard is large and complex and many healthcare organisations with an existing infrastructure built using HL7 V2 have been reluctant to adopt the newer standard so HL7 RIM is not used as much as HL7 V2 internationally.&lt;/p&gt;

&lt;h2 id=&quot;hl7-v3-cda&quot;&gt;HL7 V3 CDA&lt;/h2&gt;
&lt;p&gt;The HL7 V3 Clinical Document Architecture (CDA) defines a document-based information model in which components of the HL7 V3 RIM is used as a header together with a document body consisting of a mixture of unstructured and structured data. As I discussed in Section~\ref{model.process}, a document-based architecture is an appropriate abstraction of real-life processes and explicitly ensures that clinical information is recorded together with its context; such a document can stand in isolation and be understood by the reader. When contextual clues are removed, interpretation of structured and unstructured information is potentially hazardous. A document can be immutable once created and document lifecycle and process management including creation, editing and repudiation can be modelled in a straightforward manner.&lt;/p&gt;

&lt;p&gt;There are three CDA levels:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;CDA level one: has a header and human-readable body usually in an unstructured format such as free text or file types such as images or documents (e.g. Adobe PDF).&lt;/li&gt;
  &lt;li&gt;CDA level two: extends level one by including more structured data within the body of the document.&lt;/li&gt;
  &lt;li&gt;CDA level three: allows highly-structured data to be encoded at a high level of granularity.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;With the document paradigm limiting mismatch between model and real-life (Section~\ref{avoiding.mismatches}), adoption of the CDA standard has been widespread internationally. It is the most adopted &lt;a href=&quot;http://www.hl7.org/FHIR/comparison-cda.html&quot;&gt;HL7 V3 standard&lt;/a&gt;.
In addition, the different CDA levels permit flexibility in the recording of unstructured and structured data, easing adoption of the standard. Such an approach permits implementers to use level one of the HL7 CDA to store relatively unstructured documents initially but evolve over time to permit newer applications to store more structured information and yet remain interoperable.&lt;/p&gt;

&lt;h2 id=&quot;fhir&quot;&gt;FHIR&lt;/h2&gt;

&lt;p&gt;FHIR, &lt;a href=&quot;https://www.hl7.org/fhir/summary.html&quot;&gt;Fast Health Interoperability Resources&lt;/a&gt;, is a new framework created by HL7 which uses modern web services over HTTP to create, edit and share modular resources. Importantly, the HL7 FHIR standards are free to use without restriction and focus on data standards and the implementation of those standards within clinical systems.&lt;/p&gt;

&lt;p&gt;The use of FHIR does not mandate that existing and new clinical systems use FHIR standards to define their internal architecture or internal &lt;em&gt;storage&lt;/em&gt; formats, but the use of FHIR can provide an open and standard interface to permit interoperability between different systems created by different vendors. As such, an application or service can provide access to data in an open and extensible format by providing a FHIR server and consume different data as a FHIR client.&lt;/p&gt;

&lt;p&gt;There are a range of FHIR &lt;a href=&quot;http://www.hl7.org/FHIR/implementation.html&quot;&gt;frameworks&lt;/a&gt; including:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Search: within a resource, such as searching for a patient.&lt;/li&gt;
  &lt;li&gt;Operations: on a resource such as fetching an encounter record or processing a message. These are in addition to the standard CREATE, READ, UPDATE and DELETE REST-based interactions.&lt;/li&gt;
  &lt;li&gt;Documents: representing a composition of other resources with a fixed presentation linked to context.&lt;/li&gt;
  &lt;li&gt;Messages: to allow messages to be sent in response to a specific event.&lt;/li&gt;
  &lt;li&gt;Services: to provide a representation of a service-orientated architecture within healthcare. See the &lt;a href=&quot;http://www.hl7.org/FHIR/services.html&quot;&gt;FHIR service documentation&lt;/a&gt; for more information.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There is backwards-compatibility so that FHIR documents can contain HL7 V3 CDA documents. FHIR potentially improves the integration and interoperability between disparate systems. The standard uses open web standards over the HTTP protocol and so development can be straightforward. However, FHIR is still under active development at the time of writing and the current release is designated as a “draft standard for trial use”. As such, future versions of FHIR may result in non-compatible future changes.&lt;/p&gt;

&lt;h1 id=&quot;openehr&quot;&gt;openEHR&lt;/h1&gt;

&lt;p&gt;openEHR is an open standard for the recording of health-related data maintained by the &lt;a href=&quot;http://openehr.org&quot;&gt;OpenEHR foundation&lt;/a&gt;. It defines a multi-level information model in which the core model (the &lt;code class=&quot;highlighter-rouge&quot;&gt;reference model') does *not* include clinical information but focuses on core generic abstractions and process. \emph{Archetypes} represent the clinical information model, with models created, edited and curated as part of a &lt;/code&gt;clinical knowledge manager’ (CKM). This multi-level modelling approach means that health professionals can undertake clinical modelling independent of the underlying implementation. In addition, small and re-usable domain models can be aggregated into a &lt;code class=&quot;highlighter-rouge&quot;&gt;template'. For example, if a domain model contains &lt;/code&gt;blood pressure’ and &lt;code class=&quot;highlighter-rouge&quot;&gt;heart rate' then this model can be incorporated within a larger &lt;/code&gt;template’ representing an emergency unit admission. An overview is available &lt;a href=&quot;http://www.openehr.org/releases/AM/latest/docs/Overview/Overview.html&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In addition, there is a new openEHR REST-based application programming interface (API) which proposes to define standards to which an openEHR implementation should adhere. However, the development of these standards is still in development and has not yet been finalised.&lt;/p&gt;

&lt;h1 id=&quot;loinc&quot;&gt;LOINC&lt;/h1&gt;
&lt;p&gt;LOINC is a freely available international standard for tests, measurements and observations. The official website is &lt;a href=&quot;https://loinc.org&quot;&gt;https://loinc.org&lt;/a&gt;.&lt;br /&gt;
Although limited in scope, it has been adopted by HL7 as the standard code system for laboratory results. In addition, there is a project to map LOINC codes to SNOMED-CT and vice versa.&lt;/p&gt;</content><author><name></name></author><summary type="html">A terminology is a body of terms used within a particular subject of study or profession. A classification is a systematic organisation of things into classes. A classification system such as ICD-10 cannot be used as a terminology and many terminologies cannot be easily used as a classification system. This is an important distinction and relates to the how those data are primarily used.</summary></entry><entry><title type="html">Clinical information system design: 2. Clinical modelling</title><link href="https://www.wardle.org/cis-design/2017/05/02/clinical-modelling.html" rel="alternate" type="text/html" title="Clinical information system design: 2. Clinical modelling" /><published>2017-05-02T12:06:00+01:00</published><updated>2017-05-02T12:06:00+01:00</updated><id>https://www.wardle.org/cis-design/2017/05/02/clinical-modelling</id><content type="html" xml:base="https://www.wardle.org/cis-design/2017/05/02/clinical-modelling.html">&lt;p&gt;A model is an abstraction of the real-world distilling knowledge into core concepts and processes. A model is a careful balance between complexity and over-simplification with models that are too complex providing brittle abstractions which are poorly generalisable and models that are too simple not supporting all of the demands placed upon it in real-life clinical scenarios.&lt;/p&gt;

&lt;p&gt;Modelling is an art but the approach can be made more systematic if modellers work iteratively within a supporting organisational environment with clinical and technical staff working together in  logical teams. Importantly, the scope of their model should be limited; large enough to solve the domain problems but small enough to result in a practical implementation. As such, it is important to have an appropriate separation of concerns in which teams can work independently of other teams as much as possible and that interfaces between that team and others are formalised on a contractual basis.&lt;/p&gt;

&lt;h1 id=&quot;high-level-functional-requirements&quot;&gt;High-level functional requirements}&lt;/h1&gt;

&lt;p&gt;Clinical modelling is dependent on knowledge of the domain and the functional requirements to which the model will serve. It is useful to abstract these requirements to make them as generally-applicable as possible and not to generate needlessly specific requirements with limited applicability. However, the process of generated functional requirements and a subsequent data and process modelling is not a one-way process but must be an iterative two-way development in which there is feedback and discussion among all stakeholders and between all steps of requirements-gathering, modelling and implementation.&lt;/p&gt;

&lt;h1 id=&quot;the-process-of-developing-a-clinical-model&quot;&gt;The process of developing a clinical model&lt;/h1&gt;
&lt;p&gt;I suggest dividing clinical modelling into three related steps:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Modelling data within a medical record&lt;/li&gt;
  &lt;li&gt;Modelling processes and workflow relating to a medical record&lt;/li&gt;
  &lt;li&gt;Implementation of a clinical model into a workable and practical solution.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;These three steps should be considered separately but are dependent on one another and inherently depend on the functional requirements. In designing clinical information systems, a data model may change infrequently or a design may even be correct in perpetuity; a systolic blood pressure recorded using a cuff on the right arm of an individual will always be a systolic blood pressure recorded using a cuff on the right arm of an individual. However, a model of the processes of care will likely change more frequently as a result of changes in working practices and service design, and an implementation may change even more frequently as a result of new technologies and devices.&lt;/p&gt;

&lt;p&gt;As each step is dependent on each other, modelling must be an iterative work with feedback loops between all steps rather than performed in sequence by different members of the team. An implementation cannot be designed without consideration of the data structures and processes that leverage the data within those structures and a model cannot be designed unless it is practical and efficient to perform an implementation. It also follows that clinical modelling must be performed by a team of individuals with a range of skills including those with important domain knowledge such as health professionals as well as those responsible for the design and implementation of the resulting software such as technical architects and software developers.&lt;/p&gt;

&lt;p&gt;Traditional waterfall-based design methods emphasise a sequential process involving business analysis and scoping, design, implementation, verification and then subsequent maintenance. Indeed, such methods are commonly used within NHS Wales with a focus on producing a product to solve a particular problem which then becomes “complete” and enters “maintenance”. I strongly believe that this approach is wrong and instead development should by underpinned by a robust model developed iteratively considering both workflow and implementation together with an understanding that any solutions will never be complete.&lt;/p&gt;

&lt;h2 id=&quot;modelling-the-medical-record&quot;&gt;Modelling the medical record&lt;/h2&gt;

&lt;p&gt;The breadth of knowledge within the medical record is potentially daunting with multiple types of data recorded in many different contexts and for many different purposes. Such data will need to be shown to users in order for them to make sense of a patient’s condition or clinical course, but also used to monitor a clinical service by providing real-time data on patient flow and progression along one of many clinical pathways.&lt;/p&gt;

&lt;p&gt;I advocate a clinical record in which much information is stored in a highly structured format. Some free-text is necessary but where possible, clinical information should be recorded using a standardised terminology such as SNOMED CT held within larger data structures representing the clinical model.&lt;/p&gt;

&lt;p&gt;Advances in technology such as new interventions, evolving diagnoses, new diagnostic tests and changing processes result in an ever-expanding knowledge base to which software systems must evolve and adapt. As such, no software system designed to model the medical record will ever be complete and as such, designing for incremental change in the medium and long-term is a pre-requisite. If real-world knowledge is ever-changing, then models too must constantly be refined and evolved. As such, the design and subsequent constant refinement and evolution of any model underpinning a complex clinical information system must be supported by an appropriate organisational structure which facilitates an iterative development approach. Such iterative development requires domain experts such as clinicians work closely in teams with developers to constantly refine their own understanding, focus the analysis of requirements and distil what they know to the core essentials that must underpin the design of any subsequent information system.&lt;/p&gt;

&lt;h3 id=&quot;electronic-medical-records-and-the-importance-of-context-and-provenance&quot;&gt;Electronic medical records and the importance of context and provenance.&lt;/h3&gt;
&lt;p&gt;An advantage of electronic records is that such records can be made universally available wherever they are needed such as when a patient presents to an emergency health facility or a new outpatient clinic or when the patient contacts a team via email or telephone. A disadvantage of electronic records is the need for real-time curation of patient records so that users are not overwhelmed by excessive information that is not relevant in their specific clinical context. It is therefore vital that any model supports not only the recording of information but the context and provenance in which those data were recorded and that views of aggregated information for a single patient take into account such contextual cues to ensure users see the information that is required and optionally filters information.&lt;/p&gt;

&lt;p&gt;Such issues also arise in paper records, particularly when a single patient has multiple volumes of notes. However, as paper records serve a single organisation end-users may find important information related to their own service  based on filing standards, paper colour, logos, page layout and the names of colleagues and can flick through the physical record more easily than a poorly curated and unstructured digital counterpart. However, paper records fail for patients looked after by multiple organisations, in which clinical correspondence from an outpatient clinic in one facility will usually not be available in another unless manual action by end-users is taken.&lt;/p&gt;

&lt;h2 id=&quot;modelling-the-processes-involving-medical-records&quot;&gt;Modelling the processes involving medical records.&lt;/h2&gt;

&lt;p&gt;Medical records are more than a simply narrative of what has happened to a patient listed in sequential order. A number of important processes and workflows exist that relate to the sending and receiving of paper-based forms that must be considered in any abstraction of medical enterprise. Paper records such as printed correspondence, request forms, results of investigations are sent to a responsible individual in order for them to be read and acted upon. On some occasions, such documentation is annotated, forming a narrative of the actions undertaken by the end-user or forwarded to another, forming a chain of correspondence. Electronic systems are potentially safer offering guarantees of sending and receiving such requests, providing full audit trail functionality and non-repudiation of comments and action. However, any process relating to a medical record must be modelled with as much care as the modelling of data structures.&lt;/p&gt;

&lt;p&gt;Most data standards relating to healthcare, such as HL7, openEHR, and FHIR, model the data relating to healthcare and not the processes and workflow that reflect the care of patients itself. While modelling data is an important pre-requisite in the conception and design of clinical information systems, modelling the processes and workflow that relate to that model is firstly an important test that data modelling is fit-for-purpose and secondly, critical itself in ensuring a resulting clinical information system will be a workable and valuable asset in providing healthcare services.&lt;/p&gt;

&lt;p&gt;Process and workflow will change frequently as clinical services evolve and develop and any model must take such changes into account so that any subsequent implementation can flexibly handle different workflows. Abstracting workflow is the most appropriate method to future-proof any clinical system and modellers must then consider how to model the configuration of more abstract workflows into a concrete implementation at runtime.&lt;/p&gt;

&lt;p&gt;In most clinical services, data and processes currently revolve around the completion and processing of clinical documents which are subsequently filed as part of a longitudinal prospective and immutable medical record. As such, a transactional document model is usually an appropriate reasonable and accurate abstraction of current processes of care.&lt;/p&gt;

&lt;h2 id=&quot;modelling-and-implementation&quot;&gt;Modelling and implementation&lt;/h2&gt;

&lt;p&gt;Tying a clinical model to its implementation is critical. A model cannot be designed without consideration of its implementation as it is possible to develop models of data and processes that would be impractical, cumbersome or inefficient to implement by developers. As such, close working between domain experts and software engineers is necessary to iteratively explore and improve a model to ensure it meets the demands of the domain and of practical software engineering considerations.&lt;/p&gt;

&lt;h3 id=&quot;avoiding-mismatches-between-a-model-and-real-life&quot;&gt;Avoiding mismatches between a model and real-life.&lt;/h3&gt;

&lt;p&gt;A mismatch between the model and real-life processes may cause confusion for users while models that are based on the fundamentals of a particular domain result in clinical systems that are intuitive to use with readily predictable functionality. A model should therefore abstract real-life processes and structures when possible so that end-users can easily understand what is happening within the software they are using and should not be surprised by unintended consequences. However, modelling real-life processes should not be an exact replica of an existing paper-based process but a careful abstraction designed to capture the essence of the process and to be more widely generalisable.&lt;/p&gt;

&lt;p&gt;While organisations, directorates, specialties, teams and even individual clinicians will have their own ways of working with disease and specialty specific data requirements, there is a danger in thinking that data modelling is simply getting a single group of domain experts in a room with a white-board. Instead, such work  is simply the start of a process in which these requirements are analysed and distilled and subsequently made as generic and widely applicable as possible and yet not made so generic that a subsequently developed model no longer meets the needs of the original functional requirements.&lt;/p&gt;</content><author><name></name></author><summary type="html">A model is an abstraction of the real-world distilling knowledge into core concepts and processes. A model is a careful balance between complexity and over-simplification with models that are too complex providing brittle abstractions which are poorly generalisable and models that are too simple not supporting all of the demands placed upon it in real-life clinical scenarios.</summary></entry><entry><title type="html">Clinical information system design: 1. The medical record</title><link href="https://www.wardle.org/cis-design/2017/05/01/medical-record.html" rel="alternate" type="text/html" title="Clinical information system design: 1. The medical record" /><published>2017-05-01T15:06:00+01:00</published><updated>2017-05-01T15:06:00+01:00</updated><id>https://www.wardle.org/cis-design/2017/05/01/medical-record</id><content type="html" xml:base="https://www.wardle.org/cis-design/2017/05/01/medical-record.html">&lt;blockquote&gt;
  &lt;p&gt;“You’re a victim of it or a triumph because of it. The human mind simply cannot carry all the information without error so the record becomes part of your practice.”&lt;/p&gt;

  &lt;p&gt;Dr Larry Weed, Internal Medicine Grand Rounds, 1971&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The medical record encompasses and complex, disparate and evolving collection of information relating to the day-to-day care of an individual patient. Aggregated, such data provide valuable information about cohorts of patients managed by a clinical service supporting clinical governance and the management of the that service.&lt;/p&gt;

&lt;h1 id=&quot;paper-medical-records&quot;&gt;Paper medical records&lt;/h1&gt;

&lt;p&gt;Paper medical records are expensive, poorly accessible and do not support team working effectively. They are frequently poorly structured and while they contain large amounts of data, it is difficult to use those data to support clinical care. Paper records must be tracked and within a large organisation and such records need to be made available to clinical and administrative staff in order to appropriately manage the patient. This is particularly difficult when a single patient may be under the care of multiple services which is particularly common for patients with chronic long-term health conditions.&lt;/p&gt;

&lt;h1 id=&quot;clinical-governance&quot;&gt;Clinical governance&lt;/h1&gt;
&lt;blockquote&gt;
  &lt;p&gt;``If you can’t audit a thing for quality, it means you do not have the means to produce quality’’.&lt;/p&gt;

  &lt;p&gt;Dr Larry Weed, Internal Medicine Grand Rounds, 1971&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Clinical governance is a framework in which we are accountable for continuously improving the quality of our services safeguarding high standards of care by creating an environment in which excellence in clinical care can flourish.&lt;/p&gt;

&lt;p&gt;An important part of clinical governance is in the use of data to understand both process and outcomes. A typical clinical department will know how many patients are waiting for an outpatient appointment but will not be able to understand why they are waiting or understand a patient’s eventual outcome because usually only administrative data are collected systematically.&lt;/p&gt;

&lt;p&gt;Many clinical teams will undertake service improvement projects or clinical audits, in which a clinician identifies a problem, undertakes to measure that problem by clinical audit, analyses the results and makes an intervention in order to solve that problem. For example, a typical clinical audit might be in the assessment of risk of deep vein thrombosis in inpatients in which a doctor will systematically analyse the paper notes of a group of inpatients, record and present the results and enact a change to improve those results with a plan to re-audit after that intervention. Such a methodology has been formalised by the &lt;a href=&quot;https://www.isixsigma.com/dictionary/dmaic/&quot;&gt;Six Sigma quality initiative&lt;/a&gt; in which five steps form a virtuous cycle of continuous improvement:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/cis_design/dmaic.png&quot; alt=&quot;Dmaic&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Such continuous improvement is possible with paper records, but it cannot be performed systematically and routinely, requires a large amount of manual intervention and the cycle of improvement is slow; the analysis of results and a plan of action to effect improvement may take months with no guarantees that any systematic assessment of those interventions will be performed.&lt;/p&gt;

&lt;p&gt;It therefore follows that the routine and systematic collection of process and clinical outcome data offers the potential to radically improve the efficiency of the continuous improvement lifecycle as long as sufficient consideration is given to the use of such data, the context of those data and an understanding of the processes in which those data are involved.&lt;/p&gt;

&lt;h1 id=&quot;electronic-medical-records&quot;&gt;Electronic medical records&lt;/h1&gt;

&lt;p&gt;Electronic medical records and workflow should model and abstract real-life processes but digitisation of paper processes should not be a slavish exact copy of existing processes, particularly when technology offers opportunities to improve the process of healthcare.&lt;/p&gt;

&lt;p&gt;Indeed, we are facing an explosion of clinical data created by health professionals, administrators and patients themselves and clinical information systems must consider how they will integrate and make such data useful in clinical practice. For example, this figure:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/cis_design/data_pipelines.png&quot; alt=&quot;Data Pipelines&quot; /&gt;&lt;/p&gt;

&lt;p&gt;shows how all of these sources of data are mutually dependent on one another. For example, what is the point in recording patient reported outcome measures if that data cannot be safely linked to a particular intervention or procedure and the co-morbidities and baseline assessments for that patient?&lt;/p&gt;

&lt;p&gt;The logical conclusion is that we will always have a multiplicity of systems and that in order to create robust clinical systems that outlive our current level of technological advancements, we have a responsibility to insist on open well-documented data standards, to integrate a well-developed clinical terminology, and foster collaboration, iterative development and embrace interoperability.&lt;/p&gt;</content><author><name></name></author><summary type="html">“You’re a victim of it or a triumph because of it. The human mind simply cannot carry all the information without error so the record becomes part of your practice.” Dr Larry Weed, Internal Medicine Grand Rounds, 1971</summary></entry><entry><title type="html">NHS hack days</title><link href="https://www.wardle.org/clinical-informatics/2017/05/01/nhs-hack-days.html" rel="alternate" type="text/html" title="NHS hack days" /><published>2017-05-01T08:57:36+01:00</published><updated>2017-05-01T08:57:36+01:00</updated><id>https://www.wardle.org/clinical-informatics/2017/05/01/nhs-hack-days</id><content type="html" xml:base="https://www.wardle.org/clinical-informatics/2017/05/01/nhs-hack-days.html">&lt;p&gt;NHS hack days are weekends in which clinicians and software developers come together to try to develop information technology solutions for healthcare.&lt;/p&gt;

&lt;p&gt;There is a really good piece about them in the &lt;a href=&quot;http://www.bcs.org/content/conWebDoc/57646?utm_campaign=8245638_Health%20and%20care%20newsletter&amp;amp;utm_medium=email&amp;amp;utm_source=BCS%2C%20The%20Chartered%20Institute%20for%20IT&quot;&gt;BCS magazine by Dr Marcus Baw&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think they are a great idea and have attended two in Cardiff, most recently as one of the judges.&lt;/p&gt;

&lt;p&gt;However, I perceive the benefits to be principally about networking and fun, rather than successfully creating early working versions of products that are then rolled out into the NHS. How many great ideas have been rolled out?&lt;/p&gt;

&lt;p&gt;One of the problems is that projects essentially &lt;a href=&quot;http://nhshackday.com/resources/judging/&quot;&gt;start from nothing&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id=&quot;an-open-platform&quot;&gt;An open platform&lt;/h4&gt;

&lt;p&gt;What would happen if, instead of starting with nothing, we provided teams with an open application programming interface (API) containing data, services and logic on which their solutions can run?&lt;/p&gt;

&lt;p&gt;This is the year in which this can truly become a reality, with standards such as FHIR and openEHR becoming adopted, we as a community need to start work on building “mocked services”.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/hackday/hackday-schematic.png&quot; alt=&quot;Hackday Schematic&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Most of these services should be provided via FHIR endpoints and provide mock data. When it comes to running in a live environment, as long as there is a FHIR service that provides those same endpoints, an application will need less work in order to make it a production-ready application.&lt;/p&gt;

&lt;h4 id=&quot;what-needs-to-be-done&quot;&gt;What needs to be done?&lt;/h4&gt;

&lt;p&gt;The diagram above is deliberately simple. There are lots of complexities and lots of work to do, but it is achievable.&lt;/p&gt;

&lt;p&gt;The very nice feature of FHIR is that services can provide one or many different resources. One might write a single service that only provides patient demographic service. As such, one can implement functionality piecemeal and incrementally.&lt;/p&gt;

&lt;p&gt;I think we need to prioritise a list of resources and services in order:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Patient demographic service (PDS). We could start with fake data and then switch to using &lt;a href=&quot;https://github.com/nhs-ciao/ciao-pds-fhir&quot;&gt;https://github.com/nhs-ciao/ciao-pds-fhir&lt;/a&gt; for production - the Ciao PDS is a FHIR facade around the real NHS Spine PDS - or a local organisational patient administration system.&lt;/li&gt;
  &lt;li&gt;Terminology services, including SNOMED-CT. I have already built an open-source SNOMED-CT REST service, but it isn’t currently FHIR compatible. However, the last time I looked the FHIR terminology standard didn’t support free-text search. I’d like to add support for other terminologies, such as LOINC, and provide FHIR-compatible end-points.&lt;/li&gt;
  &lt;li&gt;Laboratory information management system. See &lt;a href=&quot;https://www.hl7.org/fhir/diagnosticreport.html&quot;&gt;FHIR diagnostic report resource&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;A UK NHS reference data service. This should be straightforward so that we take the &lt;a href=&quot;https://isd.digital.nhs.uk/trud3/user/guest/group/0/home&quot;&gt;NHS ODS data from TRUD&lt;/a&gt; and provide as FHIR end-points (e.g. see &lt;a href=&quot;https://www.hl7.org/fhir/organization.html&quot;&gt;organisations&lt;/a&gt;). In Wales, mapping practitioners is much easier as there is a central active directory, but I gather this might not be the case in England.&lt;/li&gt;
  &lt;li&gt;Document storage and retrieval. While the &lt;a href=&quot;https://www.hl7.org/fhir/documents.html&quot;&gt;FHIR standard&lt;/a&gt; explains how to aggregate resources into a document, initially I’d suggest focusing on a simple &lt;a href=&quot;https://www.hl7.org/fhir/documentreference.html&quot;&gt;document reference store&lt;/a&gt; to serve documents created by legacy systems.&lt;/li&gt;
  &lt;li&gt;Patient eFlow / e-observations service. See &lt;a href=&quot;https://www.hl7.org/fhir/observation.html&quot;&gt;observation FHIR resource&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;With these few core components and lots of fake data, NHS hack days could start adding value quickly making it much more likely that any solutions can evolve to become truly useful within the NHS.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">NHS hack days are weekends in which clinicians and software developers come together to try to develop information technology solutions for healthcare.</summary></entry><entry><title type="html">An open source SNOMED-CT implementation</title><link href="https://www.wardle.org/clinical-informatics/2017/04/29/rsterminology-part2.html" rel="alternate" type="text/html" title="An open source SNOMED-CT implementation" /><published>2017-04-29T20:10:02+01:00</published><updated>2017-04-29T20:10:02+01:00</updated><id>https://www.wardle.org/clinical-informatics/2017/04/29/rsterminology-part2</id><content type="html" xml:base="https://www.wardle.org/clinical-informatics/2017/04/29/rsterminology-part2.html">&lt;p&gt;I have released an open-source SNOMED-CT terminology server called rsterminology. The source code is available from &lt;a href=&quot;https://github.com/wardle/rsterminology&quot;&gt;https://github.com/wardle/rsterminology&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It is software that is designed to be used by other software, rather than by end-users. I have shown videos of how I use this in an electronic patient record system in &lt;a href=&quot;/clinical-informatics/2017/04/28/importance-of-cohorts.html&quot;&gt;previous posts&lt;/a&gt;. It runs as a java microservice and is currently deployed within NHS Wales.&lt;/p&gt;

&lt;p&gt;I have installed a working version of this software on a very small virtual machine for demonstration purposes. It is not intended for production use please! I will monitor usage and add throttling or shut down the service if this is misused.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;For clinical users, I have just created (29th April) a quick SNOMED-CT search facility on a web page so that you can enter terms like “MS” or “DM” or “IHD” or “amlodipine” and see how autocomplete can work. The application is available &lt;a href=&quot;https://msdata.org.uk/apps/WebObjects/SnomedBrowser.woa/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Here are some simple examples of how it can be used:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Fetch information about a single concept with a known identifier:
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://msdata.org.uk:8080/snomedct/concepts/24700007&quot;&gt;http://msdata.org.uk:8080/snomedct/concepts/24700007&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://apigee.com/console/others?req=%7B%22resource%22%3A%22msdata.org.uk%3A8080%2Fsnomedct%2Fconcepts%2F24700007%22%2C%22params%22%3A%7B%22query%22%3A%7B%7D%2C%22template%22%3A%7B%7D%2C%22headers%22%3A%7B%7D%2C%22body%22%3A%7B%22attachmentFormat%22%3A%22mime%22%2C%22attachmentContentDisposition%22%3A%22form-data%22%7D%7D%2C%22verb%22%3A%22get%22%7D&quot;&gt;via Apigee console&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;This shows information about multiple sclerosis&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Get the synonyms for a given concept
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://msdata.org.uk:8080/snomedct/concepts/24700007/descriptions&quot;&gt;http://msdata.org.uk:8080/snomedct/concepts/24700007/descriptions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://apigee.com/console/others?req=%7B%22resource%22%3A%22msdata.org.uk%3A8080%2Fsnomedct%2Fconcepts%2F24700007%2Fdescriptions%22%2C%22params%22%3A%7B%22query%22%3A%7B%7D%2C%22template%22%3A%7B%7D%2C%22headers%22%3A%7B%7D%2C%22body%22%3A%7B%22attachmentFormat%22%3A%22mime%22%2C%22attachmentContentDisposition%22%3A%22form-data%22%7D%7D%2C%22verb%22%3A%22get%22%7D&quot;&gt;via Apigee console&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Understand what a concept means, semantically, by virtue of subsumption (the IS-A relationships)
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://msdata.org.uk:8080/snomedct/concepts/24700007/recursiveParents&quot;&gt;http://msdata.org.uk:8080/snomedct/concepts/24700007/recursiveParents&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://apigee.com/console/others?req=%7B%22resource%22%3A%22msdata.org.uk%3A8080%2Fsnomedct%2Fconcepts%2F24700007%2FrecursiveParents%22%2C%22params%22%3A%7B%22query%22%3A%7B%7D%2C%22template%22%3A%7B%7D%2C%22headers%22%3A%7B%7D%2C%22body%22%3A%7B%22attachmentFormat%22%3A%22mime%22%2C%22attachmentContentDisposition%22%3A%22form-data%22%7D%7D%2C%22verb%22%3A%22get%22%7D&quot;&gt;via Apigee console&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;In this example you see that multiple sclerosis is a disease of the nervous system for example.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Perhaps the most powerful feature is free-text searching. You would not usually search the whole of SNOMED-CT but instead limit to particular sub-trees such as diagnoses, procedures, ethnic origins etc.
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://msdata.org.uk:8080/snomedct/search?s=msa&amp;amp;root=64572001&quot;&gt;http://msdata.org.uk:8080/snomedct/search?s=msa&amp;amp;root=64572001&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://apigee.com/console/others?req=%7B%22resource%22%3A%22msdata.org.uk%3A8080%2Fsnomedct%2Fsearch%3Fs%3Dmsa%26root%3D64572001%22%2C%22params%22%3A%7B%22query%22%3A%7B%22parameters_name_0%22%3A%22s%22%2C%22parameters_value_0%22%3A%22msa%22%2C%22parameters_name_1%22%3A%22root%22%2C%22parameters_value_1%22%3A%2264572001%22%7D%2C%22template%22%3A%7B%7D%2C%22headers%22%3A%7B%22headers_name_0%22%3A%22s%22%2C%22headers_value_0%22%3A%22mult%20scler%22%7D%2C%22body%22%3A%7B%22attachmentFormat%22%3A%22mime%22%2C%22attachmentContentDisposition%22%3A%22form-data%22%7D%7D%2C%22verb%22%3A%22get%22%7D&quot;&gt;via Apigee console&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;Here we search for “MSA” but only in the “diagnoses” hierarchy - which has the concept identifier &lt;a href=&quot;http://msdata.org.uk:8080/snomedct/concepts/64572001&quot;&gt;64572001&lt;/a&gt;.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Let’s now let our users choose a country of birth. The root representing these concepts is &lt;a href=&quot;http://msdata.org.uk:8080/snomedct/concepts/370159000&quot;&gt;370159000&lt;/a&gt;.
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://msdata.org.uk:8080/snomedct/search?root=370159000&amp;amp;s=eng&quot;&gt;http://msdata.org.uk:8080/snomedct/search?root=370159000&amp;amp;s=eng&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://apigee.com/console/others?req=%7B%22resource%22%3A%22http%3A%2F%2Fmsdata.org.uk%3A8080%2Fsnomedct%2Fsearch%3Froot%3D370159000%26s%3Deng%22%2C%22params%22%3A%7B%22query%22%3A%7B%22parameters_name_0%22%3A%22root%22%2C%22parameters_value_0%22%3A%22370159000%22%2C%22parameters_name_1%22%3A%22s%22%2C%22parameters_value_1%22%3A%22eng%22%7D%2C%22template%22%3A%7B%7D%2C%22headers%22%3A%7B%22headers_name_0%22%3A%22s%22%2C%22headers_value_0%22%3A%22mult%20scler%22%7D%2C%22body%22%3A%7B%22attachmentFormat%22%3A%22mime%22%2C%22attachmentContentDisposition%22%3A%22form-data%22%7D%7D%2C%22verb%22%3A%22get%22%7D&quot;&gt;via Apigee console&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Finally, let’s parse a medication such as amlodipine 5mg od, which means amlodipine should be taken 5mg per day once daily:
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://msdata.org.uk:8080/snomedct/dmd/parse?s=amlodipine 5mg od&quot;&gt;http://msdata.org.uk:8080/snomedct/dmd/parse?s=amlodipine 5mg od&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://apigee.com/console/others?req=%7B%22resource%22%3A%22msdata.org.uk%3A8080%2Fsnomedct%2Fdmd%2Fparse%3Fs%3Damlodipine%205mg%20od%22%2C%22params%22%3A%7B%22query%22%3A%7B%22parameters_name_0%22%3A%22s%22%2C%22parameters_value_0%22%3A%22amlodipine%205mg%20od%22%7D%2C%22template%22%3A%7B%7D%2C%22headers%22%3A%7B%22headers_name_0%22%3A%22s%22%2C%22headers_value_0%22%3A%22mult%20scler%22%7D%2C%22body%22%3A%7B%22attachmentFormat%22%3A%22mime%22%2C%22attachmentContentDisposition%22%3A%22form-data%22%7D%7D%2C%22verb%22%3A%22get%22%7D&quot;&gt;via Apigee console&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">I have released an open-source SNOMED-CT terminology server called rsterminology. The source code is available from https://github.com/wardle/rsterminology.</summary></entry><entry><title type="html">The importance of cohorts… and SNOMED-CT</title><link href="https://www.wardle.org/clinical-informatics/2017/04/28/importance-of-cohorts.html" rel="alternate" type="text/html" title="The importance of cohorts... and SNOMED-CT" /><published>2017-04-28T14:42:42+01:00</published><updated>2017-04-28T14:42:42+01:00</updated><id>https://www.wardle.org/clinical-informatics/2017/04/28/importance-of-cohorts</id><content type="html" xml:base="https://www.wardle.org/clinical-informatics/2017/04/28/importance-of-cohorts.html">&lt;blockquote&gt;
  &lt;p&gt;A cohort is a group of patients who share a defining characteristic.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In clinical research, researchers recruit a group of patients with a specific disease or a specific problem or who have received a specific intervention and then might monitor their progress in an observational study or monitor the effect on an intervention in an interventional study.&lt;/p&gt;

&lt;p&gt;In such studies, there is a systematic and dedicated collection of research data, usually to a high-standard using a pre-prepared schedule to avoid bias and to ensure that the appropriate data are acquired.&lt;/p&gt;

&lt;p&gt;One would think that it would be the same in routine healthcare but it is not. Most information is recorded as unstructured free-text and data collected are primarily used for administrative and managerial purposes. As I wrote in my &lt;a href=&quot;/clinical-informatics/2017/02/03/domain-driven-design.html&quot;&gt;domain-driven clinical design document&lt;/a&gt;, “As a result, we commonly know how many patients are seen in clinic, but have very little information as to why they are being seen or how they fare after  treatment.   Important  questions  such  as  ‘how  many  patients  with  Parkin-son’s disease do we care for?’, ‘what are the outcomes for patients after having a mastectomy?’ or ‘why are we seeing these patients in outpatient clinic?’ cannot be answered.”&lt;/p&gt;

&lt;p&gt;In fact, it is not just understanding and assessing our services and outcomes that require this information, but new technologies such as real-time analytics, algorithmic support and artificial intelligence needs prospectively-captured data recorded at the point–of-care.&lt;/p&gt;

&lt;p&gt;Some might point to “Hospital Episode Statistics” (HES) data as a way of understanding our patients but these data are woefully incomplete and inaccurate, do not usually include outpatient episodes of care with diagnostic entities recorded using a classification system (ICD-10) rather than a clinical terminology.&lt;/p&gt;

&lt;p&gt;The logical answer is to encourage the routine and systematic collection of structured data by clinicians for clinicians.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/Cppjedy-hMo&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h1 id=&quot;snomed-ct&quot;&gt;SNOMED-CT&lt;/h1&gt;

&lt;p&gt;SNOMED-CT is a large, modern and comprehensive terminology. In the above video, you can see me entering clinical diagnostic terms quickly and having them mapped to SNOMED-CT concepts in real-time. These concepts exist within a large and complex hierarchy of relationships which give algorithmic understanding. I use this in an electronic patient record system to identify patients with motor neurone disease; it will identify patients coded with a diagnosis of “progressive bulbar palsy” but the SNOMED-CT hierarchy can be navigated to work out algorithmically that this is a type of motor neurone disease.&lt;/p&gt;

&lt;p&gt;I have explained more about SNOMED-CT in Section 4.1 of my &lt;a href=&quot;https://www.dropbox.com/s/62sg71a19voxpts/cis_design.pdf?dl=0&quot;&gt;domain-driven clinical design document&lt;/a&gt; and I have a paper in print in the &lt;a href=&quot;http://futurehospital.rcpjournal.org/content/current&quot;&gt;Future Hospital Journal&lt;/a&gt; which should be published in the next issue.&lt;/p&gt;

&lt;p&gt;SNOMED-CT isn’t limited to diagnostic concepts but includes terms for all range of concepts such as countries of birth, ethnic origins, procedures, medications, devices and even occupations. In addition, there are cross-maps which facilitate the mapping of a concept to and from other classification and terminology systems such as ICD-10 and OPCS.&lt;/p&gt;

&lt;p&gt;Here is an example of entering SNOMED-CT terms for medications:&lt;/p&gt;
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/6mvUThwm0j8&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;the-importance-of-implementation&quot;&gt;The importance of implementation&lt;/h3&gt;

&lt;p&gt;I have not been able to identify a working SNOMED-CT implementation in the UK before 2009, which means that, as far as I know, I actually had the first working system in clinical practice in the UK deployed in October 2009.&lt;/p&gt;

&lt;p&gt;I think there are five main issues when it comes to implementing SNOMED-CT:&lt;/p&gt;

&lt;h4 id=&quot;1-you-need-to-make-it-fast&quot;&gt;1. You need to make it fast.&lt;/h4&gt;

&lt;p&gt;If you have a look at the &lt;a href=&quot;http://browser.ihtsdotools.org/&quot;&gt;SNOMED International provided browser&lt;/a&gt;, you can navigate the SNOMED-CT hierarchy and get a feel for how it is structured. However, you will notice that search is very slow. While its size makes it comprehensive, it is technically challenging to implement in an effective way. It is possible to do so however as you can see from the screen recordings above.&lt;/p&gt;

&lt;h4 id=&quot;2-terminology-shouldnt-be-a-bolt-in-but-the-lingua-franca-in-your-data-models-and-your-software&quot;&gt;2. Terminology shouldn’t be a bolt-in, but the lingua franca in your data models and your software.&lt;/h4&gt;

&lt;p&gt;SNOMED-CT data entry does not need to only occur by allowing your users to search for a specific term. In my homegrown EPR, choosing locations on the face when recording botulinum toxin injections enters SNOMED-CT terms behind the scenes at the data level.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/patientcare-botox.jpg&quot; alt=&quot;Patientcare Botox&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;3-its-not-just-about-data-entry&quot;&gt;3. It’s not just about data entry.&lt;/h4&gt;

&lt;p&gt;If your terminology system is a bolt-on, then it is difficult to do anything clever with the data in real-time in order to support clinical care. If however you use SNOMED-CT to enable real-time analytics, then you can switch functionality on and off depending on clinical context. Here we analyse the patient record to generate a motor neurone disease summary and look for records of gastrostomy insertion simply by querying the patient’s data leveraging the semantic understanding that SNOMED-CT provides. &lt;img src=&quot;/images/mnd-dashboard.png&quot; alt=&quot;Mnd Dashboard&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;4-dont-start-thinking-about-subsets&quot;&gt;4. Don’t start thinking about subsets&lt;/h4&gt;

&lt;p&gt;There have been many working groups set up by different specialties to try to organise and curate subsets, limited lists of concepts from within SNOMED-CT and I strongly believe that this work is a waste of time.&lt;/p&gt;

&lt;p&gt;Instead, those people should be focused on improving SNOMED-CT as a whole, reviewing and deprecating concepts and ensuring that the concepts that are found in modern clinical practice are represented adequately.&lt;/p&gt;

&lt;p&gt;I believe that subsets have arisen due to fundamental shortcomings in the implementation of SNOMED-CT and I haven’t found a need that subsumption can’t solve by itself. Subsumption refers to the hierarchy of SNOMED-CT concepts that arises from IS-A relationships in that, “progressive bulbar palsy” IS-A type “motor neurone disease” or “bronchopneumonia” IS-A type of “respiratory disease”.&lt;/p&gt;

&lt;p&gt;Subsumption means that a decent implementation (and mine is one of them - see it at &lt;a href=&quot;https://github.com/mwardle/rsterminology&quot;&gt;https://github.com/wardle/rsterminology&lt;/a&gt;) can use those relationships to limit the choice of users so that they don’t choose “Occupation of physiotherapist” when making a “Referral to physiotherapist” because one is an occupation and one is a type of procedure.&lt;/p&gt;

&lt;h4 id=&quot;5-it-allows-you-to-study-cohorts&quot;&gt;5. It allows you to study cohorts…&lt;/h4&gt;

&lt;p&gt;And finally, the title of the article.&lt;/p&gt;

&lt;p&gt;Once you implement SNOMED-CT, you can start to do clever things like, show me how the patient in front of me is doing compared to all of my patients with this disease. You can see this for multiple sclerosis here, but it is possible to do for other disorders as well.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/edss-graph.jpg&quot; alt=&quot;Edss Graph&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In fact, we can now do the same but sub-stratify to show how you compare to patients with a disease onset at a similar time of life or of the same gender.&lt;/p&gt;

&lt;p&gt;Defining cohorts means defining the characteristics of our patients, and SNOMED-CT is the solution. We can then stratify our patient groups according to those characteristics, whether it be their medical diagnoses, the procedures to which they have been through, their treatments current and past or any other characteristic.&lt;/p&gt;

&lt;p&gt;How can we make sense of patient reported outcome measures without understanding and stratifying our patients?&lt;/p&gt;

&lt;p&gt;Importantly, it doesn’t matter if someone has coded a diagnosis as a highly specific diagnosis as one can map this to a more generic high-level diagnosis and then use that perform aggregated analysis. So for example, if a clinician enters a very specific sub-type of “bronchiolitis”, then it doesn’t matter as we can subsequently aggregate using a higher-level concept and still identify the patient.&lt;/p&gt;

&lt;p&gt;Finally, how can we implement algorithmic analysis and artificial intelligence without an understand of these characteristics? Assessment of, for example, deteriorating renal function is critical on knowledge of recent diagnoses and medications given, and structured data is vital in supporting the research required in applying artificial intelligence in healthcare. The routine and systematic collection of SNOMED-CT forms a critical part of the foundation of any programme to implement such systems.&lt;/p&gt;</content><author><name></name></author><summary type="html">A cohort is a group of patients who share a defining characteristic.</summary></entry><entry><title type="html">Secure messaging… with patients in control of their data</title><link href="https://www.wardle.org/information-governance/2017/04/23/secure-messaging.html" rel="alternate" type="text/html" title="Secure messaging... with patients in control of their data" /><published>2017-04-23T09:20:28+01:00</published><updated>2017-04-23T09:20:28+01:00</updated><id>https://www.wardle.org/information-governance/2017/04/23/secure-messaging</id><content type="html" xml:base="https://www.wardle.org/information-governance/2017/04/23/secure-messaging.html">&lt;p&gt;Don’t we all want clinical information systems that support both clinicians and patients with clinical care?&lt;/p&gt;

&lt;p&gt;However, storing and using information relating to patients, whether for direct clinical care, audit and service evaluations or the secondary use of data is potentially fraught with difficulty. There are many examples such as the furore surrounding the &lt;a href=&quot;https://www.england.nhs.uk/ourwork/tsd/care-data/&quot;&gt;care.data&lt;/a&gt; NHS England project or the &lt;a href=&quot;https://www.digitalhealth.net/2017/03/ttp-gps-should-continue-patient-data-sharing/&quot;&gt;TPP SystmOne debacle&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As I have &lt;a href=&quot;/clinical-informatics/2017/03/09/google-information.html&quot;&gt;mentioned before&lt;/a&gt;, “a single misstep in either the use of data, the perceived use of data or lack of clarity surrounding either has the potential to close down any programme, however innovative.”&lt;/p&gt;

&lt;h4 id=&quot;how-then-can-we-build-systems-that-are-open-and-transparent-and-yet-secure-by-design&quot;&gt;How then can we build systems that are open and transparent and yet secure-by-design?&lt;/h4&gt;

&lt;p&gt;For many, these goals are mutually exclusive. There are many proprietary, closed systems adopting &lt;em&gt;security-by-obscurity&lt;/em&gt; with data locked away  inaccessible to third parties and low levels of interoperability. Opening up access to such systems is, by definition, something that reduces security and potentially allows important personal patient-identifiable information to be accessed inappropriately.&lt;/p&gt;

&lt;h4 id=&quot;how-do-you-give-secure-and-safe-control-of-data-to-patients&quot;&gt;How do you give secure and safe control of data to patients?&lt;/h4&gt;

&lt;p&gt;I would argue that more harm comes to patients for lack of sharing of information than excessive sharing. So many of my patients are surprised that I have not and cannot see the results of investigations and clinical opinions from other centres. Others are surprised to know that that most of us have no automatic systems to let us know about results, relying instead on crude manual systems and the receipt of a report in order to act. Such processes are prone to error; what happens if I do not receive a written report for a scan?&lt;/p&gt;

&lt;p&gt;As I have written before, we need systems that allow medicine to &lt;a href=&quot;/information-governance/2017/03/19/information-governance.html&quot;&gt;run on rails&lt;/a&gt;. Therefore, we need to open-up data access but in a verifiably safe, transparent and secure way.&lt;/p&gt;

&lt;p&gt;The solution is to put the patient at the centre of what we do and to give them control over the use of their data.&lt;/p&gt;

&lt;p&gt;The challenge then becomes how to allow patients to either opt-in or opt-out of the use of their data for different purposes in an open way as well as view for themselves how their data is used. We need systems that record patient consent and log access to data.&lt;/p&gt;

&lt;h4 id=&quot;the-danger-of-information-leakage&quot;&gt;The danger of information leakage&lt;/h4&gt;

&lt;p&gt;It is quite straightforward to create electronic systems that record a patient’s preferences and choices in a database.&lt;/p&gt;

&lt;p&gt;For example, Mr Smith might record his interest in research generally and specifically sign up for projects relating to diabetes mellitus and HIV. However, such a naive implementation would result in &lt;em&gt;information leakage&lt;/em&gt; from this metadata. We might encrypt the database, secure the server and yet still be at risk of disclosing private medical information inadvertently as a result of how different pieces of data are linked.&lt;/p&gt;

&lt;h4 id=&quot;secure-messaging&quot;&gt;Secure messaging&lt;/h4&gt;

&lt;p&gt;Similar issues arise in secure patient messaging. My patients and their advocates want to be able to contact their healthcare teams electronically. The success of my existing &lt;a href=&quot;/clinical-informatics/2017/03/13/communication-is-key.html&quot;&gt;EPR messaging solution&lt;/a&gt; is evidence that my other clinical colleagues want ways of communicating among themselves but ensure that such messages become part of the wider health record.&lt;/p&gt;

&lt;p&gt;We receive emails frequently from patients and relatives, and yet these communications are not stored as part of the health record, are not easily shared with other members of the healthcare team and are inherently insecure. Providing systems to allow secure messaging between patients and their clinical services should be an easy-win for making our services more responsive to patients.&lt;/p&gt;

&lt;p&gt;However, I have previously put off adding patient access and secure messaging to my &lt;a href=&quot;https://msdata.org.uk&quot;&gt;internet hosted EPR portal&lt;/a&gt; as I simply do not want to risk the inadvertent leak of patient information, either through accidental or malicious means. It is not difficult to envisage a system much like we have for online banking in which messages are sent and received through their dedicated website or application but what if it got hacked?&lt;/p&gt;

&lt;p&gt;We can solve some of these issues with encryption but messaging and other forms of communication are also subject to &lt;em&gt;information leakage&lt;/em&gt; as a result of the metadata relating to those communications. The security services don’t necessarily need to know what messages contain to make important inferences about the relationships between people; they know the sender and the recipient.&lt;/p&gt;

&lt;p&gt;For example if a patient emails hiv-helpdesk@nhs.net then information leakage is taking place.&lt;/p&gt;

&lt;h4 id=&quot;openconsent&quot;&gt;openconsent&lt;/h4&gt;

&lt;p&gt;I’ve been working on a small proof-of-concept application that demonstrates a way of connecting patients and services without leaking information about those relationships. It is called &lt;a href=&quot;https://github.com/wardle/openconsent&quot;&gt;openconsent&lt;/a&gt; and the source code is available on &lt;a href=&quot;https://github.com/wardle/openconsent&quot;&gt;github&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The following schematic shows the model:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/openconsent/openconsent-plan-updated.png&quot; alt=&quot;Openconsent Model Updated&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This looks complicated, but it really isn’t. The blue boxes show completed functionality within the proof-of-concept project with greyed out boxes showing work that is yet to be done.&lt;/p&gt;

&lt;p&gt;More technical information can be found in my previous two blog posts &lt;a href=&quot;/information-governance/2017/04/05/pseudonymous-consent-poc.html&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;/information-governance/2017/04/08/pseudonymous-consent.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The answer comes down to using &lt;a href=&quot;/information-governance/2017/03/19/information-governance.html&quot;&gt;pseudonymous identifiers&lt;/a&gt; to create one-way links between different types of data. This results in a system the prevents data linkage unless you already know the patient details and have permission to access data. The technical underpinnings are described in my other posts so I won’t duplicate that discussion here.&lt;/p&gt;

&lt;p&gt;The same technology can be used to implement secure messaging. Messages sent between different people and organisations suffer from the same &lt;em&gt;information leakage&lt;/em&gt; problem as a result of the metadata required to send that message, even if the content of the message is encrypted.&lt;/p&gt;

&lt;p&gt;I am now working on adding secure message functionality using public-key cryptography to encrypt the content of messages and one-way pseudonymous identifiers to encrypt the metadata relating to those messages in a similar way to the obfuscation of opt-in and opt-out preferences within the consent model.&lt;/p&gt;

&lt;p&gt;For technical readers, a review of &lt;a href=&quot;https://github.com/wardle/openconsent/blob/master/src/test/java/com/eldrix/openconsent/model/TestConsent.java&quot;&gt;some of the unit tests&lt;/a&gt; will demonstrate the use of the framework.&lt;/p&gt;

&lt;p&gt;The immediate next steps for development are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;add secure messaging&lt;/li&gt;
  &lt;li&gt;complete the REST API (although much is already complete)&lt;/li&gt;
  &lt;li&gt;add OAUTH2 server&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">Don’t we all want clinical information systems that support both clinicians and patients with clinical care?</summary></entry><entry><title type="html">Pseudonymous consent- updated</title><link href="https://www.wardle.org/information-governance/2017/04/08/pseudonymous-consent.html" rel="alternate" type="text/html" title="Pseudonymous consent- updated" /><published>2017-04-08T09:22:28+01:00</published><updated>2017-04-08T09:22:28+01:00</updated><id>https://www.wardle.org/information-governance/2017/04/08/pseudonymous-consent</id><content type="html" xml:base="https://www.wardle.org/information-governance/2017/04/08/pseudonymous-consent.html">&lt;p&gt;I have updated my &lt;a href=&quot;https://github.com/wardle/openconsent&quot;&gt;proof-of-concept project on pseudonymous consent (see github)&lt;/a&gt;. To understand the background to this blog post, please see my &lt;a href=&quot;/information-governance/2017/04/05/pseudonymous-consent-poc.html&quot;&gt;earlier post&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The design goals were&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Put patients in control of their information&lt;/li&gt;
  &lt;li&gt;Support explicit opt-in for research and opt-out for clinical services.&lt;/li&gt;
  &lt;li&gt;Avoid leaking confidential information while information is in transit or in storage.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The key to linking information in a safe way is the use of pseudonymous identifiers.&lt;/p&gt;

&lt;p&gt;The following schematic shows the updated model:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/openconsent/openconsent-model-updated.png&quot; alt=&quot;Openconsent Model Updated&quot; /&gt;&lt;/p&gt;

&lt;p&gt;A patient can create an account at any time using their email. Potentially, this account could be validated by some external agency such as the Government Gateway or new Gov.uk VERIFY services.&lt;/p&gt;

&lt;h4 id=&quot;opt-in-projects&quot;&gt;Opt-in projects&lt;/h4&gt;
&lt;p&gt;To join a research project, we create an explicit “Registration” for that patient. A research project creates an “Episode” and, given it is an explicit opt-in type of project, data access would only be permitted if explicit consent exists. This is straightforward but the design ensures that the system cannot re-identify the patient. A project needs to obtain patient identifiable information via a different route.&lt;/p&gt;

&lt;h4 id=&quot;opt-out-projects&quot;&gt;Opt-out projects&lt;/h4&gt;
&lt;p&gt;But what if I want to write a new “intelligent agent” that will monitor patients, look for patients on methotrexate and then check that they have had their required blood monitoring and that the blood results are within the ranges we expect? Methotrexate can cause blood dyscrasias and so needs regular blood monitoring. I want the care I provide to patients to &lt;a href=&quot;/information-governance/2017/03/19/information-governance.html&quot;&gt;run on rails&lt;/a&gt; so how can I introduce an application that accesses patients’ records in a safe way that is defensible in regard to information governance and the media? I really don’t wish to be on the front page of the newspapers!&lt;/p&gt;

&lt;p&gt;The steps are as so:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;To access patient data, the project (in this case my methotrexate monitoring application), registers an episode using the known patient identifiers. It is acting on behalf of an NHS organisation.&lt;/li&gt;
  &lt;li&gt;The “system” permits access to health data as this is an opt-out project, but data access is logged in a verifiable log.&lt;/li&gt;
  &lt;li&gt;A patient wishes to opt-out. They already have a validated account. It has been endorsed and linked to the authority that oversees the project.&lt;/li&gt;
  &lt;li&gt;The patient (and only the patient) can then look up all episodes relating to him or herself and explicitly opt-out by recording that information against the episode. This change would be logged in a verifiable log as previously discussed.&lt;/li&gt;
  &lt;li&gt;For the project, data access is no longer permitted.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The critical features are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the avoidance of information leakage; making inferences about the patient simply as a result of the opt-in and opt-out of projects.&lt;/li&gt;
  &lt;li&gt;providing some degree of proof of trustworthiness in that the above logic could be distributed across multiple systems and we can vouch that patient information cannot be shared inappropriately and without being logged.&lt;/li&gt;
  &lt;li&gt;ensuring that even insiders cannot find out more information about a patient than they should. A project cannot find out what else the patient has consented for and likewise, an attacker of the patient accounts cannot find out to which projects the patient has opted-in or out of.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There is more work to do to make it a usable system, but the &lt;a href=&quot;https://github.com/wardle/openconsent/blob/master/src/test/java/com/eldrix/openconsent/model/TestPatients.java&quot;&gt;test harness&lt;/a&gt; demonstrates how it would work in practice.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">I have updated my proof-of-concept project on pseudonymous consent (see github). To understand the background to this blog post, please see my earlier post.</summary></entry><entry><title type="html">Pseudonymous consent</title><link href="https://www.wardle.org/information-governance/2017/04/05/pseudonymous-consent-poc.html" rel="alternate" type="text/html" title="Pseudonymous consent" /><published>2017-04-05T14:45:28+01:00</published><updated>2017-04-05T14:45:28+01:00</updated><id>https://www.wardle.org/information-governance/2017/04/05/pseudonymous-consent-poc</id><content type="html" xml:base="https://www.wardle.org/information-governance/2017/04/05/pseudonymous-consent-poc.html">&lt;blockquote&gt;
  &lt;p&gt;Update: 8th April 2017. I have refined the data model in a &lt;a href=&quot;/information-governance/2017/04/08/pseudonymous-consent.html&quot;&gt;subsequent post&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;In earlier posts relating to &lt;a href=&quot;/clinical-informatics/2017/03/09/google-information.html&quot;&gt;“What I would do if I were Google”&lt;/a&gt; and &lt;a href=&quot;/information-governance/2017/03/19/information-governance.html&quot;&gt;“Balancing information governance and innovation in the NHS”&lt;/a&gt;, I discussed the importance of balance between information governance and open innovation within healthcare informatics focusing on the difficulty in handling sensitive medical data.&lt;/p&gt;

&lt;p&gt;Writing a blog forces one to reflect; for instance, what is it that you are trying to do? I’ve concluded that my primary objective within healthcare informatics is to:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;make healthcare information available at the point-of-care in order to support clinical care&lt;sup&gt;&lt;a href=&quot;#care-of-patients&quot;&gt;a&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;To achieve that, I want:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;better use of real-time analytics to aggregate data among patient cohorts and support clinical decision making&lt;/li&gt;
  &lt;li&gt;a mixed-economy of healthcare applications that can interoperate and leverage core infrastructure and services with a reduced focus on monolithic enterprise-wide systems&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And to achieve those, I want:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;greater use of structured clinical information captured and used at the point-of-care including use of robust information models, open standards and terminology such as HL7 FHIR, openEHR and SNOMED CT.&lt;/li&gt;
  &lt;li&gt;an open-source infrastructure to permit interoperability between vendors.&lt;/li&gt;
  &lt;li&gt;a robust information governance framework&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;supporting-information-governance&quot;&gt;Supporting information governance&lt;/h2&gt;

&lt;p&gt;One can support &lt;a href=&quot;https://en.wikipedia.org/wiki/Information_governance&quot;&gt;information governance&lt;/a&gt; by adopting appropriate &lt;a href=&quot;http://www.wales.nhs.uk/nwis/page/52618&quot;&gt;policies and procedures&lt;/a&gt;, by creating formal &lt;a href=&quot;https://www.igt.hscic.gov.uk/Caldicott2Legislation.aspx?tk=428276172817610&amp;amp;lnv=18&amp;amp;cb=8cf4d31b-5ea7-4f07-b8b5-34f9ee732d4a&quot;&gt;legislation&lt;/a&gt;, &lt;a href=&quot;https://www.igt.hscic.gov.uk&quot;&gt;toolkits&lt;/a&gt; and by instituting technical solutions such as authentication, authorisation, secure audit logs and encryption.&lt;/p&gt;

&lt;p&gt;Essentially we need to strike a balance between making clinical information available and ensuring that this sensitive information is not seen by the wrong people in a complex, heterogeneous and distributed environment in which there are multiple actors such as clinical staff, patients, managers, organisations and commissioners.&lt;/p&gt;

&lt;p&gt;I think that there are three broad concepts we need to cover:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Pseudonymisation and data linkage.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Secure and verifiable audit trails&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Put patients at the heart of what we do and give them control.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I have previously discussed the use of pseudonymisation as a technique to permit safe data linkage within and between disparate datasets. In addition, I covered the use of a project- or service- specific pseudonym that could uniquely identify a patient for that particular research project or clinical service. Importantly, pseudonymisation uses a one-way mathematical function so that, given a pseudonym alone, we cannot re-identify a patient. However, we can re-link these data if we have the shared secrets that were used to generate the pseudonym.&lt;/p&gt;

&lt;p&gt;I gave an overview of &lt;a href=&quot;/merkle-trees/2017/03/20/merkle-trees.html&quot;&gt;Merkle trees&lt;/a&gt; in a previous blog post. Essentially, although I have built in audit trail functionality into my own EPR, there is nothing stopping me accessing patient records inappropriately and removing those log entries directly from the database as I have administrator access. Do you trust me? Perhaps. But do you trust a commercial entity? Perhaps not. A verifiable audit log potentially solves this issue, by ensuring that no-one can tamper with the log.&lt;/p&gt;

&lt;p&gt;Putting patients in control of where and how their information is used means that there are &lt;em&gt;no surprises&lt;/em&gt; because patients have explicitly agreed.&lt;/p&gt;

&lt;h3 id=&quot;key-security-concerns&quot;&gt;Key security concerns&lt;/h3&gt;

&lt;p&gt;Is it possible to create an architecture which is secure-by-design?&lt;/p&gt;

&lt;p&gt;The use of pseudonyms generated on a per-use or per-service basis, possibly on the fly, potentially allows an interesting security feature in that inappropriate dataset access cannot occur simply because the data cannot be linked to the patient, rather than relying on systems themselves try to manage which data sources are permitted or not. Access to data is therefore the result of data linkage.&lt;/p&gt;

&lt;p&gt;As a result, it becomes possible to allow untrusted third parties access to an infrastructure but their access to disparate distributed data sources is impossible as a result of a lack of linkage. In addition, by virtue of requesting access, the third party &lt;em&gt;must&lt;/em&gt; make a data access request and therefore have their access logged appropriately.&lt;/p&gt;

&lt;p&gt;One fundamental security concern is that a centralised registry of permissions, opt-ins and opt-outs in itself gives away important potentially patient identifiable information. For instance, membership of a cohort of patients in a genito-urinary clinic &lt;em&gt;in itself&lt;/em&gt; gives information to potential third parties. Therefore, it is important that such information is inaccessible by design.&lt;/p&gt;

&lt;p&gt;Sensitive information will be both stored and subsequently transmitted; both require protecting. The most difficult is protecting stored data and I have tried to create a proof-of-concept that could cope with whole system compromise. Assuming an attacker has full access to a dump of the database, it should be possible to take reasonable precautions to prevent re-identification. However, this requirement means that simple join-tables in a relationship database between a patient and their consent/permissions cannot be used.&lt;/p&gt;

&lt;h3 id=&quot;proof-of-concept&quot;&gt;Proof-of-concept&lt;/h3&gt;

&lt;p&gt;There is nothing like trying to create a small working solution as a proof-of-concept.&lt;/p&gt;

&lt;p&gt;The source code is available here: &lt;a href=&quot;https://www.github.com/wardle/openconsent&quot;&gt;https://www.github.com/wardle/openconsent&lt;/a&gt;.  Conceptually, the data model is as follows:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/openconsent/openconsent-model.png&quot; alt=&quot;Openconsent Model&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Here the Patient entity records the name of the patient and uses an email address for login. When a user creates an account, the password is used to create a salted digest for future password-checks and used to create a different digest used to encrypt an encryption key. This key is used to encrypt other information including the name of the patient and the episode identifiers held in the registrations table.&lt;/li&gt;
  &lt;li&gt;The registration table simply stores encrypted pseudonymous identifiers. There is a one-to-many relationship from patient to registrations.&lt;/li&gt;
  &lt;li&gt;A project represents a clinical service or research project. Future versions will include additional information such as a URL to an organisation or service homepage as well as service authentication credentials.&lt;/li&gt;
  &lt;li&gt;An episode stores a project-specific pseudonymous identifier and will store the patient’s explicit choices regarding the use of their data in that context. It will be here that a verifiable audit log is required to track changes in choice so that we can vouch that nothing has tampered with the transactions that have occurred at the episode level.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This data model is working and is unit tested. An example of creating a patient and understand that they are part of a specific project is shown &lt;a href=&quot;https://github.com/wardle/openconsent/blob/master/src/test/java/com/eldrix/openconsent/model/TestPatients.java&quot;&gt;here, if you can understand java code&lt;/a&gt;. Essentially a patient is registered to a project and I show that we can find that registration subsequently.&lt;/p&gt;

&lt;p&gt;The encryption key is generated randomly. It is encrypted using a key derived from a digest of the patient’s password. The encryption key can only be decrypted with access to the patient’s password but this is never stored. The digest used to validate a patient’s password is stored but is calculated differently to the digest used as the key for the encryption key. The encryption key is used for encryption and decryption of sensitive information relating to that patient. By decrypting the registration information, the application can get a list of episode identifiers for that patient.&lt;/p&gt;

&lt;p&gt;I do need to add an encrypted global pseudonym that is not exposed to research projects and clinical services to allow data linkage once a patient’s account has been validated. More details of this are given below.&lt;/p&gt;

&lt;p&gt;The next steps will be to expose this functionality as a REST service. My plan for the eventual architecture is shown here with the unimplemented pieces in grey and the already implemented model in blue.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/openconsent/openconsent-plan.png&quot; alt=&quot;Openconsent Plan&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The following sections describe how the system works to track consent in a safe way.&lt;/p&gt;

&lt;h4 id=&quot;a-research-project&quot;&gt;A research project&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;A research project is registered with a project-specific consent form.&lt;sup&gt;&lt;a href=&quot;#consent-form&quot;&gt;b&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
  &lt;li&gt;A research project creates an episode using the patient’s details and so needs to know their details to pass in to generate a pseudonym.&lt;/li&gt;
  &lt;li&gt;If that project subsequently wants to know whether a patient they are seeing has consented, they can pass the patient’s identifier (e.g. NHS number) and date of birth and get any active episodes.&lt;/li&gt;
  &lt;li&gt;However, because openconsent understands that such a service is opt-in, it will only issue authorisation tokens if the episode has been validated by the patient explicitly.&lt;/li&gt;
  &lt;li&gt;If a patient has consented, then the project can submit the pseudonym to receive an &lt;a href=&quot;https://oauth.net/2/&quot;&gt;OAUTH2 token&lt;/a&gt;. OAUTH2 is a distributed authorisation framework which allows application to obtain limited access to a data repository. A verifiable audit log records the transaction using the pseudonym.&lt;/li&gt;
  &lt;li&gt;Should a patient’s consent be withdrawn, or not exist in the first place, then no data is returned. No further work is possible.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Validation of permission by the patient could occur in a variety of ways:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;when a member of the research team meets the patient and shows them a QR code that is readable by a mobile device application.&lt;/li&gt;
  &lt;li&gt;a QR code that links to a web application portal for the patient&lt;/li&gt;
  &lt;li&gt;manually typing in the project-specific pseudonym&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Once linked, a patient account stores the registration information in an encrypted format and can then find the episode information and alter their permissions within the episode.&lt;/p&gt;

&lt;p&gt;The data store would provide data linked only via the pseudonym preventing simple re-identification of patients.&lt;/p&gt;

&lt;h4 id=&quot;a-clinical-service&quot;&gt;A clinical service&lt;/h4&gt;

&lt;p&gt;A registered clinical service would expect to always have authorisation to patient data, but audit trails of information requested would still be recorded as above. Clinical users would authenticate with their clinical applications and those applications would themselves authenticate and become authorised to access clinical data, obtaining an OAUTH2 token to access the appropriate data.&lt;/p&gt;

&lt;p&gt;A clinical service would therefore create an episode using the patient’s information and no explicit consent is required for openconsent to issue authorisation tokens. However, there is a problem here. How can a patient remove their consent for this specific use of their data? There is no way an episode can identify the patient or indeed a registration entity corresponding to that episode as a result of the one-way link between a registration and an episode.&lt;/p&gt;

&lt;p&gt;I think that there are two options:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Iterate through all registered projects and calculate on-the-fly a pseudonym for each and look for matches within the episodes. This would work only if we store the information required to generate the pseudonym in the Patient entity. This is possible but may struggle to scale if there are many projects.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add a global but private pseudonym that, once recorded acts to validate that the patient account is owned by the person we think. However, this private global pseudonym cannot be shared with individual services and is built from a recipe of immutable information about the patient using a different salt. Once the information used to built the pseudonym are validated, the global pseudonym can be recorded encrypted in the patient’s own account. This can then be used to link project-specific pseudonyms to a single record.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I consider option (2) to be preferable but will work to prove that in the proof-of-concept project.&lt;/p&gt;

&lt;p&gt;For option (2), the global pseudonym will also need to be stored, privately for an episode. Thus, for a validated patient account, the service can then find all episodes relating to them even though there is no corresponding registration. If a patient is not happy with the use of their data for that purpose, they can mark it as such. In the model, a registration is built to link the patient with the episode, and their new preferences are recorded in that episode with the change recorded in the verifiable log. From that point, service access will not be permitted.&lt;/p&gt;

&lt;p&gt;For opt-out services, most episodes will not be linked to from a registration entity except if a patient has explicitly opted-out. If the patient has done so, then the episode will have had the permissions changed.&lt;/p&gt;

&lt;h4 id=&quot;the-patient&quot;&gt;The patient&lt;/h4&gt;

&lt;p&gt;A patient should be able to login via their portal. From there, they can see their registered projects and services by decrypting a list of project-specific pseudonyms. In these, they can opt-in of research and opt-out for non-research clinical uses on a case-by-case basis.&lt;/p&gt;

&lt;p&gt;For research, a patient may engage with the research team or a project-specific application or generic sign-up application and link their account to the project. Essentially, in the data model, I create a registration entity that maps to the episode entity for that project and patient. A patient may then easily remove their consent at some point in the future, with any changes made to the episode and the transaction logged with the verifiable log.&lt;/p&gt;

&lt;p&gt;For clinical services, a patient would need to register to opt-out as discussed above.&lt;/p&gt;

&lt;h4 id=&quot;problems-and-requirements&quot;&gt;Problems and requirements&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;The software is a simple proof-of-concept at the moment and is incomplete. I need to:
    &lt;ul&gt;
      &lt;li&gt;integrate an OAUTH2 server. Can &lt;a href=&quot;https://oltu.apache.org&quot;&gt;Apache Oltu&lt;/a&gt; do this?&lt;/li&gt;
      &lt;li&gt;add REST endpoints. This is quite easy using LinkRest and standard JAX-RS.&lt;/li&gt;
      &lt;li&gt;link to a verifiable log. Needs evaluation. Plan for simple log that can replaced with proper verifiable version in future. I’d plan for the verifiable log to be on a remote service. Could I use &lt;a href=&quot;https://github.com/google/trillian&quot;&gt;Trillian&lt;/a&gt;?&lt;/li&gt;
      &lt;li&gt;build user interface components to expose the tools to the patient (although this would be a long-term aim).&lt;/li&gt;
      &lt;li&gt;build data repository wrappers to check for OAUTH2 tokens for permission to access.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Further questions:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Is AES encryption good enough for encrypting the data fields within the patient record and the associated registrations? At the moment, this uses 128-bit keys, but it would be straightforward to increase the key length in production.&lt;/li&gt;
  &lt;li&gt;Can this be a distributed system? Probably. The software supporting the Patient - Registration can run on a separate service than the Episode - Project components, and there could be multiple latter services, essentially creating a registry of data registries?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Essentially, the design principles here are:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;decoupling applications from data stores&lt;/li&gt;
  &lt;li&gt;put patients in charge of opt-in and opt-out for access to their data for different purposes&lt;/li&gt;
  &lt;li&gt;create a secure architecture using encryption and pseudonymous linkage, so we can offer guarantees about data governance while permitting large-scale access by third parties.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This is a project in development so thoughts and suggestions are most welcome!&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h2&gt;

&lt;p&gt;&lt;a name=&quot;care-of-patients&quot;&gt;a&lt;/a&gt;: I originally wrote “to support the care of patients”, but that implies that it is care that is &lt;em&gt;done to&lt;/em&gt; patients rather than a partnership; the words we use to frame a problem potentially limit our ability to solve the real issue.&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;consent-form&quot;&gt;b&lt;/a&gt;: In the PatientCare EPR, I have an electronic consent system with specific items of consent mapped in an information model exposed via a REST service. An iPad application can use this to build a ResearchKit based consent form automatically and dynamically. The following video demonstrates this functionality in which I edit a consent form electronically and the change is seen in the ResearchKit based application, here running on an iPad.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/59tGM85zzlY&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;</content><author><name></name></author><summary type="html">Update: 8th April 2017. I have refined the data model in a subsequent post.</summary></entry><entry><title type="html">Test requesting</title><link href="https://www.wardle.org/clinical-informatics/2017/04/04/test-requesting.html" rel="alternate" type="text/html" title="Test requesting" /><published>2017-04-04T12:27:23+01:00</published><updated>2017-04-04T12:27:23+01:00</updated><id>https://www.wardle.org/clinical-informatics/2017/04/04/test-requesting</id><content type="html" xml:base="https://www.wardle.org/clinical-informatics/2017/04/04/test-requesting.html">&lt;p&gt;I discussed the importance of scope and framing in a &lt;a href=&quot;/clinical-design/2017/03/23/scope-framing-clinical-design.html&quot;&gt;recent blog post&lt;/a&gt; concluding that the framing and scope of the overall problem domain must be broad enough to model reality but that solutions must be broken-up into components each of limited scope.&lt;/p&gt;

&lt;p&gt;This is a natural conclusion from a domain-driven design approach in which the design of clinical systems begins with a deep understanding of the domain. An issue for clinicians and those who develop information systems is that there are domain concepts which are implicit and assumed; assumptions and heuristics and understanding built up over many years of working in clinical practice.&lt;/p&gt;

&lt;p&gt;An example are the processes and workflow in clinical practice. A development team can work on a system to allow users to request tests but until the scope of the problem is sufficiently broadened to include a model of clinical workflow, a solution risks causing a mismatch between reality and software. I touch on mismatches in my &lt;a href=&quot;https://www.dropbox.com/s/62sg71a19voxpts/cis_design.pdf?dl=0&quot;&gt;domain-driven clinical information system paper&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Experience and a sense of aesthetics are important. A clumsy model results in a clumsy user interface and user dissatisfaction, despite a long list of requirements which the design team have succeeding in delivering.&lt;/p&gt;

&lt;h4 id=&quot;the-current-system&quot;&gt;The current system&lt;/h4&gt;

&lt;p&gt;In Wales, we have a “Welsh Clinical Portal” application which is meant to turn into a complete solution for almost all healthcare staff under the banner of “Once for Wales”. However, it is already acknowledged that the system is not suitable for primary care or the emergency unit of organisations across Wales, or indeed, operating theatres or the community.&lt;/p&gt;

&lt;p&gt;I feel very strongly that user-facing applications should be process and workflow-driven, improving care and supporting care in specific clinical situations. However, to prevent duplication of effort, such applications such be &lt;em&gt;stupid&lt;/em&gt;. They should possess little or no logic but use functionality provided by a national platform to make sense of what they are trying to achieve. Our user-facing applications become simply thin wrappers around a service-orientated architecture as part of that platform. A user-interface may be &lt;em&gt;smart&lt;/em&gt; but only in it adapts in a smart way to what the user is doing.&lt;/p&gt;

&lt;p&gt;As I outlined previously:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The current solution tries to be everything to everyone. It supports requesting tests for an arbitrary date, or set of dates. It is accessible only within the WCP application itself; its user interface, its functionality and the services it uses to implement its functionality are not available outside of WCP.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The main issues as I see it are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The current system supports only laboratory tests and different screens are planned to support requesting other tests such as radiology.&lt;/li&gt;
  &lt;li&gt;The core functionality should be available to other software via an application programming interface (API) which enforces business rules supporting the domain logic on which test requesting must depend.&lt;/li&gt;
  &lt;li&gt;A single user-interface may not be appropriate in all workflows.&lt;/li&gt;
  &lt;li&gt;A core default user interface should also be available to other software so that it may be embedded in different systems to suit different workflows.&lt;/li&gt;
  &lt;li&gt;There are problems with the existing user interface.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Should I focus on redesigning the user interface, or challenge the current architecture?&lt;/p&gt;

&lt;p&gt;I’ll go with the latter, although we can make the user interface much smarter as well.&lt;/p&gt;

&lt;h2 id=&quot;applying-domain-driven-design-in-test-requesting&quot;&gt;Applying domain-driven design in test requesting&lt;/h2&gt;

&lt;p&gt;I’m going to use a redesign of the test requesting workflow as an example of applying domain-driven design.&lt;/p&gt;

&lt;h3 id=&quot;explicit-rules-vs-implicit-assumptions&quot;&gt;Explicit rules vs. implicit assumptions&lt;/h3&gt;

&lt;p&gt;Business rules and assumptions are frequently overlooked when clinicians and designers meet. They contain implicit knowledge that is routine, mundane, automatic and most importantly, assumed. It is important to fully explore a problem domain and challenge implicit assumption in both workflow and process.&lt;/p&gt;

&lt;p&gt;In addition, these assumptions will vary; not just between different professions within healthcare but even within the same specialism. Indeed, I must admit to creating contradictory and inconsistent perspectives in my own clinical practice when creating my own EPR and realising my mistake only at the time of implementation.&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;RULE ONE:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Examine and judge all assumptions; make the rules that drive your system(s) explicit.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;declarative-vs-imperative-systems&quot;&gt;Declarative vs. imperative systems&lt;/h3&gt;

&lt;p&gt;Declarative environments allows the rules and logic of a system to be expressed without describing the procedure that must be followed in order to apply that logic. This is very different to a procedural (or “imperative”) approach in which rules and logic are present by virtue of how they have been interpreted and turned into a sequence of commands by a programmer. In declarative programming, the logic and rules are explicit; in procedural programming, they are implicit.&lt;/p&gt;

&lt;p&gt;Non-programmers might assume that declarative programming must be the most common method to build software in the modern age, given that the rules and logic are expressed logically and explicitly. In fact, this is not the case, and the most commonly used programming languages today are procedural programming languages. There are a variety of reasons for this which are outside of the scope of this article.&lt;/p&gt;

&lt;p&gt;Complex business environments - and I very much include healthcare information technology - are frequently made up of many different systems all with different responsibilities and scope. Business rules can be distributed across systems making it difficult to understand how or why something unexpected has happened when a set of unusual circumstances come together and result in a critical incident. We want healthcare software to be deterministic; we want to prove that a system does what we say it does. It makes sense therefore to build in business rules management into the design of any clinical information system so that our software can leverage those business rules and adapt when those rules change in the future.&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;RULE TWO:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Favour explicit rules written declaratively in the language of the business.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;architectural-design--aesthetics&quot;&gt;Architectural design / aesthetics&lt;/h3&gt;

&lt;p&gt;In Section 5 of &lt;a href=&quot;https://www.dropbox.com/s/62sg71a19voxpts/cis_design.pdf?dl=0&quot;&gt;Domain-driven design for clinical systems&lt;/a&gt;, I introduce a number of fundamental architectural decisions such as layering, the use of a service-orientated approach and model-view-controller designs. I will not repeat those here.&lt;/p&gt;

&lt;p&gt;I introduced this diagram in my blog post about &lt;a href=&quot;/clinical-design/2017/03/23/scope-framing-clinical-design.html&quot;&gt;scope and framing of clinical problems&lt;/a&gt;:
&lt;img src=&quot;/images/test-requesting.png&quot; alt=&quot;Test Requesting&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Importantly, this schematic emphasises the importance of breaking-up our test requesting solution into components representing those that face the user (our user interface) and those that face our other services (our business interfaces). Interfaces to the user fundamentally depend on the workflow that our clinical information system is meant to support. In addition, computing hardware changes frequently with new handheld devices and new ways of working, so it is important to ensure separation between user-facing applications and underlying business logic.&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;RULE THREE:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Always design to support multiple user interfaces on multiple devices.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;This rule forces several important architectural decisions, particularly if one abides by the next rule as well:&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;RULE FOUR:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Don’t repeat yourself&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Critically, it means that all business logic must exist at the service-layer of your architecture and then your user-facing applications are &lt;em&gt;stupid&lt;/em&gt; in that they delegate all control logic to other services, but &lt;em&gt;smart&lt;/em&gt; in the way that they fit in and support clinical workflow.&lt;/p&gt;

&lt;h3 id=&quot;test-requesting&quot;&gt;Test requesting&lt;/h3&gt;

&lt;p&gt;So for test requesting, our user interface via a web browser might look like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/test-request/landing-page.png&quot; alt=&quot;Landing Page&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Generic test requesting, not just for laboratory tests. Do you expect me to use a different screen to request different types of tests such as radiology? We extend the frame of our overall problem.&lt;/li&gt;
  &lt;li&gt;No modal dialogs but a smart user interface that reacts to our keypresses and mouse clicks, adapting itself appropriately. Why make the user click a button to send the request and then show them a modal alert? Instead, make the button inactive and tell them what needs to be done to make it active.&lt;/li&gt;
  &lt;li&gt;If additional information is required, then adaptive forms appear to request that information:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/test-request/adding-free-text.png&quot; alt=&quot;Adding Free Text&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here the user can see what needs to be done to complete the form: enter information about thyroid function and then enter their password:&lt;/p&gt;

&lt;p&gt;To make a test a favourite, we allow users to toggle the heart icon. To choose from our favourites, we do this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/test-request/adding-favourites.png&quot; alt=&quot;Adding Favourites&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And finally, when the request is ready to be sent:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/test-request/ready-for-request.png&quot; alt=&quot;Ready For Request&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The information about thyroid status and whether the patient takes thyroxine should really be completed automatically from what we already know about the patient. For now however, WCP doesn’t have this information readily available. In our design however, we must consider how information could be auto-completed.&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;RULE FIVE:&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Plan for the future.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;what-do-we-need&quot;&gt;What do we need?&lt;/h3&gt;

&lt;p&gt;Architecturally, we need:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A service to provide fast full-text searching for tests.&lt;/li&gt;
  &lt;li&gt;A test handbook service - a declarative repository of investigations and the rules that manage those investigations. This test handbook must also add support for explicitly declaring additional information required at the point-of-request as well as hooks to allow external services to help manage the requesting workflow for that test. This test handbook service conceptually is a business rules engine, declaring exactly what is permitted and when.&lt;/li&gt;
  &lt;li&gt;As a result, a request-workflow service must be designed to handle all tests in a generic way but, for certain investigations, a more custom service URL can be specified in which more complex logic can be performed in an imperative manner.&lt;/li&gt;
  &lt;li&gt;Each request-workflow service must consider how access to structured electronic health record information might support their use. For example, logic supporting thyroid function may auto-complete the “taking thyroxine” pop-up by simply looking at a FHIR representation of the current medication list at the time of the test.&lt;/li&gt;
  &lt;li&gt;Services to provide support for the lists of locations and clinicians bound to the specific workflow and currently logged-in user.&lt;/li&gt;
  &lt;li&gt;A service to register and list favourite investigations for individual clinicians and groups of clinicians.&lt;/li&gt;
  &lt;li&gt;Underlying services to actually action the test request.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Almost all of this functionality is already available, but is available only to the existing application.&lt;/p&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;In conclusion, I have widened the scope of the overall solution to include all investigations and not only laboratory tests, but modularised the architecture and narrowed the scope of these individual components.&lt;/p&gt;

&lt;p&gt;Mark&lt;/p&gt;</content><author><name></name></author><summary type="html">I discussed the importance of scope and framing in a recent blog post concluding that the framing and scope of the overall problem domain must be broad enough to model reality but that solutions must be broken-up into components each of limited scope.</summary></entry></feed>