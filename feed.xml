<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="http://jekyllrb.com" version="3.4.1">Jekyll</generator><link href="https://www.wardle.org/feed.xml" rel="self" type="application/atom+xml" /><link href="https://www.wardle.org/" rel="alternate" type="text/html" /><updated>2020-07-09T22:20:21+01:00</updated><id>https://www.wardle.org/</id><title type="html">Health informatics and information technology</title><subtitle>by Dr Mark Wardle, Consultant Neurologist, clinical informatics and software developer. Founder, Eldrix Ltd.
</subtitle><entry><title type="html">Semantic value sets</title><link href="https://www.wardle.org/standards/2020/07/09/value-sets.html" rel="alternate" type="text/html" title="Semantic value sets" /><published>2020-07-09T09:09:10+01:00</published><updated>2020-07-09T09:09:10+01:00</updated><id>https://www.wardle.org/standards/2020/07/09/value-sets</id><content type="html" xml:base="https://www.wardle.org/standards/2020/07/09/value-sets.html">&lt;p&gt;This is my real-time write up of coding some simple logic to handle mapping between different value sets. I wrote it in the space of an afternoon, so it’s only a demonstration.&lt;/p&gt;

&lt;p&gt;It’s written in Clojure, a lisp than runs on the Java virtual machine (JVM). It makes it very easy to do coding in an exploratory way. This is my first live-coding blog in Clojure. It’s an experiment.&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ns&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com.eldrix.janus.standards&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;semantic-interoperability&quot;&gt;Semantic interoperability&lt;/h1&gt;

&lt;p&gt;One of the difficulties with building semantic interoperability between clinical systems are
value sets.&lt;/p&gt;

&lt;p&gt;In essence, a value set is a set of values that can be used for a data field.&lt;/p&gt;

&lt;p&gt;Many health interoperability technologies leave value sets as something to be &lt;em&gt;profiled&lt;/em&gt;. This means that one actually can’t exchange meaningful information unless you agree on what you are using for a particular field.&lt;/p&gt;

&lt;p&gt;Often these value sets model real-world operations very closely. Sometimes, they don’t because
they reflect central reporting requirements and act as a classification system rather than a terminology.&lt;/p&gt;

&lt;p&gt;The best way to think of this, in a non-technical manner, is that for central reporting we might want to categorise a clinical encounter by main specialty (e.g. neurology), but in fact the patient was really seen by a number of different specialties or clinicians in subspecialty practice (e.g. epilepsy surgery pre-assessment clinic). The reporting is important, but it is a prism through which we view the record in order to simplify our analytics. It isn’t the “truth”.&lt;/p&gt;

&lt;p&gt;It should be obvious that a flat classification system is great for reporting, because you categorise patients into groups, but an ontology that not only provides value lists but provides information about how each value relates to one another (e.g. paediatric neurology -is-a- paediatric speciality, paediatric neurology -is-a- neurology specialty)
is much better for operational clinical systems.&lt;/p&gt;

&lt;p&gt;The logical consequence is that we need systems that can transparently flip between different classification and terminology systems. When we can do that with losing information, it is called ‘round-tripping’, but in many cases it’s not possible to map without losing information because a classification simply doesn’t have the necessary level of granularity. The logical consequence of that is that we should do most of our work in a finely-grained terminology system and map to less granular, lossy classification schemes for reporting purposes.&lt;/p&gt;

&lt;p&gt;This example here using real code, in Clojure, to demonstrate how we can build stable, reliable clinical systems that can seamlessly switch between ontological value sets and classification value sets, and sometimes back again. This example uses a value set that is useful both for reporting and operationally: triage category.&lt;/p&gt;

&lt;p&gt;I’ve deliberately chosen this as we can round-trip without losing information.&lt;/p&gt;

&lt;h1 id=&quot;a-worked-example-triage-category&quot;&gt;A worked example: triage category&lt;/h1&gt;

&lt;p&gt;Here’s our NHS Wales information standards data from the emergency department dataset. It should be a goal for us to publish datasets like this in a format that can be read by machines but that’s not available, so I’ve created a machine-readable version here.&lt;/p&gt;

&lt;p&gt;It defines a value set for triage categories, representing the patient’s priority in an emergency system at time of triage.&lt;/p&gt;

&lt;p&gt;Note that I’ve added a namespace. This means that the combination of namespace and value is globally unique.&lt;/p&gt;

&lt;p&gt;One job for data standards is to define publicly accessible namespaces and their values.
This means that &lt;code class=&quot;highlighter-rouge&quot;&gt;https://data.standards.cymru/Id/datasets/edss/triage|02&lt;/code&gt; will be “very urgent”&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datasets&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;These are the NHS Wales data dictionary datasets. See http://www.datadictionary.wales.nhs.uk
  Ideally these should be imported from a machine-readable source, but that doesn't yet exist&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:emergency-department-dataset&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
   &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Emergency department dataset&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:url&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.wales.nhs.uk/sitesplus/documents/299/20090401_DSCN_022009%28W%29.pdf&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:dscn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DSCN (2009) 02 (W)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:namespace&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:items&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:triage-categories&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Triage categories&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                 &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:namespace&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/triage&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                 &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:values&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;              &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;01&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:active&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:description&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Priority One - Immediate&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:info.snomed/sct&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1064891000000107&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;              &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;02&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:active&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:description&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Priority Two - Very urgent&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:info.snomed/sct&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1064911000000105&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;              &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;03&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:active&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:description&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Priority Three - Urgent&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:info.snomed/sct&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1064901000000108&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;              &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;04&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:active&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:description&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Priority Four - Standard&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:info.snomed/sct&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1077241000000103&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;              &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;05&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:active&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:description&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Priority Five - Non urgent&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:info.snomed/sct&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1077251000000100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;06&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:active&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:description&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;See and Treat&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}]}}}})&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This is a fragment of the larger dataset, and only includes the triage categories. The code below works for other defined categories in other datasets within the NHS Wales information standards catalogue.&lt;/p&gt;

&lt;p&gt;You can see that I’ve included a map to SNOMED CT for each category. There isn’t an equivalent for “See and treat” so we need to raise this with SNOMED International!&lt;/p&gt;

&lt;p&gt;We need some helper functions to process these information. You don’t need to understand how these work. Skip if you can’t read lisp! This is a toy implementation just to show the logic.&lt;/p&gt;

&lt;p&gt;Clojure allows arbitrary structures to be used as keys and values in associative arrays (also called dictionaries or hash-maps). This means I use tuples here as a key to permit toy lookup functionality. This doesn’t provide real ontological inference - only providing equivalence.&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categories-&amp;gt;ns&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Convert a list of categories into namespaced identifiers&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:namespace&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;-&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:values&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
         &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash-map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;all-identifiers&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Return a simple list of all identifiers from the datasets&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;-&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;vals&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mapcat&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;vals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mapcat&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categories-&amp;gt;ns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;defonce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;atom&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reg-equiv-asymm&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Registers equivalence from one identifier to another&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;swap!&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;assoc&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reg-equiv&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Register that the specified identifiers, expressed as {:system :value} are equivalent, symmetrically&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id1&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reg-equiv-asymm&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id1&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reg-equiv-asymm&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id2&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;So now we can process our machine-readable dataset, and simply register that one identifier from one classification or terminology is equivalent to another. Let’s do that now for our triage category. In a real production system, we’d use a service that provided an abstract ontological service and could provide an inference engine off-the-shelf.&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reg-datasets-snomed&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Register SNOMED maps for the value sets (categories) in the items of the datasets&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datasets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;doall&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;-&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all-identifiers&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datasets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reg-equiv&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://snomed.info/sct&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:info.snomed/sct&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)})))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;We’ve registered a symmetric map between SNOMED CT and the dataset definitions from the NHS Wales information standards. Real ontologies provide many more options to define relationships between identifiers.&lt;/p&gt;

&lt;p&gt;Let’s double check that this works by round-tripping between our triage identifier and SNOMED CT and back&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reg-datasets-snomed&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datasets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-in&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/triage&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;05&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://snomed.info/sct&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;;-&amp;gt; returns =&amp;gt; {:system &quot;https://snomed.info/sct&quot;, :value 1077251000000100}
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-in&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://snomed.info/sct&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1077251000000100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/triage&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; -&amp;gt; returns =&amp;gt; {:system &quot;https://data.standards.cymru/Id/datasets/edss/triage&quot;, :value &quot;05&quot;}
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;That means we can build an ‘alias’ system, taking arbitrary collections of identifiers and expanding/denormalising into all of the registered codesystems we know:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expand-identifier&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Determine the equivalent identifiers for the specified identifier tuple&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash-map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;conj&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;-&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;vals&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;So let’s check it works. Here we expand a single identifier tuple:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand-identifier&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/triage&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;05&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;;  =&amp;gt; {&quot;https://snomed.info/sct&quot; 1077251000000100, &quot;https://data.standards.cymru/Id/datasets/edss/triage&quot; &quot;05&quot;}
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;And we can send in arbitrary identifiers which will be ignored if there are no expansions&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;-&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;                                                  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;This won't be mapped&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/triage&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;05&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/other&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;N/A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expand-identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt;
;{&quot;https://snomed.info/sct&quot; 1077251000000100,
; :name &quot;This won't be mapped&quot;,
; &quot;https://data.standards.cymru/Id/datasets/edss/triage&quot; &quot;05&quot;,
; &quot;https://data.standards.cymru/Id/datasets/edss/other&quot; &quot;N/A&quot;}
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;So we can use these functions to build maps between arbitrary value sets in both classification and terminology systems - we could add an arbitrary map to another terminology or classification&lt;/p&gt;

&lt;h1 id=&quot;what-about-hl7-fhir-and-openehr&quot;&gt;What about HL7 FHIR and openEHR?&lt;/h1&gt;

&lt;p&gt;But look! We have triage models defined by both HL7 FHIR and openEHR.&lt;/p&gt;

&lt;p&gt;One approach is to try to centralise the definitions in one place. That’s a seductive approach, but brittle and difficult to change. It makes it harder in the future because you need a central authority to manage and curate. It’s much better to built a dynamic registry to which multiple code systems can register independently. It’s important to decouple at a technical level. That registry could be a small microservice that provides identifier mapping, semantics and inference.&lt;/p&gt;

&lt;p&gt;An openEHR triage archetype is available at &lt;a href=&quot;https://ckm.openehr.org/ckm/archetypes/1013.1.304&quot;&gt;https://ckm.openehr.org/ckm/archetypes/1013.1.304&lt;/a&gt; but the data item is free-text! So much for semantic interoperability! This archetype is no good for our purposes.&lt;/p&gt;

&lt;p&gt;Fortunately, openEHR could support defining a value set either internally, or using a codeable concept. But this illustrates an important problem of openEHR; you still need to agree on a set of archetypes that will be used across your organisations and software systems if you are going to have semantic interoperability. It isn’t a magic bullet.&lt;/p&gt;

&lt;p&gt;The HL7 FHIR categories are &lt;a href=&quot;https://hl7.org/fhir/STU3/v3/ActPriority/vs.html&quot;&gt;https://hl7.org/fhir/STU3/v3/ActPriority/vs.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The nice thing about both openEHR and HL7 FHIR is that we can get definitions in machine-readable formats. We can therefore write tools that import and register those value-sets.&lt;/p&gt;

&lt;p&gt;The HL7 FHIR value set is defined under the namespace &lt;code class=&quot;highlighter-rouge&quot;&gt;http://hl7.org/fhir/ValueSet/v3-ActPriority&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;In this simple proof-of-concept, let’s register the equivalence of the semantics manually. In a real-life application, we’d download the HL7 FHIR definitions in machine-readable formats and process accordingly in our inference engine.&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reg-equiv&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://hl7.org/fhir/v3/ActPriority&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UR&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/triage&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;03&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now that means we can take FHIR identifiers and turn them into what we need. Notice we turn a FHIR ‘UR’ code into an NHS Wales emergency triage “03” code.&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand-identifier&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://hl7.org/fhir/v3/ActPriority&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UR&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; {&quot;https://data.standards.cymru/Id/datasets/edss/triage&quot; &quot;03&quot;,
;;     &quot;http://hl7.org/fhir/v3/ActPriority&quot; &quot;UR&quot;}
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;We can do it in reverse as part of a collection of different identifiers:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;-&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;                                                  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;This won't be mapped&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/triage&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;03&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                     &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://data.standards.cymru/Id/datasets/edss/other&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;N/A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expand-identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt;
;{&quot;https://snomed.info/sct&quot; 1064901000000108,
; :name &quot;This won't be mapped&quot;,
; &quot;https://data.standards.cymru/Id/datasets/edss/triage&quot; &quot;03&quot;,
; &quot;http://hl7.org/fhir/v3/ActPriority&quot; &quot;UR&quot;,
; &quot;https://data.standards.cymru/Id/datasets/edss/other&quot; &quot;N/A&quot;}
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;And that means we can now do logic such as asking, was this an urgent category and it doesn’t matter whether the information is encoded in SNOMED CT, the NHS Wales information standard or HL7 FHIR.&lt;/p&gt;

&lt;p&gt;I’ve built mapping between SNOMED CT, ICD-10, Read codes and other codesystems in my own &lt;a href=&quot;https://github.com/wardle/go-terminology&quot;&gt;terminology server, written in golang&lt;/a&gt;. My real version of the Janus tool uses that to drive inferential logic using SNOMED as the lingua franca. Next job is to explore the use of off-the-shelf ontology tools to see whether they have the right performance and scaling characteristics to handle such a large ontology.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">This is my real-time write up of coding some simple logic to handle mapping between different value sets. I wrote it in the space of an afternoon, so it’s only a demonstration.</summary></entry><entry><title type="html">PatientCare EPR</title><link href="https://www.wardle.org/patientcare/2020/06/26/patientcare-epr.html" rel="alternate" type="text/html" title="PatientCare EPR" /><published>2020-06-26T09:09:10+01:00</published><updated>2020-06-26T09:09:10+01:00</updated><id>https://www.wardle.org/patientcare/2020/06/26/patientcare-epr</id><content type="html" xml:base="https://www.wardle.org/patientcare/2020/06/26/patientcare-epr.html">&lt;p&gt;So I wrote an electronic health record, running live since 2009, and while it’s still not perfect, it’s had a lot of use and I’ve made a lot of changes.&lt;/p&gt;

&lt;p&gt;I wrote it in my spare time.&lt;/p&gt;

&lt;p&gt;Here are the statistics as of 24th June 2020:&lt;/p&gt;

&lt;p&gt;There are 34,587 registered patients from across Wales, with 36% living Cardiff and Vale University Health Board, 15.9% Aneurin Bevan University Health Board, 11.3% Swansea Bay Health Board, 7.5% Cwm Taf University Health Board and the remaining distributed across Hywel Dda, Betsi Cadwaladr, Powys University Health Boards and NHS England sites.&lt;/p&gt;

&lt;p&gt;There are 111 defined patient cohorts, with 78 NHS cohorts and 32 research cohorts and 577 health professionals registered to use the system including 81 specialist nurses, 78 administrators, 75 consultants, 63 physiotherapists, 52 doctors-in-training, 34 speech and language therapists, 30 occupational therapists, 25 dieticians and 10 psychologists, with the remaining comprising research associates, administrators and students.&lt;/p&gt;

&lt;p&gt;There have been 436,145 clinical encounters recorded using the software with usage increasing during the COVID-19 crisis to record patient clinical and research contacts. Of these, there have been 175,144 telephone calls, 116,977 outpatient clinic assessments, 91,854 virtual encounters, 17,504 home visits,  11,234 inpatient encounters, 7639 multi-disciplinary team assessments and 5891 therapy group encounters. There are 4843 electronic consent forms recorded.&lt;/p&gt;

&lt;p&gt;It integrates with the NHS Wales enterprise master patient index, the NHS Wales Care Record Service, the Cardiff and Vale document repository, the staff directory, multiple patient administrative systems and uses NHS systems for staff authentication.&lt;/p&gt;

&lt;p&gt;It is founded on structured meaningful data. All patients have a list of addresses and each address is mapped to health organisation and LSOA and so from there, indices of deprivation. Each patient has a list of diagnoses and problems and treatments. Each patient is linked to multiple health boards but users don’t think in terms of organisations, only services, which can span multiple health and care organisations. At any time, we can view disease progression, by whatever outcome measure, against a cohort of patients with the same disease or defined by other shared characteristics such as age, gender, age at onset etc. It was easy to identify all of our patients with, for example, motor neurone disease, who might need to ‘shield’ from COVID-19; a three-click operation.&lt;/p&gt;

&lt;p&gt;Over 6000 clinical or research encounters are recorded each month.&lt;/p&gt;

&lt;p&gt;Now I’m re-building it, there’s a lot I’m doing differently but the fundamentals stay the same.&lt;/p&gt;

&lt;p&gt;The important things?&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Data data data&lt;/li&gt;
  &lt;li&gt;Declarative programming with rule-engine&lt;/li&gt;
  &lt;li&gt;Clean architecture&lt;/li&gt;
  &lt;li&gt;Separation of concerns&lt;/li&gt;
  &lt;li&gt;Decoupling&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">So I wrote an electronic health record, running live since 2009, and while it’s still not perfect, it’s had a lot of use and I’ve made a lot of changes.</summary></entry><entry><title type="html">‘Success’ in digital</title><link href="https://www.wardle.org/strategy/2020/06/23/success-in-digital.html" rel="alternate" type="text/html" title="'Success' in digital" /><published>2020-06-23T16:15:15+01:00</published><updated>2020-06-23T16:15:15+01:00</updated><id>https://www.wardle.org/strategy/2020/06/23/success-in-digital</id><content type="html" xml:base="https://www.wardle.org/strategy/2020/06/23/success-in-digital.html">&lt;p&gt;There has been some really good work in digital health and care in response to the COVID-19 crisis in Wales.&lt;/p&gt;

&lt;p&gt;What have been the characteristics of these successes? They have:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;focused on delivering solutions to immediate needs&lt;/li&gt;
  &lt;li&gt;broken down historic barriers&lt;/li&gt;
  &lt;li&gt;used commodity cloud services&lt;/li&gt;
  &lt;li&gt;leveraged commodity technologies such as video&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And it’s really important to recognise this good work but we also need to see that most of this work has been, what are essentially, greenfield developments.&lt;/p&gt;

&lt;p&gt;And that tells you something interesting, because if you enable a culture, and a technology platform, that allows things to be developed as independently as possible - &lt;em&gt;decoupling&lt;/em&gt;, then it’s like giving a nitro-boost to your digital productivity.&lt;/p&gt;

&lt;p&gt;Our next challenge is to see how we can use those same approaches for brownfield developments, paying down technical debt and re-focusing our technical architecture on data and standards.&lt;/p&gt;

&lt;p&gt;There’s a paradox here. People who know little about technology and software think it makes sense to centralise and manage through command and control. It’s a seductive approach, but it doesn’t work. Let’s do it “once-for-Wales” they say, as if technology wasn’t a complex, multi-faceted intervention in a complex adaptive system. One size truly doesn’t fit all.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/one-size-doesnt-fit-all.jpg&quot; alt=&quot;One Size Doesnt Fit All&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;by Simon Wardley, &lt;a href=&quot;https://twitter.com/swardley/status/1275335953788342272?s=21&quot;&gt;No One Size Fits All&lt;/a&gt;. Also see &lt;a href=&quot;https://medium.com/wardleymaps/on-being-lost-2ef5f05eb1ec&quot;&gt;Wardley maps&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;transparency&quot;&gt;Transparency&lt;/h1&gt;

&lt;p&gt;But my biggest concern?&lt;/p&gt;

&lt;p&gt;That while here in Wales we have an amazing mix of people, skills and capabilities, we’re not working as openly and transparently as we should, and we’re not fostering healthy discussion and debate.&lt;/p&gt;

&lt;p&gt;We work for the public sector, and that means being open and transparent.&lt;/p&gt;

&lt;p&gt;Wales can and should be the best place to do health and care technology. But late in 2018, at a national clinical informatics meeting, I was told that I could no longer work for the NHS Wales Informatics Service unless I took down this blog, because it was deemed critical of the status quo (*).&lt;/p&gt;

&lt;p&gt;But we &lt;em&gt;need&lt;/em&gt; to be critical because we need to keep on improving for the people of Wales, and having insight into when we’re doing well and when we’re not, is critical in order to improve.&lt;/p&gt;

&lt;p&gt;So in light of that, while the NHS Wales Technical Standards Board has been furloughed, albeit temporarily, have a look at our &lt;a href=&quot;https://github.com/orgs/nhscymru/projects&quot;&gt;project list&lt;/a&gt; and raise &lt;a href=&quot;https://github.com/nhscymru/standards/issues&quot;&gt;an issue&lt;/a&gt;, and start a debate. The website is open. Its source code is open. Anyone can contribute. Tell me, what should we be doing next?&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;(*) I no longer work for the NHS Wales Informatics Service. The “funding ran out”.&lt;/p&gt;</content><author><name></name></author><summary type="html">There has been some really good work in digital health and care in response to the COVID-19 crisis in Wales.</summary></entry><entry><title type="html">Complexity and abstraction</title><link href="https://www.wardle.org/strategy/2020/06/23/complexity.html" rel="alternate" type="text/html" title="Complexity and abstraction" /><published>2020-06-23T10:09:09+01:00</published><updated>2020-06-23T10:09:09+01:00</updated><id>https://www.wardle.org/strategy/2020/06/23/complexity</id><content type="html" xml:base="https://www.wardle.org/strategy/2020/06/23/complexity.html">&lt;p&gt;Complexity in health and care software derives from:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the inherent complexity of the domain&lt;/li&gt;
  &lt;li&gt;legacy software and legacy architecture&lt;/li&gt;
  &lt;li&gt;organisation-centricity&lt;/li&gt;
  &lt;li&gt;who is paying and procurement rules around those payments&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When we’re trying to solve problems in health and care, a large part of the work is actually in dealing with complexity that we’ve inherited; it is complexity largely of our own making.&lt;/p&gt;

&lt;p&gt;A common way to managing complexity is the process of &lt;em&gt;abstraction&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;It’s about time that we had a compelling developer platform that abstracted some of the complexity of health and care data and services so that we can focus on managing the complexity of our domain: health and care.&lt;/p&gt;

&lt;p&gt;And that’s why platform-thinking is fundamental to building the next generation of health and care software. We need to “do the hard work to make it simple.”&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">Complexity in health and care software derives from:</summary></entry><entry><title type="html">There’s more than one side to every story</title><link href="https://www.wardle.org/strategy/2020/06/21/more-than-one-side.html" rel="alternate" type="text/html" title="There’s more than one side to every story" /><published>2020-06-21T20:00:00+01:00</published><updated>2020-06-21T20:00:00+01:00</updated><id>https://www.wardle.org/strategy/2020/06/21/more-than-one-side</id><content type="html" xml:base="https://www.wardle.org/strategy/2020/06/21/more-than-one-side.html">&lt;p&gt;Historically, data capture in health and care has been driven by the requirements of central data returns, permitting management and government to examine and monitor a specific health policy area. Information standards are very important in ensuring organisations feed the right information back in the right format so that the data are interpretable.&lt;/p&gt;

&lt;p&gt;An example of a data set is the emergency unit data set ( &lt;a href=&quot;https://digital.nhs.uk/data-and-information/data-collections-and-data-sets/data-sets/emergency-care-data-set-ecds&quot;&gt;NHS England&lt;/a&gt; and  &lt;a href=&quot;http://www.datadictionary.wales.nhs.uk/#!WordDocuments/emergencydepartmentdatasetedds.htm&quot;&gt;NHS Wales&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;All organisations are expected to return data on attendances at the emergency department including diagnostic category, level of triage (urgency) and onward destination.&lt;/p&gt;

&lt;p&gt;There’s a similar requirement for &lt;a href=&quot;http://www.datadictionary.wales.nhs.uk/index.html#!WordDocuments/outpatientdatasetopds.htm&quot;&gt;outpatient clinics.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Knowing the format of the data to be returned, how it is to be coded and how and when to return data are all important but there are also rules and definitions which must be followed. That’s the job of information standards and therefore, historically, the principal customer of information standards has been central data reporting. Those users have requested standards, they’re discussed and then set, usually by publishing a &lt;a href=&quot;http://www.nwisinformationstandards.wales.nhs.uk/data-set-change-notices.&quot;&gt;‘data standards change notice’&lt;/a&gt;. A new government policy or a problem affecting policy teams results in a new requirement for data reporting with either a new information standard or an update to an existing standard.&lt;/p&gt;

&lt;p&gt;It’s easy to see the consequences in clinical practice. There are byzantine rules relating to my outpatient clinics to which I am only dimly aware and forms to fill in that have little to do with the patient in front of me and everything to do with the requirements of the wider system. They’re important, but they’re but one facet of the clinical encounter. In many situations there is considerable overlap with the needs of direct care and that of management, at least semantically, but sometimes the categories are simply too coarse or the rules don’t keep up with change.&lt;/p&gt;

&lt;p&gt;For example, this is from the outpatient dataset definition:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“
	An appointment cannot be counted unless the patient actually attends
“
&lt;a href=&quot;http://www.datadictionary.wales.nhs.uk/index.html#!WordDocuments/outpatientattendances.htm&quot;&gt;http://www.datadictionary.wales.nhs.uk/index.html#!WordDocuments/outpatientattendances.htm&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So what has happened to the telephone appointments I’ve done for years?&lt;/p&gt;

&lt;p&gt;Well, fortunately, an update has been made &lt;a href=&quot;http://www.nwisinformationstandards.wales.nhs.uk/sitesplus/documents/299/20200206%2DDSCN%202020%2001%2DOutpatient%20Virtual%20Activity%2DPhase%20One%2Dv1%2D1.pdf&quot;&gt;this year&lt;/a&gt; so that virtual reviews are now part of the submission, with three categories - ‘face-to-face’, ‘virtual with patient contact’, and ‘virtual with no patient contact’. Information technology teams will be adding these data fields to administrative systems so that these returns can be made in this altered form.&lt;/p&gt;

&lt;p&gt;Central data requirements are important and valuable in running the wider health system but it is commonly the case that those requirements define the operational requirements and design of clinical systems instead of being recognised as simply another prism through which to view the patient record. It’s important when designing clinical systems to understand the uses of data, for all needs.&lt;/p&gt;

&lt;p&gt;The the main issues with central data requirements as the basis to build clinical software are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;they tend to result in the use of classification systems; using taxonomies makes it easier to perform analysis but they are a poor fit for the ambiguity and complexity of the real world&lt;/li&gt;
  &lt;li&gt;they use bespoke, proprietary value-sets limiting semantic interoperability if they are used&lt;/li&gt;
  &lt;li&gt;they can end up defining operational system data requirements&lt;/li&gt;
  &lt;li&gt;they usually expect tabular data to make it easier to analyse but health and care data is rarely tabular. Patients have more than one diagnosis.&lt;/li&gt;
  &lt;li&gt;the rules for central data propagate into clinical systems creating brittleness; it makes changing those rules difficult and skews our ability to use historic data acquired using different rules. How we analyse outpatient attendances over time will be difficult if telephone appointments were not returned before 2020?&lt;/li&gt;
  &lt;li&gt;the brittleness and lack of adaptability infects other systems that need to interoperate, because without ontological defined value lists, its very difficult indeed to consume data from other systems without constant discussion between the teams that run different systems, creating coupling and reducing our ability to develop software-at-pace in parallel.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The answers to these issues are simple:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;we need clinical data that is granular and specific and that models the real-world and adapts to how it changes.&lt;/li&gt;
  &lt;li&gt;we should use ontologies and not taxonomies for data capture&lt;/li&gt;
  &lt;li&gt;we need tools to turn granular, specific data into categorical, easy-to-process data for central returns, policy-makers and other analytics&lt;/li&gt;
  &lt;li&gt;we should apply rules and delay losing granularity as late as possible in our analytics, and apply them dynamically and declaratively while categorising data flexibly in response to changing requirements.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;specialty-codes&quot;&gt;Specialty codes&lt;/h1&gt;

&lt;p&gt;It has been suggested that a clinical system use a list of specialties using the “standard” as defined for reporting purposes, the &lt;a href=&quot;http://www.datadictionary.wales.nhs.uk/index.html#!WordDocuments/mainspecialtyconsultant.htm&quot;&gt;“main specialty” (it used to be called the ‘treatment function code’)&lt;/a&gt;. That’s attractive, because that part of our data won’t need any transformation in order to submit those data.&lt;/p&gt;

&lt;p&gt;But what about our clinical users? We’d like to help them find the information that they want, at the right time, and that means providing them tools to search perhaps thousands of clinical documents. While coding specialty to the &lt;em&gt;reporting&lt;/em&gt; standard is better than free text, we’re losing granularity.&lt;/p&gt;

&lt;p&gt;Instead, the use of an ontology, such as SNOMED CT, can solve our many needs.&lt;/p&gt;

&lt;p&gt;For clinical users, using an ontology means we can filter for ‘neurology’ and show ‘neurology’ letters and also ‘paediatric neurology’, while the latter will also show up in our ‘paediatric’ filter, because the ontology is more than a list of codes, as it represents the &lt;em&gt;relationships&lt;/em&gt; between those codes. Our software can use those declared relationships to extract meaning from codes, even for codes that didn’t exist when that software was written.&lt;/p&gt;

&lt;p&gt;Likewise, we can exchange information with other systems that do not keep up with the DSCN and we don’t need to keep orchestrating updates to the ‘fixed’ specialty list across all components, whether developed in-house or provided by third-parties, because using an ontology provides dynamism and adaptability. I can write software now that can process specialty codes not defined at the time I wrote the code.  We create the right conditions to decouple our systems and create inherent flexibility and adaptability.&lt;/p&gt;

&lt;p&gt;Decoupling is important. It may be that a new departmental system already supports the DSCN; after all the list is defined legally by the General and Specialist Medical Practice (Education, Training and Qualifications) Order 2003 and European Primary and Specialist Dental Qualifications Regulations 1998, but if not, that commercial partner will need to implement those codes. It can make procurement more difficult and more costly and fossilises the interactions between systems.&lt;/p&gt;

&lt;h1 id=&quot;the-single-patient-record&quot;&gt;The single patient record.&lt;/h1&gt;

&lt;p&gt;Our aspiration should be the single patient record, a multifaceted longitudinal structured record.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/prisms-record.png&quot; alt=&quot;Prisms Record&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We must be clear that such a record can be used for a variety of purposes such as direct care, service management and improvement as well as research with the appropriate consent. The best way to design such a record is using highly granular, clinically-meaningful approach to data modelling based on open standards.&lt;/p&gt;

&lt;p&gt;But I think it’s a very good idea to imagine multiple prisms through which we can see and understand that record.&lt;/p&gt;

&lt;p&gt;Those prisms are dependent on your processes, workflow and needs. A patient viewing their own record needs a different prism than a civil servant modelling future emergency unit attendances. We should be annotating the results of investigation or groups of investigations with our clinical interpretation in the context of the problem at hand, just like we do via a letter at the moment. That data will need to be prioritised within the patient prism.&lt;/p&gt;

&lt;p&gt;Similarly, a radiographer about to perform an MRI scan needs a different prism than a neurologist in a video consultation with a patient and family members.&lt;/p&gt;

&lt;p&gt;Same data, different prisms. Different focus.&lt;/p&gt;

&lt;p&gt;In the future, I hope that adaptable focus will help me identify what’s important and what’s not, but for now, ask any professional and they’ll tell you what’s the critical information they need in a given context.&lt;/p&gt;

&lt;p&gt;So there’s always more than one side to every story.&lt;/p&gt;

&lt;h1 id=&quot;so-what&quot;&gt;So what?&lt;/h1&gt;

&lt;p&gt;So that’s why we need data and tools that make it easy to:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Model the real world, capturing granular, specific, meaningful information&lt;/li&gt;
  &lt;li&gt;Turn such granular information into categorical information for ease of analytics&lt;/li&gt;
  &lt;li&gt;Resolve, infer meaning from and map identifiers between different systems, classifications and ontologies&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And that’s why I’ve been building open-source software to solve these problems:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/wardle/go-terminology&quot;&gt;go-terminology&lt;/a&gt; : If I make a diagnosis of acute disseminated encephalomyelitis (ADEM), I need my clinical system to record that specific granular diagnosis but I also need tools need to be able to categorise that diagnosis without manual intervention for service level analytics. go-terminology provides both of those capabilities using SNOMED-CT, an ontology.&lt;/li&gt;
  &lt;li&gt;janus : a data-driven dynamic identifier resolution and mapping application programming interface / knowledge graph navigator.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/wardle/concierge&quot;&gt;concierge&lt;/a&gt; : a backend to identifier resolution and mapping services providing integration and abstractions with multiple NHS Wales services including multiple patient administrative systems, the national enterprise master patient index, the staff directory, staff authentication services and document repositories&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/wardle/clods&quot;&gt;clods&lt;/a&gt; : a backend identifier resolution/mapping service for UK NHS organisational data services and other reference data including the NHS postcode database and general practitioners across the UK&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Together, these services can dynamically resolve and map between different identifier systems helping software (and humans) ‘make sense’ of health and care data.&lt;/p&gt;

&lt;p&gt;It’s why I’ve been advocating this approach within health and care in Wales for a long time.&lt;/p&gt;

&lt;p&gt;Mark&lt;/p&gt;

&lt;p&gt;
  &lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Janus1.JPG/320px-Janus1.JPG&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;PS. Janus is the Roman god of beginnings, gates, transitions, time, duality, doorways, passages, and endings.&lt;/p&gt;

&lt;p&gt;PPS. When will clinical systems build a source of open data relating to how users interact with their software in a given context in a given patient with the problems, past and scheduled events, medication known in order to learn the &lt;em&gt;information value&lt;/em&gt; of our health and care data for decision-making? That kind of learning is just another prism, of course.&lt;/p&gt;</content><author><name></name></author><summary type="html">Historically, data capture in health and care has been driven by the requirements of central data returns, permitting management and government to examine and monitor a specific health policy area. Information standards are very important in ensuring organisations feed the right information back in the right format so that the data are interpretable.</summary></entry><entry><title type="html">The semantic patient</title><link href="https://www.wardle.org/strategy/2020/06/03/ontological-medical-record.html" rel="alternate" type="text/html" title="The semantic patient" /><published>2020-06-03T10:00:00+01:00</published><updated>2020-06-03T10:00:00+01:00</updated><id>https://www.wardle.org/strategy/2020/06/03/ontological-medical-record</id><content type="html" xml:base="https://www.wardle.org/strategy/2020/06/03/ontological-medical-record.html">&lt;p&gt;I’ve been off work, off blogging and off Twitter due to COVID-19 but fortunately now back to full health and thought I’d write up some notes about what I’ve been doing in my spare time outside of my day job doing telephone clinics and COVID ward duties.&lt;/p&gt;

&lt;h1 id=&quot;lightweight-applications&quot;&gt;Lightweight applications&lt;/h1&gt;

&lt;p&gt;The first is experimenting with lightweight mobile and web-based applications that provide a compelling way for users to interact with health and care data. Separating applications from the data is important, and web-based technologies have matured sufficiently so that one can build a desktop-class user experience in the browser.&lt;/p&gt;

&lt;p&gt;I built a proof-of-concept system to record and display electronic observations (pulse, blood pressure etc) and calculate national early warning scores for escalation. It integrates with existing NHS systems for user login and patient lookup and was about three days work I guess, but spread out over a few weeks. It dynamically generates an SVG NEWS chart, which looks pretty on iPads or on whiteboards and it was my first ever clojure application. It’s all dynamic and one can scroll to view results over time, and I’ve built SNOMED CT autocompletion widgets and am planning ward round problem lists and actions/ordering.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/news-chart.png&quot; alt=&quot;News Chart&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can also see a &lt;a href=&quot;https://www.youtube.com/watch?v=_2wRBr0r_wk&quot;&gt;video of the application&lt;/a&gt; running.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/wardle/patientcare-ward/blob/master/src/cljs/pc_ward/news_chart.cljs&quot;&gt;source code is open&lt;/a&gt; as well.&lt;/p&gt;

&lt;h1 id=&quot;data-dynamism-and-ontologies-in-health-and-care&quot;&gt;Data, dynamism and ontologies in health and care&lt;/h1&gt;

&lt;p&gt;But my main health informatics work has been about linked and self-describing data.&lt;/p&gt;

&lt;p&gt;Our ability to write software is critical in building a learning health system, but it is very easy to build rigid, hierarchical, poorly adaptable and brittle systems - and that is normally the result if one tries to solve problems through the lens of a single application or portal, instead of focusing on data and an architecture that enables the recording and processing of those data in order to inform care.&lt;/p&gt;

&lt;p&gt;We must strive to build health and care systems without walls, and create effective tools for health and care organisations, and citizens, to manage, interact, plan and undertake care. Technology is critical in creating health services that work safely and effectively for patients and their carers. In banking we see technology companies entering the industry, and established banks trying to become technology companies; they have recognised the critical need to harness technology to improve their services.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“Health and care needs to learn how to deliver software : reliably, safely, reproducibly, at scale and to ensure ongoing monitoring, evaluation and continuous improvement.”&lt;/p&gt;

  &lt;p&gt;https://wardle.org/strategy/2019/09/22/health-technology.html&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;We should be building a technical architecture for health and care that is safe, responsive and effective. We must look at how we can stream data independent of individual applications and make use of real-time analytics and advances in technology to best inform and improve care, both for an individual and cohorts of citizens. We cannot achieve our goals unless we think about health and care as it truly is, a symphonic orchestra with many players, all needing the right information at the right time, and all working together in concert. They play different instruments, and have different roles, but they work &lt;em&gt;together&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;It is naive to think that we can have the same software running in critical care, on a patient’s own devices, in a nursing home, in the outpatient clinic, whether virtual or in-person, in the emergency department, in the GP surgery, in surgical theatres or on the ward. User-facing applications must be focused on improving process and workflow and so are absolutely dependent on the clinical context in which they will operate. There are commonalities, of course, but truing to make change using top-down, command and control management and multi-million pound programmes is not the way to improve the working of complex adaptive systems. We have only started the journey on how to make computers effective in medicine.&lt;/p&gt;

&lt;p&gt;One of the best ways of making valuable software is to break-down the problems we are trying to solve into smaller problems, each of which one person, or one team can conceive of and solve in one go. It’s one of the reasons why I like domain-driven design and understanding the importance of scope, so that I can focus on the problem at hand, and decouple the component parts of the wider system.&lt;/p&gt;

&lt;p&gt;A logical consequence of such an approach is of &lt;em&gt;abstraction&lt;/em&gt; so that the other parts with which we interact are abstract; I don’t need to know how you are storing that clinical document or exactly what happens after I send those data but I do need to have a set of contracts, covering the technical, legal and regulatory matters that define our interactions. In essence, those contracts, including the &lt;em&gt;technical standards&lt;/em&gt; that define how those interactions proceed, can be a powerful force for speeding up our developments which can now happen in parallel and limit the need for constant interaction between teams.&lt;/p&gt;

&lt;p&gt;But abstraction also should extend to the &lt;em&gt;meaningful data&lt;/em&gt; that we so depend upon to care for individual patients, manage and improve our services, and continuously improve and learn.&lt;/p&gt;

&lt;p&gt;Having meaningful data means that we can make sense of that data - we can derive its meaning. It therefore follows that not only do we need to be able to exchange information at a technical level, via technical interoperability, but we need shared understanding of &lt;em&gt;meaning&lt;/em&gt; via semantic interoperability.&lt;/p&gt;

&lt;p&gt;That’s not to say exchanging unstructured documents isn’t valuable. It is, but it only goes so far. I can’t do much as much as I’d like with a binary PDF document.&lt;/p&gt;

&lt;p&gt;The problem with health and care data is that is hard to interpret out of context. If your pulse is 150/minute, is that a problem? Yes if you are asleep but no if you are running or playing tennis!&lt;/p&gt;

&lt;p&gt;And that’s why health and care data needs &lt;em&gt;context&lt;/em&gt; in order to make data meaningful. We need a shared understanding of a wider &lt;em&gt;information model&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Those measurements such as pulse, blood pressure and pain scores need to anchored within a context - my neurology clinic for that new patient appointment in that clinic suite, in that unit, in that site, for that organisation, as part of that clinical pathway.&lt;/p&gt;

&lt;h2 id=&quot;meaningful-data-using-persistent-meaningful-identifiers&quot;&gt;Meaningful data, using persistent meaningful identifiers&lt;/h2&gt;

&lt;p&gt;But how do we represent health and care data when it is complex and ever-changing? New diagnostic tests and new diagnostic entities are added to the corpus of our knowledge all of the time, and previously known “facts” have changed or replaced with our ever greater understanding?&lt;/p&gt;

&lt;p&gt;But such changes don’t only apply to medical knowledge, but also apply to the very organisations within which we work! I used to work for Cardiff and Vale NHS Trust, but that organisation no longer exists and instead I work for Cardiff and Vale University Local Health Board! A core trainee will be a consultant in a few years time. Change is constant.&lt;/p&gt;

&lt;p&gt;Here is a screenshot from one of the NHS Wales’ national portal (there are multiple instances each which gives the same view of sometimes different data). It provides a faceted search across documents, by specialty, but because the team didn’t adopt any standard for the coding of specialty, “Neurology” is different to “NEUROLOGY” and “NEUROLOGY EPILEPSY” its own specialty but isn’t included in either of the other two.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wcp-specialties.png&quot; alt=&quot;Wcp Specialties&quot; /&gt;&lt;/p&gt;

&lt;p&gt;When I’m trying to care for a patient, I have to laboriously click on each in turn in order to find the information I want, simply because the designers of the service did not pick a useful vocabulary of terms to which documents could be tagged.&lt;/p&gt;

&lt;p&gt;One of the ways we suggested avoiding this situation right at the beginning was to use an ontology to describe the specialty, such as SNOMED-CT, which provides a flexible, hierarchical and nested structure so that, for example, the epilepsy subspecialty is actually a subtype of the wider neurological subspecialty. That would have meant we could let users filter for “Neurology” and actually include subspecialties such as “paediatric neurology” without any great computational difficulty. I’m hoping this application will adopt this, although it seems to have taken many years and still it hasn’t changed as of today at least. I live in hope.&lt;/p&gt;

&lt;p&gt;SNOMED CT, like many other ontologies, has multiple hierarchies, which means that it can model complex nesting, such as ‘bacterial meningitis’ being both a ‘neurological disease’ and an ‘infectious disease’. In addition, its identifiers are persistent. Even if ‘Wegener’s Granulomatosis’ is no longer the preferred label for that disease entity, the model &lt;em&gt;explicitly&lt;/em&gt; manages change over time. There are mechanisms for making change, although it is a great shame that the distribution is not published under an open licence.&lt;/p&gt;

&lt;p&gt;This idea of persistent identifiers is not new but such an approach is essential when we are dealing with decentralised, decoupled systems in which we need to record a reference to information in another system. You can think of persistent identifiers as analogous to ‘foreign keys’ in a relational database table.&lt;/p&gt;

&lt;p&gt;In ontologies, we can also relate one identifier with another as a ‘triple’. For example, in SNOMED CT, we have&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/snomed-relationship-structure.png&quot; alt=&quot;Snomed Relationship Structure&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We can see that these triples help us build a directed graph that we can navigate and answer questions like, “Is this disorder a neurological disorder?” without difficulty.&lt;/p&gt;

&lt;p&gt;Commonly, we can use identifiers that are a tuple of a namespace and an identifier. For example, we can create a SNOMED CT expression using “http://snomed.info/sct” and “24700007”, which together represent the concept of ‘multiple sclerosis’ and can therefore be computed as such.&lt;/p&gt;

&lt;p&gt;HL7 have been doing this for years, with “object identifiers” or OIDS. In fact, the HL7 UK OID for representing health and care organisations uses the OID “2.16.840.1.113883.2.1.3.2.4.18.48” and these OIDs are published via  &lt;a href=&quot;https://digital.nhs.uk/services/organisation-data-service/guidance-for-developers/organisation-endpoint&quot;&gt;Organisational Data Services (ODS) API endpoint&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here is a data representation of the University Hospital of Wales: &lt;a href=&quot;https://directory.spineservices.nhs.uk/ORD/2-0-0/organisations/7A4BV&quot;&gt;https://directory.spineservices.nhs.uk/ORD/2-0-0/organisations/7A4BV&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;HL7 FHIR uses this identifier model extensively; &lt;a href=&quot;https://www.hl7.org/fhir/datatypes.html#Identifier&quot;&gt;its model&lt;/a&gt; contains a namespace and a value, together with some additional metadata, which in hindsight should be a function of the resolution of that identifier rather than in what is essentially a foreign key.&lt;/p&gt;

&lt;p&gt;Namespaces can be arbitrary values such as an OID, or a &lt;a href=&quot;https://en.wikipedia.org/wiki/Uniform_Resource_Identifier&quot;&gt;URI (uniform resource identifier)&lt;/a&gt;, and while useful, much like an ISBN for a book, they do not actually provide a way to identify the location of the resource that they refer to. Resolution of the value within that namespace is left to you.&lt;/p&gt;

&lt;p&gt;Namespaces can also be actual URLs and so can be resolved simply by accessing whatever information can be found at that web address, but this isn’t always the case!&lt;/p&gt;

&lt;p&gt;Likewise, the same resource, such an organisation, might be represented by a number of different, and yet by definition, equivalent, identifiers.&lt;/p&gt;

&lt;p&gt;For example, the University Hospital of Wales might be represented by&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;https://directory.spineservices.nhs.uk/ORD/2-0-0/organisations&lt;/td&gt;
          &lt;td&gt;7A4BV&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;2.16.840.1.113883.2.1.3.2.4.18.48&lt;/td&gt;
          &lt;td&gt;7A4BV&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;urn:oid:2.16.840.1.113883.2.1.3.2.4.18.48&lt;/td&gt;
          &lt;td&gt;7A4BV&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;urn:oid:2.16.840.1.113883.2.1.3.2.4.18.48&lt;/td&gt;
          &lt;td&gt;RWMBV&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Similarly, some identifiers in truly different namespaces actually point to the same ‘concept’, whether that be a diagnostic term (e.g. Read code for multiple sclerosis is, semantically, the same as a SNOMED CT code for multiple sclerosis) or a staff identifier should resolve, at some level, to the same ‘person’ as their GMC code.&lt;/p&gt;

&lt;p&gt;Resolution, mapping and the testing of equivalence of identifiers is therefore a first-class problem in our domain, and should be modelled, and managed as such.&lt;/p&gt;

&lt;h2 id=&quot;dynamic-and-federated-resolution-of-identifiers&quot;&gt;Dynamic and federated resolution of identifiers&lt;/h2&gt;

&lt;p&gt;We can overcome the challenge of identifier resolution, mapping and equivalence by making identifier namespaces an ontology by providing open data and open tools in order to ‘make sense’ of arbitrary identifiers within our domain and providing dynamic, flexible and adaptable mechanisms to extend and federate. This is akin to the domain name service ‘DNS’ of the Internet, which maps arbitrary textual domain names to their IP addresses.&lt;/p&gt;

&lt;p&gt;These ideas led to me to build &lt;em&gt;concierge&lt;/em&gt;, a set of simple ‘identifier resolvers’ that cover a set of practical examples - for my case, resolution of staff and patient identity, organisational data services and terminologies. The source code is available on github: &lt;a href=&quot;https://github.com/wardle/concierge&quot;&gt;https://github.com/wardle/concierge&lt;/a&gt;. I used it in my e-observation toy demonstration above for user login, fetching staff information (name, job title etc) and patient search/lookup. It is incomplete, but a useful exercise. I can now conceive of a single ‘Patient’ resource that uses information from multiple sources such as local patient administrative systems and the national enterprise master patient index to generate a unified contact telephone list, for example. I plan to abstract federation, so that client applications can start from an organisation, drill down to a site, and then drill down even further onto units, wards and even individual beds, with data derived from &lt;em&gt;different&lt;/em&gt; systems for the different levels of granularity, but that complexity is hidden from the client user, and client application acting on their behalf.&lt;/p&gt;

&lt;p&gt;Similarly, it is easy to consider how a single “staff” search/identifier resolution service might work to federate and abstract information from multiple disparate sources ; the staff directory, the electronic staff record, the on-call rotas, team definitions etc. There are many different ways to federate; the focus is to abstract underlying complexity for clients of that service.&lt;/p&gt;

&lt;h2 id=&quot;but-what-about-shared-models&quot;&gt;But what about shared models?&lt;/h2&gt;

&lt;p&gt;So it’s easy to see how we might create a tidy facade to hide the underlying complexity of our existing health and care infrastructure using first-class identifiers for different resources. For example, we could resolve and reify a staff member and that data model could identifiers representing the organisations and the sites in which they work, or the clinics for which they are responsible, which themselves are linked to organisations and sites. Indeed, it’s easy to see those relationships as forming a graph, not only within a single ontology but between ontologies, which I’ll discuss shortly.&lt;/p&gt;

&lt;p&gt;The problem is that not only do we need a shared understanding of identifiers, but we also need a shared understanding of the data models in which they are used. It is not sufficient to have a flat list of other identifiers within, say, a member of staff’s record because that would be &lt;em&gt;meaningless&lt;/em&gt;; we need more context about how one relates to another.&lt;/p&gt;

&lt;p&gt;Answering the question “does this patient have a type of neurological disease?” and getting back an answer “yes” also means that we need to be able to resolve an identifier &lt;em&gt;in context&lt;/em&gt; in order to derive meaning, because that diagnosis of “Parkinson’s disease” might be listed as part of a family history and not in the patient’s personal problem list.&lt;/p&gt;

&lt;p&gt;Others have solved this in different ways, and have even used different approaches within the same wider model. For example, the &lt;a href=&quot;https://www.hl7.org/fhir/patient.html&quot;&gt;HL7 FHIR “Patient”&lt;/a&gt; model defines a type of resource representing a patient, with attributes such as name, gender and birth date. HL7 uses a more flexible, dynamic system for other models based on identifiers such as that for observations. Here is an example for &lt;a href=&quot;https://www.hl7.org/fhir/observation-example-f001-glucose.json.html&quot;&gt;recording glucose&lt;/a&gt; which, rather than hard-coding the test and the value of the result, uses namespaced codes and flexible values with coding for units. We can see that in general, the class is given prominence (Patient class, Observation class) and the attributes serve that class.&lt;/p&gt;

&lt;p&gt;Likewise, in openEHR, named archetypes such as &lt;a href=&quot;https://ckm.openehr.org/ckm/archetypes/1013.1.4295&quot;&gt;pulse&lt;/a&gt; and &lt;a href=&quot;https://ckm.openehr.org/ckm/archetypes/1013.1.3574&quot;&gt;blood pressure&lt;/a&gt; can be composed into wider models for operational use, and these archetypes fit into a wider and more fixed information model as part of two-level modelling. For example, the blood pressure archetype contains a value for systolic blood pressure and a value for diastolic blood pressure, together with some metadata.&lt;/p&gt;

&lt;p&gt;Neither the HL7 FHIR or openEHR approaches avoid the need for close collaboration between disparate health economies because unless one is not planning on actually using the data stored within the models, at some point one needs to write code that can consume and process and extract meaning from those data. In general, software developers compile those data definitions into classes to permit that processing.&lt;/p&gt;

&lt;p&gt;If you’re going to exchange medication data, at some point you need to come to a decision about a shared model for recording, storing and exchanging that information, whether that exchange is simply from a server to a client or between a critical care software system and the hospital pharmacy.&lt;/p&gt;

&lt;h2 id=&quot;class-orientated-vs-attribute-orientated&quot;&gt;Class-orientated vs attribute-orientated&lt;/h2&gt;

&lt;p&gt;In object-orientated software systems, data are usually coerced into objects of certain classes, and in most computer languages, those classes can be hierarchical so that for example a ‘Car’ ‘is-a’ type of ‘Vehicle’. There is usually a pattern of inheritance so that behaviour and sometimes data can be inherited from the parent class. For example, all vehicles might have a ‘colour’ property.&lt;/p&gt;

&lt;p&gt;It’s a seductive approach, as one can build a model of reality and use it to solve problems by modelling data and behaviour as interactions between objects. You think in terms of objects, those objects may have properties, but you almost always have to define how those objects fit into your wider hierarchy when you create them. The hierarchies of your object classes are usually quite fixed.&lt;/p&gt;

&lt;p&gt;Both openEHR and HL7 FHIR use a class-orientated approach to most of their data.&lt;/p&gt;

&lt;p&gt;It’s seductive, but it can be brittle. It is generally poorly extensible, poorly dynamic and struggles to adapt not only to changing circumstances but even to different applications across a wider health enterprise, In some cases, these aggregates of attributes are grouped only for context and not for semantics.&lt;/p&gt;

&lt;p&gt;HL7 FHIR adopts a modelling approach in which the basic class definitions aim for a common denominator of fields and permit “extensions” for local definitions while using profiling to make very general models more specific by, for example, defining what can be in a value set or which terminology should be used for a specific property.&lt;/p&gt;

&lt;p&gt;openEHR adopts a different approach in which modellers attempt to define all of the possible attributes within the model, and use optionality extensively; for example it would be unusual to use all of the attributes in many models.&lt;/p&gt;

&lt;p&gt;HL7 FHIR is therefore a ‘meta-standard’ and what really happens is that we as a community build multiple versions of the same ‘standard’ - see the &lt;a href=&quot;https://www.hl7.org/fhir/us/core/&quot;&gt;US CORE release&lt;/a&gt; and there is proliferation of just-slightly-different profiles for different scenarios within NHS England.&lt;/p&gt;

&lt;h2 id=&quot;promoting-first-class-namespaced-attributes&quot;&gt;Promoting first-class, namespaced attributes&lt;/h2&gt;

&lt;p&gt;But haven’t we been talking about ontologies in which we can associate arbitrary properties in triples, and change those over time? For example, work on the ‘semantic’ web led to the development of &lt;a href=&quot;https://www.w3.org/RDF/&quot;&gt;RDF (Resource Description Framework)&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“RDF is a standard model for data interchange on the Web. RDF has features that facilitate data merging even if the underlying schemas differ, and it specifically supports the evolution of schemas over time without requiring all the data consumers to be changed.”&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;https://www.w3.org/RDF/&quot;&gt;https://www.w3.org/RDF/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Now people have been talking about using RDF in healthcare for many years, but such an approach has not gained traction for a variety of reasons, including inadequate open-source tooling, little industry interest, perceived complexity, ownership of different ontologies by different groups, its design predating interest in graph databases, lack of definitions on value types and probably most importantly, a lack of temporal associations (timestamping) and change semantics.&lt;/p&gt;

&lt;p&gt;But if we can solve those issues, it is quite easy to see how we can compose first-class attributes together into a semantic whole to represent health data in context. Just as in modern, more functional programming languages, elevating properties to first-class concepts within our models gives us powerful runtime polymorphism and permits independent extensions of types, protocols and implementations within and across health data.&lt;/p&gt;

&lt;p&gt;But such an approach requires several important dependencies:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Robust shared tools for the resolution, mapping and logical comparison/equivalence testing of persistent identifiers&lt;/li&gt;
  &lt;li&gt;A move away from CRUD (create-read-update-delete) semantics towards different semantics for write and read operations. This has important regulatory benefits as well.&lt;/li&gt;
  &lt;li&gt;A move to architectural designs that focus on immutable data and &lt;em&gt;change&lt;/em&gt; as a first-class part of the model&lt;/li&gt;
  &lt;li&gt;Denormalisation with snapshots of the dereferenced values and time as a first-class attribute, so that our software doesn’t show data recorded by me in 1999 using my current job title but my job title at that time.&lt;/li&gt;
  &lt;li&gt;Clinical modelling using finely-grained archetypes representing a single attribute, properly namespaced and dynamically grouped into other less granular archetypes.&lt;/li&gt;
  &lt;li&gt;Tools to provide automatic coercion of legacy “object-orientated” classes into bundles of first-class attributes.&lt;/li&gt;
  &lt;li&gt;Ontologies describing the relationships between properties, even between different ontologies.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Such an approach also means we can support interoperability between different information models in our software systems, and build automated tools that take data from different systems and generate context-appropriate semantic data. In this world, we could make&lt;/p&gt;

&lt;blockquote&gt;
  &lt;table&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;https://openehr.org/Id/observation/blood_pressure/v2&lt;/td&gt;
        &lt;td&gt;systolic&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/blockquote&gt;

&lt;p&gt;equivalent to&lt;/p&gt;

&lt;blockquote&gt;
  &lt;table&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;http://snomed.info/sct&lt;/td&gt;
        &lt;td&gt;271649006&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/blockquote&gt;

&lt;p&gt;and equivalent to&lt;/p&gt;

&lt;blockquote&gt;
  &lt;table&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;http://loinc.org&lt;/td&gt;
        &lt;td&gt;8480-6&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/blockquote&gt;

&lt;p&gt;Unfortunately, the fact that the latter two are proprietary and need licensing is to our collective detriment, and many operational openEHR implementations are closed-source.&lt;/p&gt;

&lt;p&gt;But it is easy to see how a class-based model results in an explosion of classes. For example, it’s not difficult to see how the &lt;a href=&quot;http://www.hl7.org/fhir/datatypes-definitions.html#Address.line&quot;&gt;first line of an address in a FHIR address class&lt;/a&gt; is semantically the same in a &lt;a href=&quot;https://ckm.apperta.org/ckm/archetypes/1051.32.573&quot;&gt;“UK” address from openEHR&lt;/a&gt; which is the same as in a &lt;a href=&quot;https://ckm.apperta.org/ckm/archetypes/1051.32.203&quot;&gt;Scottish address from openEHR&lt;/a&gt; which is the same as in an ISO22220 based address (also from openEHR - &lt;a href=&quot;https://ckm.openehr.org/ckm/archetypes/1013.1.484&quot;&gt;https://ckm.openehr.org/ckm/archetypes/1013.1.484&lt;/a&gt; and all share the semantics of the &lt;a href=&quot;https://www.w3.org/TR/vcard-rdf/&quot;&gt;vCard ontology ‘address’&lt;/a&gt; even if the attributes might have different names.&lt;/p&gt;

&lt;p&gt;Instead, of this duplication of classes, we can define ontologies that define the relationships between those first-class names and provide tools to arbitrarily resolve those identifiers. That means resolving “http://www.w3.org/2006/vcard/ns#street-address” can return the right semantic data irrespective of whether the source information is in HL7 v2, HL7 FHIR, or one of the many openEHR address archetypes. Ontologies can be used to federate attributes from different models.&lt;/p&gt;

&lt;p&gt;One can write software to process the fully open openEHR archetype definitions and bind properties to first-class namespaced attributes and many definitions already have bindings to other definitions in LOINC or SNOMED CT. Both the openEHR and HL7 FHIR communities have done some great modelling work, including documenting the semantics of their types and attributes, and its possible to build tools to process those definitions.&lt;/p&gt;

&lt;h1 id=&quot;grouping-first-class-attributes-into-semantically-meaningful-entities&quot;&gt;Grouping first-class attributes into semantically meaningful entities&lt;/h1&gt;

&lt;p&gt;Just because we make attributes first-class in our models, it doesn’t mean that we can’t bundle them together into something that is itself meaningful. But rather than thinking in terms of classes, and the attributes are simply part of those classes, our attributes are first-class and might be arbitrarily grouped into what are essentially nested collections and be derived either directly from source information or derived by understanding how those properties relate to one another semantically. Grouping is based on semantics and not necessarily only contextual differences.&lt;/p&gt;

&lt;p&gt;In addition, our definitions of an attribute must be associated with a schema definition, so that we have information about the value type(s) permitted for that property. Other semantics might include cardinality and uniqueness, for example, depending on the property in question. But object-orientated approaches conflate the specifications of data with the data itself, while in reality these are orthogonal concepts. Those specifications define the overall “shape” of our data.&lt;/p&gt;

&lt;p&gt;It’s fairly easy to see how schema definitions could themselves be defined ontologically, through entity/attribute/value (or subject/predicate/object triples in RDF parlance) and so permit runtime evolution of health data schemas and importantly, an ability to provide a unified view from data sourced from multiple disparate systems. It provides a true abstraction and could present data from HL7 FHIR, HL7v2 and openEHR in the same way and so permit computability across different systems, while also providing a persistence mechanism via an entity-attribute-value store for native applications and services, and a way of generating computable properties in a functional style.&lt;/p&gt;

&lt;h2 id=&quot;hierarchical-databases-graphs-and-graph-queries&quot;&gt;Hierarchical databases, graphs and graph queries&lt;/h2&gt;

&lt;p&gt;It is unsurprising that early medical databases, some still used today, model healthcare data in a hierarchy. What this means is that a single patient has multiple encounters, each encounter has multiple procedures etc. In relational database terms, each is a to-many relation.&lt;/p&gt;

&lt;p&gt;However a simple hierarchy is insufficient for most health and care needs. For example, a clinical encounter might relate to multiple pathways of care, in a many-to-many relationship. Instead, we can picture the modern medical record as a graph of information with our ‘triples’ forming the nodes of that graph. Some nodes will be highly connected, others less so. Overall, the structure will be hierarchical.&lt;/p&gt;

&lt;p&gt;In such model, it is entirely reasonable to treat a collection of ‘triples’ together, if they form a logical whole that is semantically useful. For example, we might have a first-class attribute that could be used in a clinical encounter to record “family history”. As a first-class property, it could also be used in other contexts, but we might expect that family history property to itself be made up of a collection of other properties, including a list of diagnoses.&lt;/p&gt;

&lt;p&gt;Simplified, this might look like: (each entity is a tuple (namespace/value))&lt;/p&gt;

&lt;p&gt;Encounter -&amp;gt; Has Family History -» [ Diabetes mellitus, Hypertension, Ischaemic Heart Disease]&lt;/p&gt;

&lt;p&gt;If you are familiar with SNOMED CT, you will recognise these semantics are similar to the &lt;em&gt;normalised&lt;/em&gt; form of a concept. SNOMED CT has concepts which can themselves be decomposed into a normal form because they represent a complex concept, such as “Family history of diabetes”. It is not difficult to imagine that we can decompose and normalize arbitrary SNOMED concepts and indeed more complex expressions into the wider information model and even round-trip between decomposed and composed forms in order to arbitrarily fatten or flatten the tree.&lt;/p&gt;

&lt;p&gt;Such an approach depends very much on having a set of sane clinically meaningful and ontologically correct relationships (attributes) defined for concepts, and an understanding that different attributes might provide a different “view” of the same information.&lt;/p&gt;

&lt;h2 id=&quot;computable-and-declarative-properties&quot;&gt;Computable and declarative properties&lt;/h2&gt;

&lt;p&gt;Using first-class namespaced properties permits making health and care data more easily computable, because one might have multiple properties that use the same source data to derive a semantically different value. It permits create a facade of well-known properties in front of legacy data, or data in different formats.&lt;/p&gt;

&lt;p&gt;As a result, we can define properties to be computed, binding the resolution of such properties at runtime and enabling powerful runtime polymorphism; this means our software can potentially. become capable of processing new types of information without needing to update the code.&lt;/p&gt;

&lt;p&gt;For example, simple application might only want to examine a flat list of family history diagnoses and problems, while a more sophisticated application might want to drill-down into other attributes to understand, for example, whether there is a maternal history of a specific condition or not, if that data even existed. It means different namespace/value (ie attribute) resolvers can provide a different ‘view’ of the same underlying data. We move from an approach based on create/read/update/delete (CRUD) semantics to one that separates the reads and writes. We have different models for reads compared to writes, because they are semantically different.&lt;/p&gt;

&lt;p&gt;For example, we might represent a current list of medications on the ward as a simple collection, containing entries each of which represents a medication. In each, there would be an encoding of the medication using a UK dm+d identifier as well as dosing information. We might write a resolver that provides a computed property that derives total daily dose from that entry to allow easy graphing of daily doses over time.&lt;/p&gt;

&lt;p&gt;Current primary care systems use product-based prescribing and a textual description of dosing. Hospital based systems generally use dose-based prescribing. It is possible to map between these two systems, and so we might also permit resolution of a dose property for product-based prescriptions where possible. Such code can simply operate on pure data structures, is easily testable for safety, can work in isolation and demonstrates that we can add additional functionality to existing systems, and existing data, without needing to change the original.&lt;/p&gt;

&lt;p&gt;In this way, health and care software could become entirely decoupled, with pure functions provided by external entities processing our semantically-encoded health and care information: testable, modular, decoupled and deterministic.&lt;/p&gt;

&lt;p&gt;Likewise, we can see &lt;a href=&quot;https://ckm.openehr.org/ckm/archetypes/1013.1.499&quot;&gt;Address&lt;/a&gt; classes in openEHR defined for an organisation, with attributes representing properties not applicable to all countries such as a “Delivery point indicator”, which apparently is something important in Brazil. Because such attributes are not first-class, one ends up with multiple classes representing pretty much the same thing. You can easily end up with an explosion of classes, often in a rigid hierarchy.&lt;/p&gt;

&lt;p&gt;Instead, certainly for the UK, it would be possible to register, and then resolve, for example, an LSOA identifier into and then from a variety of contexts including organisations and patients, by runtime polymorphism and runtime registration of resolvers of types, while not impacting on the use of other address attributes in other countries in which LSOA has no meaning.&lt;/p&gt;

&lt;p&gt;For instance, we might try to resolve on a patient using a first-class name for that attribute such as “http://ons.gov.uk/Id/LSOA” and know that, given a date, we can use the address history and walk our graph to get the postcode and resolve the LSOA from there. We can have original data distributions that provide these data, such as the UK’s NHS postal code directory, and make use of those data to provide dynamic LSOA properties for the address history of an individual patient, and then link to indices of multiple deprivation, to resolve changes in deprivation over time or after a diagnosis.&lt;/p&gt;

&lt;p&gt;First-class attributes means we focus on semantics. We should be able to resolve the value of a property such as http://www.w3.org/2004/02/skos/core#prefLabel and obtain the preferred label for that structure, such as an organisation, or person, or even diagnosis, without necessarily knowing about whether the source information is provided in a proprietary format, HL7 v2, HL7 FHIR, openEHR, UK NHS ODS or a social care system. We prioritise &lt;em&gt;meaning&lt;/em&gt; over classes and brittle inheritance patterns that are usually dependent on a specific system or programming language.&lt;/p&gt;

&lt;p&gt;Similarly, different data collection “forms” can give the same semantic results, such as the “EDSS” scale for multiple sclerosis can be directly recorded or be part of an extended EDSS-FS scale. Instead of using static class hierarchies, we can define the same semantic property for the overall result and later support other scales that can provide the same semantic result, for example, when drawing a graph of results over time, or working out disease trajectory.&lt;/p&gt;

&lt;p&gt;You might recognise the approach of an application walking a graph and requesting exactly the information it requires, as that of &lt;a href=&quot;https://graphql.org&quot;&gt;GraphQL&lt;/a&gt; or &lt;a href=&quot;https://github.com/wilkerlucio/pathom&quot;&gt;Pathom&lt;/a&gt;. Clients see the view of data that they request.&lt;/p&gt;

&lt;p&gt;You might also recognise that approach of separating the semantics of reading (and making sense of the record) from the writing of information as that of CQRS (Command Query Responsibility Segregation). Managing medication is a good example, because actually health care data is actually better represented as a transactional log of &lt;em&gt;events&lt;/em&gt;. Do we really change that dose of medication in a database table or are the semantics better represented as a model of that change instead? Isn’t our current state simply a snapshot of all of the events processed sequentially?&lt;/p&gt;

&lt;p&gt;The names and values of data are orthogonal to the specifications of that data, but most object-orientated specifications conflate the two concepts.&lt;/p&gt;

&lt;h2 id=&quot;weeknotes&quot;&gt;Weeknotes&lt;/h2&gt;

&lt;p&gt;So during my convalescence, I learnt &lt;a href=&quot;http://clojure.org&quot;&gt;Clojure&lt;/a&gt; and also either started or continued work on the following:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/wardle/concierge&quot;&gt;Concierge&lt;/a&gt;. This resolves identifiers using namespace value tuples to abstract away some of NHS Wales’ existing services. This was written in golang and returns HL7 FHIR like models for the resolved resources, providing mapping between different namespaces (e.g. Read codes to SNOMED CT). This work made me realise that first-class types were not as scalable as I’d like, and it would be difficult to provide the same semantics as standards such as HL7 FHIR and its extensions without first-class namespaced and specified attributes.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/wardle/patientcare-ward&quot;&gt;e-Obs&lt;/a&gt;. A lightweight clojurescript single page application with desktop application responsiveness in the browser, dynamically generated SVG national early warning score charts on demand, and using concierge to handle user login, security token generation and refresh, and patient lookup. This uses an event-driven architecture. This taught me a lot about functional programming.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/wardle/clods&quot;&gt;clods&lt;/a&gt;. A clojure microservice providing a RESTful and graph API to UK health and care organisational services and postcodes. This led to me looking at how I might represent proprietary ODS schemas as both FHIR models and the W3C organisation schema, and how it would be so much easier if I used namespaced attributes instead.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/wardle/go-terminology&quot;&gt;go-terminology&lt;/a&gt;. A very fast golang-based terminology server that provides SNOMED CT services via REST and gRPC APIs. SNOMED-CT is an ontology, and uses triples in the same way as RDF, but the learning here is the importance of mapping concrete values from one ontology to another.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I plan to federate information from ‘clods’ on hospital sites with that from individual patient administration systems to allow hopping from arbitrary sites down into individuals units, wards and individual beds. For the client application, they will simply walk a graph from an organisation to a site, to a unit, to a ward and to a bed, with first-class namespaced attributes providing an abstraction over the inherent complexity in providing access to these data, which are obviously sourced from multiple disparate systems each using different data structures and representations.&lt;/p&gt;

&lt;p&gt;I’ve started work on a rule-based declarative system to resolve identifiers arbitrarily in the context of different information models, including making use of the existing and open-source openEHR archetype definitions, and linking those to HL7 FHIR and v2 messages when possible. Mostly those resolvers exist within the same application, at the moment, but there would be no different if those resolvers were provided from an external API, operating on pure data, in order to resolve the identifier in the context provided.&lt;/p&gt;

&lt;p&gt;We need to reboot the work on linked data and ontologies and use that in health and care. All of this work should be open-source, because semantically-meaningful data and ontologies are the way we should be building health and care software fit for the 21st Century.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">I’ve been off work, off blogging and off Twitter due to COVID-19 but fortunately now back to full health and thought I’d write up some notes about what I’ve been doing in my spare time outside of my day job doing telephone clinics and COVID ward duties.</summary></entry><entry><title type="html">Coherence in governance</title><link href="https://www.wardle.org/strategy/2019/12/21/coherent-governance.html" rel="alternate" type="text/html" title="Coherence in governance" /><published>2019-12-21T09:00:00+00:00</published><updated>2019-12-21T09:00:00+00:00</updated><id>https://www.wardle.org/strategy/2019/12/21/coherent-governance</id><content type="html" xml:base="https://www.wardle.org/strategy/2019/12/21/coherent-governance.html">&lt;p&gt;Our ability to adopt, deploy and improve technology is fundamental in our mission to build a health and care system that works seamlessly, for patients, families and staff.&lt;/p&gt;

&lt;p&gt;That means building services that span organisational, disciplinary, geographical and care boundaries so that, for example, as a patient, you don’t receive an appointment for clinic at the same time as your appointment for an x-ray.&lt;/p&gt;

&lt;p&gt;We &lt;em&gt;must&lt;/em&gt; step back and re-imagine how health and care services can work with the technology now at our disposal, and that means focusing on the &lt;em&gt;outcomes&lt;/em&gt; we wish to deliver. One unifying outcome must surely be to create a truly &lt;em&gt;seamless service&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;So what must be our priorities in order to create such a &lt;em&gt;seamless services&lt;/em&gt;?&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;We need an unerring focus on &lt;em&gt;user need&lt;/em&gt;, so that we design services that fundamentally put the patient at the centre and design through that perspective rather than one focused through the prism of an a single organisation or department.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;We must improve our ability to adopt and deploy technology, by adopting best practices such as modularisation. Modularisation is the process in which a large problem is broken-up into smaller sized chunks, making it possible for a small team to fully understand the problem and fully own the solution to that problem, and permit rapid delivery by enabling parallel working and minimising the need for constant interaction and checking between those teams that would otherwise slow down our ability to continuously iterate and improve.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;We must recognise the benefit of bringing diverse skills, experience and perspectives together to form cross-functional, multi-disciplinary teams who are trusted and empowered to understand and to solve these bite-sized problems. We need to avoid creating silos based on organisation, discipline or historic boundaries and instead understand ‘team-first’ boundaries aligned to business domains.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;We must prioritise &lt;em&gt;meaningful data&lt;/em&gt;, and regard data and the computing services that operate on those data as first-class products that, when combined together, form a &lt;em&gt;cohesive&lt;/em&gt; open platform. Such work must be enabled by the adoption of open technical standards to define application programming interfaces (APIs) that act as technical contracts between those services.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;coherence-logical-and-consistent&quot;&gt;Coherence: “Logical and consistent”&lt;/h1&gt;

&lt;p&gt;If we want our work in technology to be logical and consistent, we must have an overall strategic vision which sets out, openly and transparently, a set of high-level broad principles and the rules, &lt;em&gt;guard-rails&lt;/em&gt; and design patterns that we will all use.&lt;/p&gt;

&lt;p&gt;It’s very easy to think that consistency can only be achieved by managing complex technology programmes with a centralised &lt;em&gt;command-and-control&lt;/em&gt; approach. Such an approach is naive.&lt;/p&gt;

&lt;p&gt;Instead we must look to devolve power from the centre while maintaining overall coherence by setting the broad direction.&lt;/p&gt;

&lt;p&gt;We should be:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“Crossing the river by feeling the stones”&lt;/p&gt;

  &lt;p&gt;Deng Xiaoping&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;And that means &lt;em&gt;empowering&lt;/em&gt; teams, to deliver, at pace and incrementally, by a range of measures including&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;being clear on overall strategic direction&lt;/li&gt;
  &lt;li&gt;understanding that the most difficult part of technology is not the technology itself, but the management of change -  in people, behaviour and the work itself that our best technology can empower&lt;/li&gt;
  &lt;li&gt;deciding on &lt;em&gt;appropriate&lt;/em&gt; modularisation and creating teams to deliver those products&lt;/li&gt;
  &lt;li&gt;aligning our governance, architecture and standards into a cohesive whole.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Governance structures, technical architecture and technical standards are mutually dependent; for example it is not possible to define coherent governance without understanding the technical architecture to which we aspire.&lt;/p&gt;

&lt;h1 id=&quot;a-matrix-of-coherence&quot;&gt;A matrix of coherence&lt;/h1&gt;

&lt;p&gt;We need consistency across multiple domains. One way of thinking about structuring a coherent strategy is to consider two broad types of domain:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Business domains, aligning to business problems and their solutions.&lt;/li&gt;
  &lt;li&gt;Functional domains, aligning to technology problems and their solutions&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;A business domain is a specific, tangible business problem, such as citizen identity. That problem might be solved through the provisioning of a range of coherent products, some bought off-the-shelf such as an enterprise master patient index, and some developed in-house, such as a microservice that acts to cache identity updates and provide a canonical authoritative source of demographics information via a FHIR Patient resource. It makes no sense to procure or develop products or services that aren’t &lt;em&gt;coherent&lt;/em&gt; with other products in this domain. &lt;sup&gt;&lt;a href=&quot;#results-requests&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; Domain-driven design is about designing data and computing services based on models of the business domain itself, with &lt;em&gt;bounded contexts&lt;/em&gt; a unit for breaking up a larger domain into smaller parts.&lt;/p&gt;

&lt;p&gt;A functional domain is a specific, tangible technology domain, such as security engineering, system reliability engineering, infrastructure management, operations and user-centred design. Similarly, it will usually make little sense to not have a consistent approach to these core functional domains across a wider enterprise, although good judgement is needed to understand when to deviate in order to solve a specific problem.&lt;/p&gt;

&lt;p&gt;This schematic shows business domains orientated vertically, and functional domains orientated horizontally as representing a set of coherent services providing an &lt;em&gt;open platform&lt;/em&gt; on which applications can run, with the use of an API gateway and a coherent scheme for authentication and authorisation on a per-application, per-user basis:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/domains-functional-and-business.png&quot; alt=&quot;Domains Functional And Business&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This approach should make it obvious that building security and logging at an application-level, as is currently the case in Wales, is a mistake, and data and computing services should be first-class products exposing their data and functionality through open service interfaces, via APIs.&lt;/p&gt;

&lt;h1 id=&quot;towards-technical-excellence---and-coherence-within-and-across-functional-domains&quot;&gt;Towards technical excellence - and coherence within and across functional domains&lt;/h1&gt;

&lt;p&gt;Similarly, we need to aspire to technical excellence, with lead roles for experts in engineering and design, including security, software development, operations, infrastructure, standards and architecture, able to take a coherent “all-Wales” view and provide, openly and transparently, a set of guidelines and principles and design patterns that will shape our currently prioritised programmes of work.&lt;/p&gt;

&lt;p&gt;That means we need a separate programme of work to build and reward technical capability within health and care in Wales; for too long, the only way experienced engineers could progress was in management, and we have too many engineering teams led by managers with no technical skills or experience. Part of the blame must lie with the pay-scales within Agenda for Change.&lt;/p&gt;

&lt;p&gt;It is convenient to think of technical experts grouped into guilds or tribes, sharing good practice and helping to contribute, openly and transparently, to a range of principles, standards and design patterns for their specific domain; such work providing core principles, design blueprints and support for programmes and the teams working on solving domain problems.&lt;/p&gt;

&lt;p&gt;Such an approach doesn’t mean top-down control or even homogeneity. We must recognise that experts will need to deviate and innovate in order to solve real-life problems, and use that experience to feedback, inform and improve the guiding principles which we can all use. Through this, we build a continuously learning approach to technology. It is unlikely that a single technology stack or programming language would be appropriate across a complex system such as health and care, but we must endeavour to share good practice and harmonise our general approach.&lt;/p&gt;

&lt;p&gt;This matrix approach to governance is shown in the following schematic:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/coherent-governance.png&quot; alt=&quot;Coherent Governance&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The important features are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Long-lived but small cross-functional product teams&lt;/li&gt;
  &lt;li&gt;Multiple products grouped into dynamic and flexible programmes, created to meet our current and pending priorities.&lt;/li&gt;
  &lt;li&gt;Data and computing services as first-class products, creating an &lt;em&gt;open platform&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;Functional domain experts providing all-Wales high-level principles, standards and design patterns on their domain, such as security, infrastructure, architecture and design as well as contributing to product teams when appropriate.&lt;/li&gt;
  &lt;li&gt;High-level overview board providing core high-level principles and oversight as well as responsibility for redefining the dynamic programme structure based on present needs, with membership drawn from clinical, managerial and technical experts.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We’ve already started some of this work via the Welsh Technical Standards Board; we have &lt;a href=&quot;https://standards.cymru/posts/2018-06-19-wtsb/&quot;&gt;adopted the GDS design principles&lt;/a&gt;, published our own &lt;a href=&quot;https://standards.cymru/posts/2018-12-01-wtsb/&quot;&gt;working principles&lt;/a&gt; and have submitted our &lt;a href=&quot;https://standards.cymru/posts/2019-10-29-architectural-principles/&quot;&gt;architectural principles&lt;/a&gt; for review. Through this, we want to inculcate debate, feedback and so transform our approach to health and care in Wales.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;

&lt;h1 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h1&gt;
&lt;p&gt;&lt;a name=&quot;results-requests&quot;&gt;1&lt;/a&gt;: We currently have an example in Wales in which a re-procurement of a laboratory management system is in one programme of work, and re-procurement of a radiology information system is in another. Both are considering including “test requesting” functionality and yet, for end-users, we want a seamless system that, in clinic or on the ward, allows us to request multiple &lt;em&gt;things&lt;/em&gt; including referrals, laboratory, radiology and other tests. We don’t want separate “systems” but instead what appears to be a streamlined “single system”. Therefore, programmes of work need to be framed with user need; one logical approach might be to consider “results and requests” as a business programme to manage a suite of products, that would include concierge services that take user requests and farm them to our different backend systems via APIs, as well as managing the re-procurement of laboratory and radiology services.&lt;/p&gt;</content><author><name></name></author><summary type="html">Our ability to adopt, deploy and improve technology is fundamental in our mission to build a health and care system that works seamlessly, for patients, families and staff.</summary></entry><entry><title type="html">Next generation health and care technology</title><link href="https://www.wardle.org/ehr/2019/11/08/learning-from-ehr-next-steps.html" rel="alternate" type="text/html" title="Next generation health and care technology" /><published>2019-11-08T08:08:08+00:00</published><updated>2019-11-08T08:08:08+00:00</updated><id>https://www.wardle.org/ehr/2019/11/08/learning-from-ehr--next-steps</id><content type="html" xml:base="https://www.wardle.org/ehr/2019/11/08/learning-from-ehr-next-steps.html">&lt;p&gt;I &lt;a href=&quot;/ehr/2019/11/08/learning-from-creating-an-ehr.html&quot;&gt;built an electronic health record and along the way learnt a lot&lt;/a&gt; about how to think about the importance of medical records and &lt;em&gt;data&lt;/em&gt; in my day-to-day work as a practising clinician, manager and researcher.&lt;/p&gt;

&lt;p&gt;At the end of that talk (and post), I touched on the importance of building &lt;em&gt;capability&lt;/em&gt; : in data and the software that use those data - to deliver the outcomes we want in health and care. But what does that mean? What are the capabilities that we need to build, specifically?&lt;/p&gt;

&lt;p&gt;I would argue:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;our capabilities to record, view, manipulate and infer from &lt;em&gt;meaningful data&lt;/em&gt; - for direct care, for managing our services and for research.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;depend upon&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;our capabilities to continually deliver safe, sustainable and secure software at pace.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;and we can look to the characteristics of the highest-performing technology teams to understand that these depend upon:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;small, empowered, cross-functional (multi-disciplinary) teams&lt;/li&gt;
  &lt;li&gt;appropriate modularisation, with well-defined contractual (standards-based) interfaces between those modules&lt;/li&gt;
  &lt;li&gt;more sophisticated modules composing functionality provided by lower-level modules so managing complexity&lt;/li&gt;
  &lt;li&gt;cohesive data and software services forming a &lt;em&gt;platform&lt;/em&gt; (long-lived) used by lightweight applications (ephemeral)&lt;/li&gt;
  &lt;li&gt;fast feedback via automated testing and telemetry, monitoring and logging&lt;/li&gt;
  &lt;li&gt;fast feedback from users with iterative, agile working&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;and understand, therefore, there is:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;mutual dependency between architecture, governance and standards&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;because our capabilities are determined by our teams and how they can work effectively, and that means building an architecture that breaks down our problems into solvable chunks, making sure that governance is streamlined and effective so that there are clear lines of responsibility and defining the interactions between teams and the products for which they are responsible via open published standards as one part of the contractual obligations between those teams and products.&lt;/p&gt;

&lt;h1 id=&quot;building-products-delivering-outcomes--choose-team-first-boundaries&quot;&gt;Building products delivering outcomes : “Choose team-first boundaries”&lt;/h1&gt;

&lt;p&gt;Truly, our architecture and governance are mutually-dependent with &lt;em&gt;technical standards&lt;/em&gt; as an integral part of the wider contracts between our modules and consequently, between our teams.&lt;/p&gt;

&lt;p&gt;It makes little sense to govern programmes of work without respecting architectural boundaries; indeed, I would argue that many of the issues facing health and care services in Wales are as a result of ignoring this issue - such as thinking that it is appropriate to govern projects relating to patients and their interactions with services separately to projects relating to professionals, when in fact both &lt;em&gt;programmes&lt;/em&gt; of work share many core building blocks, such as citizen identity.&lt;/p&gt;

&lt;p&gt;So instead need to recognise the importance of constructing &lt;em&gt;empowered teams&lt;/em&gt; to help us solve the problems we face and organise those teams into specific programmes of work.&lt;/p&gt;

&lt;p&gt;The mantra must surely be:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;long-lived products within dynamic flexible programmes,&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“Flow is difficult to achieve when each team depends on a complicated web of interactions with many other teams. For a fast flow of change to software systems, we need to remove hand-offs and align most teams to the main streams of change within the organization. However, many organizations experience huge problems with the responsibility boundaries assigned to teams. Typically, little thought is given to the viability of the boundaries for teams, resulting in a lack of ownership, disengagement, and a glacially slow rate of delivery.”&lt;/p&gt;

  &lt;p&gt;Skelton, Matthew. Team Topologies (Kindle Locations 2147-2151). IT Revolution Press. Kindle Edition.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So how do we find the &lt;em&gt;fracture planes&lt;/em&gt; within our truly complex and heterogeneous systems?&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“A fracture plane is a natural seam in the software system that allows the system to be split easily into two or more parts. This splitting of software is particularly useful with monolithic software. The word monolith itself comes from Greek, meaning “single stone.” Traditional stonemasons hit stones at particular angles to split the rocks in clean segments, taking advantage of their natural fracture planes. We can look for similar fracture planes in software to find the natural split points that lead to software boundaries.”&lt;/p&gt;

  &lt;p&gt;Skelton, Matthew. Team Topologies (Kindle Locations 2226-2227). IT Revolution Press. Kindle Edition.&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name></name></author><summary type="html">I built an electronic health record and along the way learnt a lot about how to think about the importance of medical records and data in my day-to-day work as a practising clinician, manager and researcher.</summary></entry><entry><title type="html">Learning from building an electronic health record: a journey through data</title><link href="https://www.wardle.org/ehr/2019/11/08/learning-from-creating-an-ehr.html" rel="alternate" type="text/html" title="Learning from building an electronic health record: a journey through data" /><published>2019-11-08T08:08:08+00:00</published><updated>2019-11-08T08:08:08+00:00</updated><id>https://www.wardle.org/ehr/2019/11/08/learning-from-creating-an-ehr</id><content type="html" xml:base="https://www.wardle.org/ehr/2019/11/08/learning-from-creating-an-ehr.html">&lt;p&gt;This blog post is based on a presentation given to the Welsh Medical Committee on 8th November 2019.&lt;/p&gt;

&lt;p&gt;Many of the posts on this blog have focused on how we, as a clinical community in Wales, can use digital technology to drive improvements in our health and care services. The approach I have advocated, built on a foundation of open standards, interoperability with the provision of an open platform of data and computing services, has focused on the steps we need to take to improve the way we deliver technology in health and care.&lt;/p&gt;

&lt;p&gt;Instead, this post is rather self-indulgent; it documents my own journey through health data science and the lessons I’ve learned, in building my own software systems.&lt;/p&gt;

&lt;p&gt;The lessons are:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The importance of data in everything we do: whether that be in the direct care of individual patients, management of services and quality improvement and clinical research&lt;/li&gt;
  &lt;li&gt;That software and data services are best delivered by breaking up bigger problems into smaller ones, and understanding that components used like this are &lt;em&gt;fractal&lt;/em&gt;, in which more complex, sophisticated problems can be solved by stitching together smaller components.&lt;/li&gt;
  &lt;li&gt;That the boundaries between direct care, service management and research are not the right boundaries to use when building software for health and care; instead model the legal and regulatory differences and modularise using domain-driven design principles.&lt;/li&gt;
  &lt;li&gt;That our health and care teams across Wales are excited and enthused by technology, and want to improve; technology leaders should not be seeking to command-and-control this work, but provide toolboxes of computing and data services that can be used to solve problems. We should be setting the standards and principles and empowering teams to deliver.&lt;/li&gt;
  &lt;li&gt;User problems (and needs) in health and care are usually about workflow and process, so once we have mechanisms for handling &lt;em&gt;data&lt;/em&gt; and the way it is modelled, we can build software that works in different contexts. Think: not single applications giving views of different data (like we have now) but multiple applications giving views of the same data. This doesn’t mean you can’t have a style guide and user interface consistency via standards, and modular user-facing components so that users benefit from a toolbox of nationally-provided building blocks stitched together in different ways to suit their processes and workflows.&lt;/li&gt;
  &lt;li&gt;Software is our best way of acquiring, processing and making sense of data; that means being cognisant as to the architecture and governance that makes it possible for us to deliver safe, effective, high-quality software to users: that means needing &lt;em&gt;agility&lt;/em&gt;, building mechanisms for rapid, automated testing and deployment of software at pace.&lt;/li&gt;
  &lt;li&gt;We need to build capabilities across health and care in software and data.&lt;/li&gt;
  &lt;li&gt;Purchase of a commercial electronic health record, such as Cerner or Epic, means you need &lt;em&gt;greater&lt;/em&gt; capabilities in software and data; e.g. at the Wirral, their in-house developer team got &lt;em&gt;larger&lt;/em&gt; after purchase of Cerner because of the need to integrate and customise - in essence these software products are themselves &lt;em&gt;platforms&lt;/em&gt;, on which further valuable functionality can be built using the building blocks provided by that platform.&lt;/li&gt;
  &lt;li&gt;Many of the platform building blocks already exist in NHS Wales, and simply need modernisation. Platform components that don’t exist, such as off-the-shelf form designers, and components dealing with user interactions, can take advantage of modern generic technologic frameworks to build high-quality web-based and mobile-first applications.&lt;/li&gt;
  &lt;li&gt;We don’t have all of the answers; either in technology or in healthcare - we need to build systems with fast-feedback so that we plan to continuously improve.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;1-i-built-a-disease-specific-research-database&quot;&gt;1. I built a disease-specific research database.&lt;/h1&gt;

&lt;p&gt;My doctoral research, undertaken during my higher training in neurology, started in 2005 and was focused on understanding the clinical features and disease progression of a range of rare neurological disorders: the ataxias, and in some cases drawing phenotype-genotype correlations.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.003.jpeg&quot; alt=&quot;Wmc Journey.003&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Such research requires bringing together disparate data for analysis. The graphs show the effect of genetic changes on the onset of disease of a rare disorder.  I built an analytics pipeline that would run analyses automatically so that graphs and statistical tests would update immediately as I entered new data; that meant I was validating both the data and the software almost continuously, because errors would be evident immediately.&lt;/p&gt;

&lt;p&gt;But there are significant problems with a disease-specific database:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;it usually exists alone; it creates a silo&lt;/li&gt;
  &lt;li&gt;it might help to solve a specific problem but it doesn’t usually scale to solve new ones; it’s too specific.&lt;/li&gt;
  &lt;li&gt;we can’t easily make those data available to others; there were few governance or technical off-the-shelf solutions that make that possible. If we want data to be shared, we would need to rely on researchers to set-up mechanisms to do so.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;But amazingly, this is still the main way clinical research works - and single-disease charities continue to push “registries” as a solution in health and care. The typical approach for a registry is to build a web-based system that allows clinicians and researchers to submit data:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.005.jpeg&quot; alt=&quot;Wmc Journey.005&quot; /&gt;&lt;/p&gt;

&lt;p&gt;That’s not to say a registry is a bad thing - but we need to recognise that the &lt;em&gt;actual&lt;/em&gt; user need is defining a population of patients by virtue of a characteristic - a &lt;em&gt;cohort&lt;/em&gt;, and that might be diagnosis, symptom, clinical sign, procedure or intervention, and then usually collecting some specific additional information.&lt;/p&gt;

&lt;p&gt;We clearly need to be able to stratify patients like this, building systems that allow us to understand cohorts but the current approach to building registries is not the right approach and we need to ask charities to stop funding this broken model that ends up creating silos of data, and a workflow that isn’t embedded into clinical workflows. That means a registry of the make and model of breast implants is best delivered by ensuring data systems capture such information at the point-of-care, and instead we derive a “registry” at runtime based on shared characteristics.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.006.jpeg&quot; alt=&quot;Wmc Journey.006&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;2-so-instead-i-built-a-generic-research-database&quot;&gt;2. So instead I built a generic research database&lt;/h1&gt;

&lt;p&gt;I recognised that &lt;em&gt;defining cohorts&lt;/em&gt; was critical, and started making SNOMED CT the lingua franca of my next system: a generic research database that went operational in 2007 - as far as I know the first system in the UK to use SNOMED CT in clinical operational use - it could combine generic and disease-specific outcome measures and permit multiple different “virtual” registries, derived at runtime by virtue of structured clinical data:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.008.jpeg&quot; alt=&quot;Wmc Journey.008&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here users can type in problems or diagnoses - each user interface control configured by a dynamic rules engine that is easy to change and modify. I can build forms dynamically without writing new code.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/BUYvsMy-2EI&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.009.jpeg&quot; alt=&quot;Wmc Journey.009&quot; /&gt;&lt;/p&gt;

&lt;p&gt;SNOMED CT is an ontology: so that if a user enters, for example, a diagnostic term of “multiple sclerosis”, then computationally we know that it is a type of “demyelinating disease” and so we can derive cohorts of patients easily at any suitable level of granularity, either very specific or much more general. This works not only for diagnoses, but clinical characteristics, procedures interventions and even characteristics such as country of birth and ethnicity:&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/LMaOL8Q8bzk&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Notice how by virtue of SNOMED CT, the chosen list is grouped by region - “Born in China” is grouped under “Born in Asia” automatically.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/QcOoXOFJsBY&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.010.jpeg&quot; alt=&quot;Wmc Journey.010&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In all cases, users don’t know that they are entering SNOMED CT; its use is invisible as terms are entered through drop-downs, autocompletion text fields and even clicking on anatomical diagrams.&lt;/p&gt;

&lt;p&gt;This approach to data is an important foundation in permitting the derivation of multiple “virtual” cohorts and understanding the meaning of outcome measures. After all, how can we interpret outcome measures without understanding the baseline characteristics such as diagnoses, co-morbidities, etc?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.012.jpeg&quot; alt=&quot;Wmc Journey.012&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So here we see the longitudinal outcome of two patients, shown by the red line on each of the charts, drawn in real-time, potentially using data entered only moments before, overlaid onto the longitudinal outcomes of thousands of other patients with the same diagnosis, again derived dynamically, at runtime. The median progress of the group is shown by the dotted green line together with lines representing centiles. EDSS is a scale from 0 to 10, in which 0 represents a patient without any clinical signs of disease, and 10 is death. We see one patient doing worse than expected, and another doing better. We can also see that the patient not deteriorating as expected received alemtuzumab therapy, shown graphically along with the outcome data.&lt;/p&gt;

&lt;p&gt;This approach shows the value of fast-feedback - making data &lt;em&gt;valuable&lt;/em&gt; and useful in reducing the uncertainty around a clinical decision - patients and professionals, for example, can use these charts to support shared decision making as to whether to start a high-cost, high-risk, low frequency but highly aggressive new therapy. Users enter data when it is made useful to them, and that applies to both professionals and patients.&lt;/p&gt;

&lt;p&gt;It is important to realise that we don’t yet know the best ways of presenting outcome data like this, either for professionals or patients,  to support such decision making - some of our work is to understand what is helpful and what is not - our mission is to make information available at the right time to the right people and we need to learn how to do this effectively for lots of different types of data. If we knew all of the answers, we could take a different approach to our digital technological endeavours.&lt;/p&gt;

&lt;p&gt;Foundational software and data services, combined with an enthusiastic and high-performing team have advanced our understanding of, for example, multiple sclerosis. We gain insights through combining different types of data such as clinical outcomes, treatments and interventions with other data such as indices of socioeconomic deprivation; we build a more detailed understanding of individual patients and groups of patients through these different perspectives.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.013.jpeg&quot; alt=&quot;Wmc Journey.013&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So I ended up with a system to track outcomes and cohorts:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.014.jpeg&quot; alt=&quot;Wmc Journey.014&quot; /&gt;&lt;/p&gt;

&lt;p&gt;But such an approach, while clearly valuable, still risks being something outside of the routine day-to-day workflow of our services; how can we do this at scale, unless data - its acquisition, synthesis and use - is part of how we do our daily work?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.015.jpeg&quot; alt=&quot;Wmc Journey.015&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In fact, general practitioners are years ahead of hospitals here: they’ve been collecting structured data and using that information to drive care; for instance, they have systems that ensure that patients with diabetes mellitus have an annual review.&lt;/p&gt;

&lt;h1 id=&quot;3-so-i-worked-to-embed-data-in-workflows-it-became-an-electronic-health-record&quot;&gt;3. So, I worked to embed data in workflows; it became an electronic health record&lt;/h1&gt;

&lt;p&gt;In moving from a generic research database to a system that supported the workflow and communication needs of our departments, I built an electronic health record. It now has over 50,000 patients and has tracked hundreds of thousands of patient contacts. It provides multiple interfaces: a web-based front-end, an iOS application and a FHIR based API.&lt;/p&gt;

&lt;p&gt;But what do we mean by “health record”, and is this an opportunity to really start to think about what we mean by a health and care record?&lt;/p&gt;

&lt;p&gt;This is Larry Weed in 1971:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.018.jpeg&quot; alt=&quot;Wmc Journey.018&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Our health record supports our practice. “We’re a victim of it or a triumph because of it”. This record is not simply a way of documenting our work; it is inherently a tool with which we carry out the practise of health and care, and digital technologies should be transforming that, for both professional and patient, because so much more is possible when we shake off our assumptions made in the paper era.&lt;/p&gt;

&lt;p&gt;Paper records are expensive, poorly maintained, poorly accessible, do not support team working; they contain lots of data but not in a useful format.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.017.jpeg&quot; alt=&quot;Wmc Journey.017&quot; /&gt;&lt;/p&gt;

&lt;p&gt;How many of us have supervised or performed paper notes review for audit and quality improvement purposes? Collecting piles of notes and going through them, trying to find the information we need? Technology should be helping us build a system that can continuously improve, by virtue of making the information we already collect useful and &lt;em&gt;valuable&lt;/em&gt;, and teaching us the measures that reduce our uncertainty about decisions, whether that be for an individual patient or for groups of patients:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.019.jpeg&quot; alt=&quot;Wmc Journey.019&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And surely we already have lots of valuable data in health and care? Not really. Hospital episode statistics and most centrally collected data are collected outside of the process of clinical care:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.020.jpeg&quot; alt=&quot;Wmc Journey.020&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The issues are not new. The Bristol heart enquiry, in 2001, looked at the significant issues with data between 1984-1995. How many of us can say that much has changed since then?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.021.jpeg&quot; alt=&quot;Wmc Journey.021&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Why do we have arbitrary boundaries between the data we collect for administrative purposes, in the running of our hospitals and services, the data used in direct clinical care, the data for management of services and research data?  There are legal and regulatory differences in how such data can be used, and those need to be modelled in our systems, but we need to step back and understand that meaningful, interpretable data is the core foundation of our services. That means modelling &lt;em&gt;consent&lt;/em&gt; and ensuring that data can only be processed in line with the legal, regulatory frameworks, as an inherent feature of our data “system”. Likewise, we must move from data being collecting primarily for secondary uses (e.g. governmental data returns) to secondary use data being derived from prospectively collected, clinically-meaningful data captured at the point-of-care.&lt;/p&gt;

&lt;p&gt;One of the ways that we can make the acquisition, processing and use of data possible is to improve the software and data services that we use, at the point-of-care.&lt;/p&gt;

&lt;p&gt;Here we capture the current medications in an outpatient clinic. Behind the scenes, the drugs are mapped to the NHS dictionary of medicines and devices (dm+d) and the dosages parsed, automatically roundtripping between product-based and dose-based prescribing and allowing graphical display of total daily drug doses:&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/yTiYz5ofKj0&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.022.jpeg&quot; alt=&quot;Wmc Journey.022&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Such an approach makes one realise that we need living systems that work hand-in-hand with the processes and workflows of our services. Users now record over 5000 clinical encounters in my homegrown software:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.023.jpeg&quot; alt=&quot;Wmc Journey.023&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And it quickly became apparent that users had other needs - users need to safely and securely communicate in order to orchestrate clinical care. So I added secure messaging so that users could easily send messages to one another, all linked to the electronic record, so any message sent about a patient appears in the record, as well as in the relevant users’ inbox/sent mail mailboxes:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.024.jpeg&quot; alt=&quot;Wmc Journey.024&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Linking disparate data is powerful. How can we interpret step monitor counts, genomic data, patient-reported outcome measures, or anything else for that matter, without understanding the patient, their characteristics, their co-morbidities and the interventions they have received?&lt;/p&gt;

&lt;p&gt;Rather than considering research and clinical data as separate, we should think of them as simply different levels of specificity and granularity - and model the legal and regulatory rules defining the purposes to which data may be used. Similarly, even in clinical services, we expect to have more phenotypic information on a patient about to undergo epilepsy surgery compared to a new patient with an idiopathic generalised epilepsy.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.025.jpeg&quot; alt=&quot;Wmc Journey.025&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So the logical conclusion is that we must start to build a range of &lt;em&gt;data capabilities&lt;/em&gt;: and that means building &lt;em&gt;analytics and software expertise within health and care&lt;/em&gt;. We cannot afford to outsource this work. Our health and care systems must become data-driven, in partnership with academia, the third-sector and commercial partners, but we must ourselves, in health and care, truly make &lt;em&gt;digital the way we do business&lt;/em&gt;. We shouldn’t only be attempting to describe what is happening right now (although in most outpatient departments, we can tell you how many patients are seen, but have little insight into what they are seen for or indeed how they fare!) but move towards much more advanced data capabilities such as predictive analytics.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.026.jpeg&quot; alt=&quot;Wmc Journey.026&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;4-a-more-integrated-approach---and-highlighting-the-need-for-a-platform&quot;&gt;4. A more integrated approach - and highlighting the need for a platform&lt;/h1&gt;

&lt;p&gt;In order to really embed data acquisition and use in the workflows of our departments, across all organisations in Wales, I realised that my electronic health record could not live in isolation - instead it needed to integrate closely with other software and data systems within NHS Wales.&lt;/p&gt;

&lt;p&gt;But this work was really difficult. In fact, this has been and continues to be the most challenging aspect. Bespoke, proprietary integrations with different systems in Wales, with no cohesive platform and no consistency in underlying data or its structure. I started doing this work back in 2008, and quickly found I had to somehow make decisions about the “source of truth”. For example, as a system used across different organisations in Wales, I built integrations with different patient administrative systems, attempting to provide a unified view. But I soon found that one system might record a patient as deceased while another would have the patient recorded as alive!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.028.jpeg&quot; alt=&quot;Wmc Journey.028&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The even bigger problem was not even being able to get access to the data available for direct care, even when teams had built scalable national services such as repositories for laboratory and radiology data, there was seemingly no transparent process for gaining access.&lt;/p&gt;

&lt;p&gt;Irrespective of these limitations, being able to pull out patient information, clinic lists and write data back into document repositories has been sufficient to enable multiple workflows and create, I hope, valuable software.&lt;/p&gt;

&lt;p&gt;For example, this is from our botulinum toxin clinic. We knew how many patients attended, but didn’t know who received this costly treatment or indeed have any insight into their outcomes. We suspected that many patients were receiving treatment without benefit.&lt;/p&gt;

&lt;p&gt;The easiest way to help solve this problem was to build a solution focused on clinical workflow that made it easier in clinic - but as a side-effect allowed us to track what was done, who it was done to and combine that with postcode data mapped to organisational boundaries and calculate drug dose uses per local health board:&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/IbjaiEsMW-Q&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Users see a list of the patients for the clinic, pulled from the local patient administrative system, record data and then create a structured document, coded with SNOMED-CT procedures, diagnoses and indications together with a PDF version - which is sent into local and national document repositories automatically:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.029.jpeg&quot; alt=&quot;Wmc Journey.029&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Similarly in our motor neurone disease service, we need to be able to valuably support professionals in our multi-disciplinary teams. One aspect of this is tracking weight to identify patients in need of nutritional support. Of course, these data are already recorded in clinic by nursing staff, but usually on post-it notes or copied into paper records.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.030.jpeg&quot; alt=&quot;Wmc Journey.030&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The solution to this was two-fold. First, ensure that we had a mechanism to record body weight in the electronic record, and second, to use SNOMED CT to identify the cohort of patients with motor neurone disease or any subtype, and then provide a summary page that picked out the relevant information from the wider record to help clinical care:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.031.jpeg&quot; alt=&quot;Wmc Journey.031&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I’m pleased to say that we won an award at the NHS Wales 2019 awards for our work across South Wales for this type of work.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.032.jpeg&quot; alt=&quot;Wmc Journey.032&quot; /&gt;&lt;/p&gt;

&lt;p&gt;While this looks simple, the software is determining baseline weight by determining the onset of the patient’s subtype of motor neurone disease and finding a recorded weight as close as possible to that date, and then calculating the percentage change for the most recently recorded weight: we usually need to have a conversation about intervention if you lose 10% of your baseline weight.&lt;/p&gt;

&lt;p&gt;But integration remained &lt;em&gt;too&lt;/em&gt; difficult, and I looked in envy at how other non health and care “platforms” provided a credible and cohesive set of data and software services, often cloud-based, that could be stitched together to create innovative solutions to solve user needs, hitherto not considered by the original developers of that “platform”.&lt;/p&gt;

&lt;p&gt;At the same time, I was spending more time looking at how others were solving these issues: megasuite EHR vendors such as Cerner and Epic were heavily customisable, and provided their own “platform” facilities which meant internal developer teams could leverage their common data and software services to solve workflow problems for their users. Indeed, we heard from one site that their in-house developer team had to &lt;em&gt;increase&lt;/em&gt; in size after the procurement of these products, highlighting the need for integration and customisation.&lt;/p&gt;

&lt;h1 id=&quot;5-the-active-patient&quot;&gt;5. The active patient&lt;/h1&gt;

&lt;p&gt;The next part of the journey was an increasing awareness of how we were missing the &lt;em&gt;patient&lt;/em&gt; in our work! Patients must not only have access to their records but also contribute. So in 2015, I released an iPad application, based on Apple’s ResearchKit framework, that my colleagues trialled in the Parkinson’s clinic. I am not aware of any other ResearchKit-based software deployed in the UK before this work:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.034.jpeg&quot; alt=&quot;Wmc Journey.034&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/so-i-wrote/ipad.jpeg&quot; alt=&quot;Ipad&quot; /&gt;&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/oavWDjXkyic&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;The key was to ensure that the information was made available immediately for use in clinical care, but notice how the system can also ask the patient whether they are interested in research. In 2018, we successfully obtained ethical approval for a similar iPad application to be used to record consent, and so I can dynamically build consent forms in a web-based administrative interface and push it out to our iPads.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/so-i-wrote/m5-epr-consent.jpeg&quot; alt=&quot;M5 Epr Consent&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;6-strategy-and-complex-adaptive-systems&quot;&gt;6. Strategy and complex adaptive systems&lt;/h1&gt;

&lt;p&gt;But I realised that this work, in isolation, could not have the impact that I wanted it to have.&lt;/p&gt;

&lt;p&gt;I started to understand that I should try to spend more time influencing national and local information technology programmes within health and care in Wales, and start to advocate for a more modern approach to technology, trying to influence governance, team structures, architecture and encourage the adoption of open standards.&lt;/p&gt;

&lt;p&gt;I started talking to people with experience from other public sector and commercial digital initiatives, such as GDS, and learned more about user needs, the value chain and the importance of &lt;em&gt;delivery&lt;/em&gt; with the agile approach of fast-feedback resonating with my own experience of building a minimal viable product and getting early valuable feedback and iterating; after all, it was the only way I had been able to work for all of those years!&lt;/p&gt;

&lt;p&gt;I presented at the inaugural &lt;a href=&quot;/clinical-informatics/2017/10/19/data-driven.html&quot;&gt;Welsh digital health and care conference&lt;/a&gt; and pitched an approach based on user needs and an open technology platform made up of modular software and data services.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.036.jpeg&quot; alt=&quot;Wmc Journey.036&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This is from the &lt;a href=&quot;https://gov.wales/sites/default/files/publications/2019-03/informed-health-and-care-a-digital-health-and-social-care-strategy-for-wales.pdf&quot;&gt;Informed Health and Care strategy&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.037.jpeg&quot; alt=&quot;Wmc Journey.037&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This strategy is useful as a framework, useful to understand &lt;em&gt;needs&lt;/em&gt;, but not something to define governance or architecture, because it is self-evident that some core architectural building blocks are useful across multiple workstreams.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.038.jpeg&quot; alt=&quot;Wmc Journey.038&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The idea of an open platform, in which there is separation of the data and the applications that process those data, is not new. Indeed, we know health and care &lt;em&gt;data&lt;/em&gt; will outlast the applications that operate upon them; applications are increasingly ephemeral and very easy to create if the hard work is performed by services &lt;em&gt;within&lt;/em&gt; the platform itself.&lt;/p&gt;

&lt;p&gt;You almost certainly access your email using a variety of applications; web-based, multiple mobile applications and applications running on desktop computers - normally whatever suits your current context - your workflow might be that you respond with short replies using your mobile application but perhaps write longer messages on your desktop. The key is that you are viewing the same data through different prisms.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.040.jpeg&quot; alt=&quot;Wmc Journey.040&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.041.jpeg&quot; alt=&quot;Wmc Journey.041&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.042.jpeg&quot; alt=&quot;Wmc Journey.042&quot; /&gt;&lt;/p&gt;

&lt;p&gt;There is danger in designing software through an application-centric perspective, because you make it much too easy to make the wrong design and architectural decisions and that builds technical debt.&lt;/p&gt;

&lt;p&gt;This is what such a platform approach might look in NHS Wales:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.043.jpeg&quot; alt=&quot;Wmc Journey.043&quot; /&gt;&lt;/p&gt;

&lt;p&gt;For example, we’ve been discussing how the real-time analytics / data pipeline might be implemented via &lt;a href=&quot;https://kafka.apache.org&quot;&gt;Apache Kafka&lt;/a&gt; or similar pub/sub streaming pathway, while more interactive applications principally use FHIR APIs to interact with software and data services built into the platform.&lt;/p&gt;

&lt;p&gt;So that means that we can start to build partnerships and collaborations, not only within health and care services but with partners across academia, the third-sector and commercial entities; partners may provide some of the architectural building blocks for us, but such an approach, predicated upon the adoption of open technical standards, will allow us to build a thriving ecosystem, test innovation and scale solutions when proven, but taking steps to continuously evaluate and improve at a system-level.&lt;/p&gt;

&lt;p&gt;We move from this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.044.jpeg&quot; alt=&quot;Wmc Journey.044&quot; /&gt;&lt;/p&gt;

&lt;p&gt;to this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.045.jpeg&quot; alt=&quot;Wmc Journey.045&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We simply do not need multiple portals but we must recognise that we have a complex suite of different software products in different organisations - rather than top-down diktat, we need a convergence strategy that means that working systems across Wales can incrementally adopt nationally provided modular building blocks of functionality and yet still also be able to access the meaningful structured data that sits behind any modular user interface component if needed to solve user problems.&lt;/p&gt;

&lt;p&gt;Such an approach is simply good software engineering practice. The NHS Wales “WCP” product has “logging” built into the application so that all access to patient records is logged by the application itself. This should always have been something at the API level; we have too much business logic within this application and that simply makes ongoing work &lt;em&gt;more&lt;/em&gt; difficult.&lt;/p&gt;

&lt;p&gt;The benefit of APIs is that they are an &lt;em&gt;abstraction&lt;/em&gt;. I don’t need to know how my car works; my interactions with my car are to use a key, steering-wheel and pedals. It’s the same in software - and that means we can provide a simple-to-use open standards-based “platform” of different APIs that hide the underlying complexity of our wider enterprise.&lt;/p&gt;

&lt;p&gt;Vendors such as Cerner and Epic recognise the benefit of a platform approach: they each provide a set of FHIR APIs that mean that third-party applications can interact with the software and data services provided.&lt;/p&gt;

&lt;p&gt;We have three options in Wales: the status quo, the purchase of a megasuite EPR or the development of our own “platform” using a lot of the good work already done within Wales, but simply not (yet) exposed as first-class API products.&lt;/p&gt;

&lt;p&gt;Here’s how it could look for us:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.046.jpeg&quot; alt=&quot;Wmc Journey.046&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;becoming-data-driven---building-capabilities&quot;&gt;Becoming data-driven - building capabilities&lt;/h1&gt;

&lt;p&gt;In essence, our health and care services must become data-driven. Data are an essential ingredient of a prudent health and care service.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.047.jpeg&quot; alt=&quot;Wmc Journey.047&quot; /&gt;&lt;/p&gt;

&lt;p&gt;But data aren’t only valuable in supporting our health and care services. We should be looking to use data to support our work in improving our software design, development, testing and deployment lifecycle, and we need to look at how the highest performing software teams develop safe and effective software in the modern age.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.048.jpeg&quot; alt=&quot;Wmc Journey.048&quot; /&gt;&lt;/p&gt;

&lt;p&gt;That doesn’t only mean real-time dashboards of performance metrics, of live service status updates and numbers of mouse clicks for a specific process, but changing the way we design and build software systems in a much more agile and responsive way - with fast-feedback and continuous improvement.&lt;/p&gt;

&lt;p&gt;I was fortunate to work with Lee Waters and others on the &lt;a href=&quot;/images/systemreboot.pdf&quot;&gt;“System Reboot” report&lt;/a&gt; for Welsh Government, which identified some of the capabilities we need to develop across the public sector - and we need to work hard to share experiences and look at what platform components might be shared - much like the &lt;a href=&quot;https://www.notifications.service.gov.uk&quot;&gt;Gov.uk Notify service&lt;/a&gt; permits organisations to send notifications to users via email or SMS.&lt;/p&gt;

&lt;p&gt;For example, my approach to SNOMED CT was to deliver the software and get fast-feedback on its utility and functionality and improve, building in processes to ensure clinical safety at the outset. I saw instead national programmes looking to get consultancy and spending time &lt;em&gt;planning&lt;/em&gt; instead of getting real-life feedback to shape progress. Fundamentally, we need to move away from thinking we can do &lt;a href=&quot;https://en.wikipedia.org/wiki/Waterfall_model&quot;&gt;waterfall planning&lt;/a&gt; and procurement for healthcare technology.&lt;/p&gt;

&lt;h1 id=&quot;the-importance-of-expertise-in-data-and-software&quot;&gt;The importance of expertise in data and software&lt;/h1&gt;

&lt;p&gt;Finally, we need to recognise that we cannot outsource data and software expertise, because we are still at the “beginning of the digital revolution” - this is what Bill Gates said in 2017!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.049.jpeg&quot; alt=&quot;Wmc Journey.049&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Digital technology offers us the tools to transform our health and care services and design a more seamless, prudent, and continuously improving system for citizens.&lt;/p&gt;

&lt;p&gt;We need to&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;be focused on solving problems&lt;/li&gt;
  &lt;li&gt;encourage fast-feedback, for health and care services &lt;em&gt;and&lt;/em&gt; the software that supports those services&lt;/li&gt;
  &lt;li&gt;become data-driven&lt;/li&gt;
  &lt;li&gt;build partnerships and foster collaboration&lt;/li&gt;
  &lt;li&gt;be open, transparent and honest about our successes and our failures;&lt;/li&gt;
  &lt;li&gt;adopt open standards and encourage interoperability&lt;/li&gt;
  &lt;li&gt;adopt approaches from outside of health and care&lt;/li&gt;
  &lt;li&gt;inculcate an inquisitive, searching and curious &lt;em&gt;learning&lt;/em&gt; culture.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/wmc-journey/wmc-journey.050.jpeg&quot; alt=&quot;Wmc Journey.050&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark Wardle&lt;/em&gt;&lt;/p&gt;

&lt;h1 id=&quot;further-reading&quot;&gt;Further reading&lt;/h1&gt;

&lt;h4 id=&quot;on-health-technology-and-digital-transformation&quot;&gt;On health technology and digital transformation&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/strategy/2019/09/22/health-technology.html&quot;&gt;Digital transformation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/strategy/2018/11/12/manifesto-wales.html&quot;&gt;A manifesto for digital health in Wales&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;on-once-for-wales&quot;&gt;On “Once for Wales”&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2017/03/15/once-for-wales.html&quot;&gt;Once for Wales : a debate&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;on-trust-and-innovation&quot;&gt;On trust and innovation&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2017/12/06/paradox-of-ambition.html&quot;&gt;The paradox of ambition&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2017/12/05/enabling-innovation.html&quot;&gt;The paradox of control&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2017/12/06/5os-health.html&quot;&gt;The 5 Os of healthcare IT - objectives, ownership, openness, optimise, organic&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;on-platforms&quot;&gt;On platforms:&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;/strategy/2018/10/02/open-platform-wales.html&quot;&gt;An open platform for Wales&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;/clinical-informatics/2017/10/19/data-driven.html&quot;&gt;Data-driven healthcare&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/digital-platform/2018/03/03/platform-wales-1.html&quot;&gt;Platforms 1/3. Standards and interoperability&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/digital-platform/2018/03/03/platform-wales-2.html&quot;&gt;Platforms 2/3. An API-first approach&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/digital-platform/2018/03/03/platform-wales-3.html&quot;&gt;Platforms 3/3. What we need to do next&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;on-focus&quot;&gt;On focus:&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2018/01/19/focus-focus-focus.html&quot;&gt;Focus 1/3. The importance of strategy : focus&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2018/01/19/focus-challenges.html&quot;&gt;Focus 2/3. The challenges we face in delivering the vision&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2018/01/19/focus-solutions.html&quot;&gt;Focus 3/3. Pragmatic solutions to those challenges&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;on-data&quot;&gt;On data:&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2017/08/22/health-data.html&quot;&gt;Health data - start with a problem&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2017/10/19/data-driven.html&quot;&gt;Data-driven healthcare&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;on-development-standards-and-ecosystems&quot;&gt;On development standards and ecosystems&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2018/05/06/cloud-ehr.html&quot;&gt;Creative 1/3: creative destruction in health IT&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2018/05/06/clinical-software-quality.html&quot;&gt;Creative 2/3: the value of software for healthcare: quality improvement and service transformation underpinned by software, and software underpinning by quality improvement&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/clinical-informatics/2018/05/08/ecosystems.html&quot;&gt;Creative 3/3: ecosystems and the platform&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">This blog post is based on a presentation given to the Welsh Medical Committee on 8th November 2019.</summary></entry><entry><title type="html">Appointments and scheduling: a programme of work for an open platform in NHS Wales</title><link href="https://www.wardle.org/platform/2019/10/18/appointments-scheduling.html" rel="alternate" type="text/html" title="Appointments and scheduling: a programme of work for an open platform in NHS Wales" /><published>2019-10-18T19:18:18+01:00</published><updated>2019-10-18T19:18:18+01:00</updated><id>https://www.wardle.org/platform/2019/10/18/appointments-scheduling</id><content type="html" xml:base="https://www.wardle.org/platform/2019/10/18/appointments-scheduling.html">&lt;p&gt;I propose a programme of work to demonstrate a new collaborative approach to technology across health and care in Wales, that recognises the fundamental, foundational requirement to understand a patient’s clinical encounters across disparate health and care services to create a “seamless” service via distributed modern technology.&lt;/p&gt;

&lt;p&gt;While this is principally focused at health and care services in Wales, the design patterns have broad applicability, I hope.&lt;/p&gt;

&lt;p&gt;One of the important principles is to sketch out a piece of work that &lt;em&gt;helps us learn&lt;/em&gt;, rather than planning as if we have the answers. This is in line with our &lt;a href=&quot;https://standards.cymru/posts/2018-12-01-wtsb/&quot;&gt;broad design principles&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;background&quot;&gt;Background&lt;/h1&gt;

&lt;p&gt;This is a programme of work that cuts across multiple workstreams of the &lt;a href=&quot;https://gov.wales/sites/default/files/publications/2019-03/informed-health-and-care-a-digital-health-and-social-care-strategy-for-wales.pdf&quot;&gt;Informed Health and Care strategy&lt;/a&gt;. These workstreams are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;“Information for you”&lt;/li&gt;
  &lt;li&gt;“Supporting professionals”&lt;/li&gt;
  &lt;li&gt;“Improvement and innovation”&lt;/li&gt;
  &lt;li&gt;“A planned future”&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/digitalhealthconf/wardle-digital-health.003.jpeg&quot; alt=&quot;Wardle Digital Health.003&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This isn’t a bad way of thinking about the challenges we face; for example, it provides some structure on which we can think about user needs. This is from &lt;a href=&quot;/clinical-informatics/2017/10/19/data-driven.html&quot;&gt;my talk in 2017 at the inaugural Digital Health and Care Conference in Wales&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/digitalhealthconf/wardle-digital-health.007.jpeg&quot; alt=&quot;Wardle Digital Health.007&quot; /&gt;&lt;/p&gt;

&lt;p&gt;However, these workstreams aren’t the right way to structure the architecture, governance or programmes of work, because it is self-evident that there are important common software or data components that underpin delivery of the goals from more than one work-stream. It’s helpful to assess user needs and delivery via the prisms of these workstreams, but there’s something wrong in technological programmes of work all being under the responsibility of one of them.&lt;/p&gt;

&lt;h1 id=&quot;a-single-seamless-system&quot;&gt;A single seamless “system”&lt;/h1&gt;

&lt;p&gt;Our patients, their families and carers want our health services in Wales to work as a single seamless system, and the professionals that look after them, want to collaborate and work together to deliver that seamless care. This ‘single system’ approach aligns with the outcomes in “A Healthier Wales.”&lt;/p&gt;

&lt;p&gt;At the moment, patients and families experience a patchwork of services that do not appear seamless at all. Some general practices permit booking of appointments electronically, but for many with multiple long-term health conditions, managing their appointments across the different health and care organisations is a difficult job.&lt;/p&gt;

&lt;p&gt;Likewise, users of Welsh Clinical Portal see what appears to be a single application, but in fact see different data depending on where they are sitting. We see only that health board’s appointments in a specific version of WCP. This demonstrates a fundamental error in the design of currently deployed national applications. For example, last year I sat in my clinic in Cwm Taf and a patient was recorded as deceased while the same patient was recorded alive in Cardiff. We have single applications but multiple patient records. We must strive for a single patient record but we will always need to have multiple applications, customised for context (e.g. critical care, emergency units, primary care, analytics) and user (e.g. patient, professional).&lt;/p&gt;

&lt;p&gt;Similarly, work on our “Single Cancer Pathway” highlights how important it is to understand the pathway of patients from diagnosis to treatment, and manage this seamlessly across organisational boundaries. We cannot interpret our performance and our outcomes without understanding what has happened to our patients. For too long we have separated data used by clinicians from that by managers and administrators, and none of it has been available to our patients.&lt;/p&gt;

&lt;h1 id=&quot;proposal&quot;&gt;Proposal&lt;/h1&gt;

&lt;p&gt;We need to create a core foundational national service to provide ‘appointments and scheduling’ services. Such a service needs to be a first-class “product” provided by the national ‘open’ platform.&lt;/p&gt;

&lt;p&gt;Initially read-only, a view across multiple disparate systems including multiple PAS (patient administrative system), radiology and other systems including community care, providing a sane, standards-based API for use by multiple user-facing applications. It would be a unique and low-risk opportunity to build an architectural building block (ABB) that hides underlying complexity in favour of normalising and sanitising data from multiple sources to provide a seamless “single” record.&lt;/p&gt;

&lt;p&gt;This development would need:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;a collaborative approach - we work across organisations in Wales&lt;/li&gt;
  &lt;li&gt;a staged, incremental approach - it could start by providing only PAS data initially with additional integrations added piecemeal, not needing changes to applications using the API.&lt;/li&gt;
  &lt;li&gt;to design for future change - including the ability to schedule appointments when the underlying services permit&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Such an ABB would be used by multiple applications across multiple workstreams:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Workstream 1&lt;/em&gt; - this component would be an important enabler to allow patients to see their appointments across primary, community and  secondary care, including radiology.&lt;/p&gt;

&lt;p&gt;We could provide a rudimentary patient portal, but also make those same data available via PKB and DrDoctor, and even via a demonstrator mobile application for NHS Wales, similar to that created by NHS Digital (The “NHS App”).  If booking functionality is not provided by an underlying system (for example radiology), we could fake this functionality by providing a concierge service in which humans deal with requests and cancellations made via the service. This supports the identified “challenge project” within the recent architecture review of systems in NHS Wales.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Workstream 2&lt;/em&gt; - allowing professionals to have a view of current, future and past appointments across our health and care organisations in Wales, no matter the site, or indeed which application, one is currently using.&lt;/p&gt;

&lt;p&gt;This work would teach us a lot about APIs and application lifecycle management, logging, and access control, and would fit with need to modularise WCP as outlined in the architecture review, making it less tightly integrated - making it loosely-coupled - with the local PAS and instead providing a true national view of a single patient record. It also fits with the strategic theme, because booking staff could be alerted to clashes in booking; patients receiving appointments from different NHS and care organisations for the same date and time are not experiencing a seamless service.&lt;/p&gt;

&lt;p&gt;A service does not feel seamless if you receive an appointment in one department or organisation that clashes with another.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Workstream 3&lt;/em&gt; - we could feed scheduling information into a data warehouse and real-time analytics pipeline in order to understand our health and care demands across organisational boundaries in Wales, providing valuable learning to aid our “national data repository” work in an iterative, incremental way. This would teach us how to start to become &lt;em&gt;data-driven&lt;/em&gt;, and use novel computationally intensive techniques to analyse streaming data in real-time.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Workstream 4&lt;/em&gt; - this work, and particularly our use of open technical standards to drive interoperability, will teach us how we can deliver valuable software quickly and require collaboration across multiple teams. It will teach us whether we can do this work collaboratively in the ways I have outlined in this blog.&lt;/p&gt;

&lt;h4 id=&quot;alternative-approaches&quot;&gt;Alternative approaches?&lt;/h4&gt;

&lt;p&gt;Some people might suggest that the best way of delivering the outcomes I have outlined here would be to ensure a single “patient administrative system” for Wales, but such an approach would not solve breaking down the artificial silos we have built between primary and secondary care, or the hospital outpatients and, for example, radiology. Do we really want to force CAV to switch PAS? What a waste. Simply expose the right data, in the right format, for national use. In general, an organisation’s PAS supports local administrative workflows and anyone suggesting a rip and replacement approach to such a system should be questioned carefully.&lt;/p&gt;

&lt;p&gt;Instead, we should look at how we can use software design patterns such as vendor neutral archives or a facade pattern to provide a seamless view across multiple disparate services and organisations, without impacting operational services.&lt;/p&gt;

&lt;p&gt;The goal must be to have cohesive high-level strategic alignment of multiple, seemingly independent, products.  For example, in this approach, work to identify patients who are likely to not attend for their appointments can be developed, tested and subsequently scaled out with ongoing evaluation and continuous improvement, without needing changes within other systems and across a complex, heterogeneous enterprise. That’s the power of adopting robust open technical standards and strategic planning.&lt;/p&gt;

&lt;h4 id=&quot;synergies&quot;&gt;Synergies&lt;/h4&gt;

&lt;p&gt;There are synergies with the following other programmes:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Value-based healthcare / patient reported outcomes - appointments/scheduling form the foundation on which interventions and outcomes depend, and appointment data and scheduling functions would support patient-facing applications.&lt;/li&gt;
  &lt;li&gt;Modular WCP - to show a coherent national view (“single patient record”) in patient portals, including WCP but also in ABHB’s CWS.&lt;/li&gt;
  &lt;li&gt;NDR - national data resource - as part of workstream 3 - appointments and scheduling are a clearly defined domain which will provide valuable learning and permit an iterative, agile approach to development with early delivery of benefits.&lt;/li&gt;
  &lt;li&gt;Phased planning with metered funding&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Working on appointments and scheduling is one of the foundational building blocks of what would be a Welsh open platform (see &lt;a href=&quot;https://wardle.org/strategy/2018/10/02/open-platform-wales.html&quot;&gt;https://wardle.org/strategy/2018/10/02/open-platform-wales.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;It is a logical extension to the challenge projects identified in the architecture review - and identifies common core foundational challenges that underpin those projects - e.g. a modular WCP would need to view appointments from a single patient record, and not be tied to health board systems, e.g. a patient portal or mobile app would need a unified “one system” view across our health and care organisations but we’d want the same data to drive solutions such as PKB and our analytics as well.&lt;/p&gt;

&lt;h1 id=&quot;challenges-and-their-mitigation&quot;&gt;Challenges and their mitigation&lt;/h1&gt;

&lt;p&gt;There are some obvious challenges, and I don’t have the answers yet. We need to fixed on creating teams that can solve these. We know from the most productive technology teams that the best way to deliver valuable software at pace is to work in an agile, iterative way.&lt;/p&gt;

&lt;p&gt;There are some risks and some clear challenges that we will need to solve:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Can Wales work together like this?&lt;/li&gt;
  &lt;li&gt;Can we get access to systems which we cannot control?&lt;/li&gt;
  &lt;li&gt;What’s the Myrddin (WelshPAS) database schema? Is it stable? Is it the same in different instances and configuration? Is there a standards-based API? What “standards” are used for encoding the information recorded, and are they harmonised between instances?&lt;/li&gt;
  &lt;li&gt;What about Cardiff and Vale, who use a different PAS?&lt;/li&gt;
  &lt;li&gt;Same question for RADIS, a ‘national’ radiology information system that is different in each organisation?&lt;/li&gt;
  &lt;li&gt;Same question for GP systems?  - we can’t have only a webview but we need the data itself. Are re-procurements sufficiently scoped to include what we would need to deliver our objectives?&lt;/li&gt;
  &lt;li&gt;What community systems should we know about?&lt;/li&gt;
  &lt;li&gt;What’s the minimum number of “systems” that we’d need to take data from, by stream replication or live API, to prove something useful?&lt;/li&gt;
  &lt;li&gt;What would it take for health boards to use the toolbox of data and APIs that will be developed by this programme?&lt;/li&gt;
  &lt;li&gt;What degree of churn is there in scheduling - do staff make changes repeatedly before the schedules are finalised and appointment letters sent out? How does this translate into a safe view for patients? Would you issue updates/notifications every 1, 2, 3, 6,8, or 24 hours?&lt;/li&gt;
  &lt;li&gt;How do we solve the citizen identity/login issue? What work is there already in WG? What about gov.uk Verify? What does this look like, feel like for patients? Is it safe? Secure? High-risk/impact if we get this wrong?&lt;/li&gt;
  &lt;li&gt;What’s the delegation model? Carers, parents, power of attorney? Has anyone solved this?&lt;/li&gt;
  &lt;li&gt;Or can we fake it before we make it? Do we have to have patients login straightaway to a portal? What about making data available in PKB as part of that programme, and for anyone else, or everyone, nationalise the appointments/scheduling process so that letters are printed and sent out centrally? Are there economies of scale there? And doesn’t that mean we can get systems/processes right internally, and then safely switch over to electronic communications for those that opt-in? As a bonus, letters could go out to include the actual appointment letter, but also a wider NHS view - ie here are your other forthcoming appointments as well as this current appointment. Wouldn’t that make health and care much more seamless in feel? The idea is that on-the-ground, the teams doing scheduling wouldn’t have to necessarily know whether their patients are getting letters posted or sent electronically or by calendar invite!&lt;/li&gt;
  &lt;li&gt;Do we have a canonical source of “communication preferences” for citizens? I’ve seen this referenced in different PAS, but is it joined up? What are the scenarios? eg I’m a student and I want my appointments/schedule via mobile/email and also a letter to my parents. Or not.  Or most of the time, except for this clinic. How does this work for different clinical environments? What about the GU clinic?&lt;/li&gt;
  &lt;li&gt;Can we use the same approach to help patients who receive cross-border care - for example, North Wales and tertiary centres in Liverpool, the Birmingham liver service etc. What would we need to do to our approach to include data from other nations of the UK? Can we take advantage of the push towards open standards, the inception of NHSX and our collaborations with organisations such as HL7, INTEROpen etc.?&lt;/li&gt;
  &lt;li&gt;What are the technical standards needed here, and how do we align across the border?&lt;/li&gt;
  &lt;li&gt;If we’re combining appointment and scheduling data from disparate systems, is our demographic matching infrastructure (EMPI) up to the challenge? My testing suggests very slow response times against the test instance (&amp;gt;2s) so how could that be mitigated? Is a cache needed? What ‘fitness functions’ should be used to define the operational standards we expect from these services?&lt;/li&gt;
  &lt;li&gt;How can we limit our interactions with the “demographics” programme of work by adopting appropriate technical standards (API definitions, security, authentication, authorisation, scalability, responsiveness, quality of service indicators), so that we can work independently but rely on a single view of demographic information?&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;next-steps&quot;&gt;Next steps&lt;/h1&gt;

&lt;p&gt;This is not a project but instead we are building and delivering services and products. We can be clear about our overall direction; we are opening up our architecture, building a data-driven learning health and care system that appears, to patients and professionals, as increasing seamless. However, we will find hurdles and difficulties not yet imagined, and so we must look to defer decisions until the last possible moment so that we minimise risk. We do not minimise risk by planning and developing long lists of requirements by stakeholders, but instead delivering software again and again and getting fast feedback.&lt;/p&gt;

&lt;p&gt;The next steps must be focused on building capacity and capability - and identifying the obvious challenges - and then building teams, made up of different specialisms, working collaboratively, empowered and trusted, to deliver solutions to those challenges and teach the wider programme what worked and what didn’t.&lt;/p&gt;

&lt;p&gt;We don’t have all of the answers. Let’s create work that teaches us.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mark&lt;/em&gt;&lt;/p&gt;

&lt;h1 id=&quot;addendum&quot;&gt;Addendum&lt;/h1&gt;

&lt;h4 id=&quot;what-press-releases-might-come-about-from-this-programme&quot;&gt;What press releases might come about from this programme?&lt;/h4&gt;

&lt;p&gt;Thinking about press release content is an interesting way to ensure we are aligning our technology programmes and the products/services that will be built to our wider health and care strategic goals. We can write a short press release, either for a programme or a specific service. This is something that organisations such as Amazon use in order to work out whether something is valuable.&lt;/p&gt;

&lt;p&gt;We challenge ourselves: &lt;em&gt;are we doing something valuable here?&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;I’ve never tried this before, and I’m not a public relations expert, so these are simply a way of &lt;em&gt;thinking&lt;/em&gt; about a problem, not an actual press release!&lt;/p&gt;

&lt;p&gt;But, outcomes in digital / technology &lt;em&gt;are&lt;/em&gt; health and care outcomes. We need to stop thinking of digital (and IT) as a separate department or organisation, but instead focus on benefits for patients, carers and professionals. Digital technology is the enabler.&lt;/p&gt;

&lt;p&gt;So here are two example press releases to illustrate the importance of this work.&lt;/p&gt;

&lt;h4 id=&quot;1-seamless-health-and-care-in-nhs-wales&quot;&gt;1. Seamless health and care in NHS Wales&lt;/h4&gt;

&lt;blockquote&gt;
  &lt;p&gt;As part of its “A Healthier Wales” programme, NHS Wales has announced a new patient and carer-focused approach to healthcare data. Stating the importance of a “single patient record” and the need for a “single seamless system” across all organisations providing health and care services, patient data will be made available via portals, mobile applications and third-parties.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“We have been experimenting with products like ‘XXXX’ and ‘YYYY’ to provide ways for patients to see and contribute to their record,” says Dr xxxx, Chief Digital Officer for NHS Wales, “but these experiments have been piecemeal. Our approach is to focus on bringing together information from across Wales and making that available for patients and professionals by adopting open standards to support interoperability across Wales. Initially, patients and their representatives will be able to manage their appointments via a variety of channels, such as our new patient portal, an NHS Wales application and via third party providers such as XXX and YYYY but we expect to rollout additional functionality incrementally over time.”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;Speaking at the XXX event, Dr XXXX talked about the collaboration with partners across the UK so that patients receiving care from NHS services in other nations of the UK will experience a more joined-up and seamless service, irrespective of where they attend.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;2-a-new-approach-to-managing-outpatients-using-ai&quot;&gt;2. A new approach to managing outpatients using AI.&lt;/h4&gt;

&lt;blockquote&gt;
  &lt;p&gt;NHS Wales has announced a new national approach to scheduling and managing outpatients appointments. In collaboration with xxxx University, advanced mathematical algorithms and machine learning will identify patients most at need. “For example, additional support will be provided to patients predicted to be at higher risk of missing appointments”, says Dr XXXX,  “our Healthier Wales programme is focused on a person-centred approach in which care, irrespective of where and how it is provided, is seamless and joined-up. We can use data to identify those most in need of help, particularly those with long-term health conditions.”&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name></name></author><summary type="html">I propose a programme of work to demonstrate a new collaborative approach to technology across health and care in Wales, that recognises the fundamental, foundational requirement to understand a patient’s clinical encounters across disparate health and care services to create a “seamless” service via distributed modern technology.</summary></entry></feed>